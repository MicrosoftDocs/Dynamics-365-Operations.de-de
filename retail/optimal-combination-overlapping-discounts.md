---
title: "Ermittelt die optimale Kombination von überlappenden Rabatten"
description: "Wenn Rabatte überlappen, müssen Sie die Kombination von Rabatten überlappenden bestimmen, die Buchungssumme niedrigsten oder höchsten den Rechnungsrabatt erzeugen. Wenn der Rabattbetrag gemäß dem Preis der Produkte schwankt, die, wie in der allgemeine &quot;kaufen 1 erworben werden, erhalten Sie 1 x-Prozent Rundung&quot; (BOGO) aus Kleinrabatt, wird dieser Prozess ein Abgang der kombinatorischen Optimierung ab."
author: kfend
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
translationtype: Human Translation
ms.sourcegitcommit: 0c6a7bdc4ba82dd57ab3e395e6dfb0ae4de31fc4
ms.openlocfilehash: 31e5104045ed5b8fbfa3677a7f5702d551de4231
ms.lasthandoff: 03/31/2017


---

# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a>Ermittelt die optimale Kombination von überlappenden Rabatten

Wenn Rabatte überlappen, müssen Sie die Kombination von Rabatten überlappenden bestimmen, die Buchungssumme niedrigsten oder höchsten den Rechnungsrabatt erzeugen. Wenn der Rabattbetrag gemäß dem Preis der Produkte schwankt, die, wie in der allgemeine "kaufen 1 erworben werden, erhalten Sie 1 x-Prozent Rundung" (BOGO) aus Kleinrabatt, wird dieser Prozess ein Abgang der kombinatorischen Optimierung ab.

Dieser Artikel wird in Microsoft Dynamics AX 2012 R3 mit dem 3105973 freigegeben (am 2. November 2015 KB) oder höher und auf die Freigabe im Februar 2016 von Microsoft Dynamics AX verwendet. Um die überlappenden Rabatte der Kombination festzulegen um fortzufahren zeitnah anzuwenden und um die Rabattefunktionen umfangreichen bereitzustellen die in Microsoft Dynamics AX for Retail verfügbar sein, besitzen Sie eine Methode zum Anwenden von Rabatten überlappenden dargestellt. Es erhalten diese neue Methode angezeigt Schwellenwertklassifizierung ** **. Schwellenwertklassifizierung wird verwendet, wenn die Zeit, die erforderlich ist, um die möglichen Kombinationen von Rabatten überlappenden bewerten, einen Schwellenwert überschreitet, der in der Einzelhandelsparameter ** ** Seite in Dynamics AX konfigurierbar ist. In der Schwellenwertklassifizierungsmethode wird ein Wert für jeden überlappenden Rabatt berechnet, indem der Wert des Rabatts auf den freigegebenen Produkten verwendet. Die überlappenden Rabatte werden dann dem höchsten relativen Wert der niedrigste relativen Wert angewendet. Einzelheiten über die neue Methode, lesen Sie den Abschnitt "Schwellenwert", später in diesem Artikel. Schwellenwertklassifizierung wird nicht verwendet, wenn Skontobeträgen für das Produkt nicht durch unterschiedliche Produkt in der Buchung betroffen sind. Beispielsweise kann diese Methode nicht für zwei einfache Rabatte oder einen einfachen Rabatt und einen einzelnen Produktmengenrabatt verwendet.

## <a name="discount-examples"></a>Rabattbeispiele
In Dynamics AX können Sie eine unbegrenzte Anzahl Kleinrabatte auf einem Stamm erstellen, das von Produkten wird festgelegt. Da jedoch kein Limit festgelegt ist, können Leistungsprobleme auftreten, wenn Sie versuchen, die Rabatte zu berechnen, die auf den verschiedenen Produkten verwendet werden sollen. Die folgenden Beispiele veranschaulichen dieses Problem genauer. In Beispiel 1 beginnen, wir mit zwei Produkten und zwei überlappenden Rabatten. Im Beispiel 2, zeigen wir, wie das Problem, entwickelt für weitere Produkte hinzugefügt werden.

### <a name="example-1-two-products-and-two-discounts"></a>Beispiel 1: Zwei beiden Rabatte und Produkte

In diesem Beispiel wurden zwei Produkte erforderlich, das für jeden Rabatt zu erlangen, und Rabatte können nicht zusammengefasst werden. Die in Rabatte diesem Beispiel sind ** bester Preis ** Rabatte. Beide Produkte qualifizieren der beiden Rabatte. Hierbei gelten die beiden Rabatte. [überlappendes 01 Rabattkombinationsfeld ![" . /media/overlapping-discount-combo-01.jpg)]". /media/overlapping-discount-combo-01.jpg) Für zwei beliebige Produkte, das eine der beiden Rabatte hängt von Preisen der beiden Produkte aus. Wenn der Preis beider Produkte oder gleich fast gleich ist besser, Skonto 1. Wenn der Preis aus einem Produkt bei geringer als der anderen Preis des Produkts ist besser, Rabatt ist 2. Das hier mit mathematischen Regel für diese beiden Rabatte gegeneinander überprüft werden: [überlappendes 02 Rabattkombinationsfeld ![" . /media/overlapping-discount-combo-02.jpg)]". /media/overlapping-discount-combo-02.jpg" Hinweis, der, wenn der Rechnungseinheitspreis von Produkten mit 1 zwei drittel der Preissummenabweichung Produkts ist 2, die beiden Rabatte gleich sind. In diesem Beispiel ist der zum Diskont effektive Rabattprozentsatz 1 von einigen Prozent (wenn die Preise der beiden Produkte weites getrennt sind), bis zu maximal 25 Prozent (wenn die Produkte zwei denselben Preis haben). Der Rabattprozentsatz für den Skonto 2 ist fest. Das Startdatum ist immer 20 Prozent. Da der gültigen Rabattprozentsatz für Skonto 1 einen Bereich hat, der mehr als Rabatt oder kleiner als 2 sein kann, hängt der beste Rabatt von Preisen der beiden Produkte aus, die für den Rabatt gewährt werden müssen. In diesem Beispiel wird die Berechnung schnell ausgefüllt, da nur beiden Rabatte auf nur zwei Produkten angewendet werden. Es gibt lediglich zwei mögliche Kombinationen: eine Bewerbung der Anwendung des Rabatts 1 oder einen Rabatt. 2. Es gibt keine Permutationen, zu berechnen. Der Wert jedes Rabatt wird berechnet, indem das sowohl Produkte verwendet, und der beste Rabatt wird verwendet.

### <a name="example-2-four-products-and-two-discounts"></a>Beispiel 2: Vier beiden Rabatte und Produkte

Danach verwenden Sie vier Produkte und dieselben beiden Rabatte. Alle vier Produkte qualifizieren der beiden Rabatte. Es gibt zwölf mögliche Kombinationen. Am Ende der Buchung werden beiden Rabatte auf drei verschiedene Kombinationen verwendet: Anwendungen zwei von Skonto 1, zwei Bewerbungen der Anwendung des Rabatts 2 oder einer der Anwendung des Rabatts 1 und einer von Rabatt. 2. Um die möglichen Kombinationen zum Demonstrieren, beachten Sie zwei verschiedene Gruppen der Produkte die vier verschiedene Preise haben:

-   Alle vier Produkte denselben Preis haben, $15,00. In diesem Fall ist die beste Rabattkombination zwei Bewerbungen von Rabatt. 1. Zwei Produkte sind voller Preis, und sind zwei heruntergesetzt 50 Prozent. Die rabattierte Summe für die Buchung ist $45 (15 + 15 + 7,50 + 7,50), die $15 (25 Prozent) die zur Abrundung der undiscounted Der Summe von ist. Skonto 2 ist nur $12 (20 Prozent).
-   Zwei Produkte sind $20 je, ist ein Produkt $15, und das Produkt ist. EUR. In diesem Fall ist die beste Rabattkombination eine Bewerbung der Anwendung des Rabatts 2 und einer erweiterten Rabatts. 1. Die folgenden Tabellen wird gezeigt Rabatte.

Um die Tabellen gelesen, verwenden Sie ein Produkt aus einer Zeile und ein Produkt aus einer Spalte. In der Tabelle für Skonto 1, wenn Sie mit den beiden $20 Produkte kombinieren, werden Sie bei EUR ab. In der Tabelle für Skonto 2, wenn das Produkt und die $15 Produkt EUR kombinieren, erhalten Sie $4 Rundung aus. [überlappendes 03 Rabattkombinationsfeld ![" . /media/overlapping-discount-combo-03.jpg)]". /media/overlapping-discount-combo-03.jpg) Zunächst, suchen Sie den größten Rabatt, der aus allen möglichen zwei Produkte verfügbar ist, indem jeden Rabatt verwendet. Die beiden Tabellen zeigen den Rabattbetrag für alle Kombinationen der beiden Produkte angezeigt. Die schattierten Teile der Tabellen finden jeden Fälle, in denen ein Produkt mit dem zugeordnet ist, das von uns nicht ausführen können, oder ein Rückzuordnen zweier Produkten dar, weshalb dieselbe Rabattbetrag hergestellt und ignoriert werden kann. Durch Festlegen der Tabellen einmal genauer anschauen, werden Sie sehen, dass Skonto 1 für die zwei $20 Artikel der größten Rabatt ist, für jeden der Rabatt auf alle vier Produkte verfügbar ist. (Dieser Rabatt wird in grün in der ersten Tabelle. Markieren) Dadurch lassen nur das Produkt $15 und das Produkt. EUR Wenn Sie erneut die beiden Tabellen einmal genauer anschauen, werden Sie sehen, dass, für diese beiden Produkte, Skonto 1 einen Rabatt $2,50 gibt, für Skonto 2 einen Rabatt $4 gibt. Daher wird Skonto 2. aus. Der Rechnungsrabatt ist $14. Um diese Diskussion zu vereinfachen visualisiert werden, sollten Sie hier zwei zusätzliche Tabellen die der eigentliche Rabattprozentsatz für alle möglichen ZweiProduktkombinationen für Skonto 1 Skonto 2. und anzeigen. Nur ist Hälfte Liste mit Kombinationen eingeschlossen, weil, für diese beiden Rabatte, den Auftrag, in der zwei die Produkte in den Rabatt angewendet werden, noch ist. Der höchste effektive Rabatt (25 Prozent) wird in grün und niedrigsten im tatsächlichen Rabatt (10 Prozent) markiert wird rot hervorgehoben. [überlappendes 04 Rabattkombinationsfeld ![" . /media/overlapping-discount-combo-04.jpg)]". ** Hinweis: /media/overlapping-discount-combo-04.jpg)** Wenn Preise unterscheiden und zwei oder mehr Rabatt, nach ist die einzige Möglichkeit, der besten Kombination von Rabatten sicherzustellen, beide Rabatte auszuwerten und sie zu vergleichen.

## <a name="total-possible-combinations"></a>Die mögliche Kombinationen
Dieser Abschnitt wird das beispielsweise von vorherigen Abschnitt fort. Es können weitere Produkte und einen anderen Rabatt hinzu und finden, wie viele Kombinationen berechnet und verglichen werden müssen. In der folgenden Tabelle wird die Anzahl für mögliche Rabattkombinationen als die Produktmengenerhöhungen angezeigt. Die Tabelle ist angegeben, was einerseits, wenn zwei überlappende Rabatte gibt, wie im vorherigen Beispiel erfolgt, und wenn es drei überlappende Rabatte gibt. Die Anzahl für mögliche Rabattkombinationen, die demnächst ausgewertet werden müssen, überschreitet, was auch ein Computer schneller berechnen sowie Vergleichen kann schnell genug, um für Einzelhandelstransaktionen akzeptiert werden sollen. [überlappendes 05 Rabattkombinationsfeld ![" . /media/overlapping-discount-combo-05.jpg)]". /media/overlapping-discount-combo-05.jpg) Wenn auch größere Mengen oder überlappendere Rabatte angewendet werden, die Gesamtanzahl für mögliche Rabattkombinationen geht schnell in Millionenhöhe, und die Zeit, die erforderlich ist, um die bestmögliche Kombination schnell auszuwerten und auszuwählen, wesentlich wird. Einige Optimierungen sind im Kleineinzelhandelspreismodul fertig, aktualisiert die Gesamtanzahl von Kombinationen zu reduzieren, die überprüft werden müssen. Da jedoch die überlappenden Rabatte der Nummer und Mengen in einer Buchung nicht eingeschränkt werden, müssen mehrere Kombinationen immer ausgewertet werden, sobald sich überlappende Rabatte gibt. Dieses Problem wird der Abgang die Schwellenwertklassifizierungs-Methodenadressen.

## <a name="marginal-value-method"></a>Schwellenwertmethode
Um den Abgang einer exponential zunehmenden Anzahl von Kombinationen die Behebung ausgewertet werden müssen, ist eine Optimierung die den Wert pro freigegebenes Produkt jedes Rabatts im Satz von Produkten berechnet die zwei oder mehr Rabatte angewendet werden kann. Wir bezeichnen diesen Wert als ** Schwellenwert ** des Rabatts für die freigegebene Produkte angezeigt. Der Schwellenwert ist der Durchschnitt pro Produkterhöhung im freigegebenen Gesamtrabattbetrag, wenn die Produkte in den Rabattzeitraum einbezogen werden sollen. Der Schwellenwert wird berechnet, indem der Gesamtrabattbetrag (DTotal" Transport, den Rabattbetrag ohne die freigegebene Produkte " DMinus \\ freigegeben) abgezogen, und die Differenz von der Anzahl von freigegebenen Produkten (ProductsShared) geteilt. [überlappendes 06 Rabattkombinationsfeld ![" . /media/overlapping-discount-combo-06.jpg)]". /media/overlapping-discount-combo-06.jpg) Nach der Schwellenwert jedes Rabatts in einem freigegebenen Produkten Satz berechnet wurde, Rabatte werden in den freigegebenen Produkten im Auftrag vollständig dem höchsten Schwellenwert der niedrigste Schwellenwert angewendet. Bei dieser Methode werden alle restlichen Rabattmöglichkeiten nicht jedes Mal verglichen, nachdem eine einzelne AOS-Instanz einen Rabatt angewendet wurde. Stattdessen werden einmal verglichen überlappenden die Rabatte angewendet und dann im Auftrag. Keine weiteren Vergleiche durchgeführt werden. Sie können den Schwellenwert konfigurieren, die der auf der Schwellenwertmethode ** Rabatt ** Registerkarte der Einzelhandelsparameter ** ** Seite zu wechseln. Die akzeptierte Zeit, den Rechnungsrabatt zu berechnen variiert zu Einzelhandel. Allerdings liegt diese Zeit im Allgemeinen im Bereich der zehnten Millisekunden auf einer Sekunde.


