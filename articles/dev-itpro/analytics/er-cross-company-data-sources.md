---
title: Unternehmensübergreifende Datenquellen in der elektronischen Berichterstellung (EB)
description: In diesem Thema wird erläutert, wie Sie unternehmensübergreifende Datenquellen in der Elektronische Berichterstellung (Electronic Reporting/ER) verwenden können.
author: NickSelin
manager: AnnBe
ms.date: 05/25/2018
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.openlocfilehash: 3ff94c49eed378d92e995782e73d76d669b44292
ms.sourcegitcommit: 9d4c7edd0ae2053c37c7d81cdd180b16bf3a9d3b
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 05/15/2019
ms.locfileid: "1552763"
---
# <a name="cross-company-data-sources-in-electronic-reporting-er"></a><span data-ttu-id="32948-103">Unternehmensübergreifende Datenquellen in der elektronischen Berichterstellung (EB)</span><span class="sxs-lookup"><span data-stu-id="32948-103">Cross-company data sources in Electronic reporting (ER)</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="32948-104">Sie können Elektronische Berichterstellung(ER)-Formate entwerfen, um ausgehende Dokumente in verschiedenen Formaten zu generieren.</span><span class="sxs-lookup"><span data-stu-id="32948-104">You can design Electronic reporting (ER) formats to generate outgoing documents in various formats.</span></span> <span data-ttu-id="32948-105">Wenn ein Dokument erzeugt wird, ruft ein ER-Format Datenquellen auf, die in einem entsprechender ER-Modellzuordnung konfiguriert wurden.</span><span class="sxs-lookup"><span data-stu-id="32948-105">When a document is generated, an ER format calls data sources that were configured in a corresponding ER model mapping.</span></span> <span data-ttu-id="32948-106">Um den Zugriff auf Anwendungstabellen für das Abrufen von Datensätzen zu konfigurieren, können Sie ER-Datenquellen vom Typ **Tabellendatensätze** verwenden.</span><span class="sxs-lookup"><span data-stu-id="32948-106">To configure access to application tables for record retrieval, you can use ER data sources of the **Table records** type.</span></span> <span data-ttu-id="32948-107">Wenn die zugreifende Tabelle eine gemeinsame Tabelle ist (d.h. eine Tabelle, in der Daten ohne Unternehmenskennung gespeichert werden), gibt diese Datenquelle alle Datensätze zurück.</span><span class="sxs-lookup"><span data-stu-id="32948-107">When the accessing table is a shared table (that is, a table where data is saved without a company identifier), this data source returns all records.</span></span> <span data-ttu-id="32948-108">Wenn die zugreifende Tabelle eine unternehmensabhängige Tabelle ist (d.h. eine Tabelle, in der Daten pro Unternehmen gespeichert werden), gibt diese Datenquelle nur die Sätze zurück, die für das aktuelle Unternehmen gespeichert wurden (d.h. den Unternehmenskontext, unter dem das ER-Format läuft).</span><span class="sxs-lookup"><span data-stu-id="32948-108">When the accessing table is a company-dependent table (that is, a table where data is saved per company), this data source returns only the records that have been saved for the current company (that is, the company context that the ER format is running under).</span></span>

<span data-ttu-id="32948-109">Jede Datenquelle des Typs **Tabellendatensätze** in einer Modellzuordnung kann nun als unternehmensübergreifende Datenquelle gekennzeichnet werden.</span><span class="sxs-lookup"><span data-stu-id="32948-109">Every data source of the **Table records** type in a model mapping can be now marked as a cross-company data source.</span></span> <span data-ttu-id="32948-110">Daher können Sie Datenquellen vom Typ **Tabellendatensätze** verwenden, um auf unternehmensübergreifende Daten in Anwendungstabellen zuzugreifen.</span><span class="sxs-lookup"><span data-stu-id="32948-110">Therefore, you can use data sources of the **Table records** type to access cross-company data in application tables.</span></span>

<span data-ttu-id="32948-111">Wenn Sie eine Datenquelle als unternehmensübergreifend kennzeichnen, tritt folgendes Verhalten auf:</span><span class="sxs-lookup"><span data-stu-id="32948-111">If you mark a data source as cross-company, the following behavior occurs:</span></span>

- <span data-ttu-id="32948-112">Bei einer Datenquelle, die auf eine beliebige gemeinsame Tabelle außer CompanyInfo verweist, gibt die Datenquelle alle Datensätze zurück, die in der referenzierten Tabelle vorhanden sind.</span><span class="sxs-lookup"><span data-stu-id="32948-112">For a data source that refers to any shared table except CompanyInfo, the data source returns all records that exist in the referenced table.</span></span> 
- <span data-ttu-id="32948-113">Für eine Datenquelle, die auf die CompanyInfo-Tabelle verweist, gibt die Datenquelle die Datensätze zurück, die den Bezeichner eines Unternehmens aus dem definierten Bereich enthalten, obwohl CompanyInfo eine gemeinsame Tabelle ist.</span><span class="sxs-lookup"><span data-stu-id="32948-113">For a data source that refers to the CompanyInfo table, even though CompanyInfo is a shared table, the data source returns the records that contain the identifier of a company from the defined scope.</span></span>
- <span data-ttu-id="32948-114">Für jede unternehmensabhängige Tabelle gibt die Datenquelle die Datensätze der Verweistabelle zurück, die den Bezeichner eines Unternehmens aus dem definierten Umfang enthalten.</span><span class="sxs-lookup"><span data-stu-id="32948-114">For any company-dependent table, the data source returns the records of the referenced table that contain the identifier of a company from the defined scope.</span></span>

<span data-ttu-id="32948-115">Wenn im Dialogfeld der Systemabfrage die Option **Abfrage anfordern** für jede Datenquelle aktiviert ist, die als unternehmensübergreifend markiert ist, können Sie manuell eine oder mehrere Unternehmen auswählen, die auf der Registerkarte **Unternehmensbereich** aufgenommen werden sollen.</span><span class="sxs-lookup"><span data-stu-id="32948-115">In the system query dialog box, when the **Ask for query** option is turned on for any data source that is marked as cross-company, you can manually select one or more companies to include on the **Company range** tab.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="32948-116">Wie andere Filter wird auch der Unternehmensfilter als zuletzt verwendeter Wert für Abfragen bei der Ausführung eines ER-Formats beibehalten.</span><span class="sxs-lookup"><span data-stu-id="32948-116">Like other filters, the company filter is persisted as a last-used value for queries when you run an ER format.</span></span> <span data-ttu-id="32948-117">Der Filter wird nicht automatisch geändert, wenn Sie den unternehmensübergreifenden Wert für eine Datenquelle ändern.</span><span class="sxs-lookup"><span data-stu-id="32948-117">The filter isn't automatically changed if you change the cross-company value for a data source.</span></span> <span data-ttu-id="32948-118">Um einen anderen unternehmensübergreifenden Wert für eine andere Datenquelle zu verwenden, löschen Sie die entsprechende benutzerspezifische Auswahl.</span><span class="sxs-lookup"><span data-stu-id="32948-118">To use a different cross-company value for another data source, delete the corresponding user-specific selection.</span></span>

<span data-ttu-id="32948-119">Für jede Datenquelle, die als unternehmensübergreifend gekennzeichnet ist, können Sie die gewünschten Datensätze über die Funktionen **FILTER** und **WHERE** in ER-Ausdrücken auswählen.</span><span class="sxs-lookup"><span data-stu-id="32948-119">For every data source that is marked as cross-company, you can select the records that you want by using the **FILTER** and **WHERE** functions in ER expressions.</span></span> <span data-ttu-id="32948-120">Das Feld **dataAreaID** kann auch als Unternehmenskennung verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="32948-120">The **dataAreaID** field can also be used as a company identifier.</span></span> <span data-ttu-id="32948-121">Derzeit ist das Feld **dataAreaID** auf folgende Bedingungstypen beschränkt, wenn die Funktion **FILTER** verwendet wird:</span><span class="sxs-lookup"><span data-stu-id="32948-121">Currently, the **dataAreaID** field is limited to the following types of conditions when the **FILTER** function is used:</span></span>

- <span data-ttu-id="32948-122">Es werden nur Bedingungen unterstützt, die einen einzelnen **dataAreaID** Feldvergleich haben.</span><span class="sxs-lookup"><span data-stu-id="32948-122">Only conditions that have a single **dataAreaID** field comparison are supported.</span></span>
- <span data-ttu-id="32948-123">Nur Vergleiche mit Ausdrücken, die nicht von Datensatzlistenelementen abhängen, sind erlaubt.</span><span class="sxs-lookup"><span data-stu-id="32948-123">Only comparisons that have expressions that don't depend on records list items are allowed.</span></span>

<span data-ttu-id="32948-124">Daher ist der folgende Ausdruck gültig.</span><span class="sxs-lookup"><span data-stu-id="32948-124">Therefore, the following expression is valid.</span></span>

```
FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
While shown below expressions will not pass the validation:
FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
FILTER (MyTable, 
    OR(
        MyTable.dataAreaID = $StringUserInputParameter1,
        MyTable.dataAreaID = $StringUserInputParameter2
    )
)
```

<span data-ttu-id="32948-125">Standardmäßig enthält der Bereich alle Unternehmen der aktuellen Anwendung.</span><span class="sxs-lookup"><span data-stu-id="32948-125">By default, the scope includes all companies of the current application.</span></span> <span data-ttu-id="32948-126">Allerdings kann er beschränkt werden.</span><span class="sxs-lookup"><span data-stu-id="32948-126">However, it can be restricted.</span></span> <span data-ttu-id="32948-127">Um den Umfang des unternehmensübergreifenden Datenzugriffs für ein einziges ER-Format einzuschränken, weisen Sie dem Format eine bestimmte Organisationshierarchie zu.</span><span class="sxs-lookup"><span data-stu-id="32948-127">To restrict the scope of cross-company data access for a single ER format, assign a specific organization hierarchy to the format.</span></span> <span data-ttu-id="32948-128">Bei der Definition einer Hierarchie für ein ER-Format werden nur Datensätze für juristische Personen zurückgegeben, die in der zugewiesenen Hierarchie dargestellt werden, obwohl das Format unternehmensübergreifende Datenquellen aufruft.</span><span class="sxs-lookup"><span data-stu-id="32948-128">When a hierarchy is defined for an ER format, only records for legal entities that are presented in the assigned hierarchy are returned, even though the format calls cross-company data sources.</span></span> <span data-ttu-id="32948-129">Wenn für ein ER-Format eine Referenz auf eine nicht mehr existierende Hierarchie definiert wird, wird der Standardbereich verwendet und das Format ruft unternehmensübergreifende Datenquellen auf.</span><span class="sxs-lookup"><span data-stu-id="32948-129">When a reference to a hierarchy that no longer exists is defined for an ER format, the default scope is applied, and the format calls cross-company data sources.</span></span> <span data-ttu-id="32948-130">In diesem Fall werden alle Datensätze für Anwendungsunternehmen zurückgegeben.</span><span class="sxs-lookup"><span data-stu-id="32948-130">In this situation, records for all application companies are returned.</span></span>

<span data-ttu-id="32948-131">Beachten Sie, dass, wenn die Option **Entwurf verwenden** für die Zuordnung zu einer einzelnen ER-Format-Organisationshierarchie aktiviert ist, die juristischen Personen aus der Entwurfsversion dieser Hierarchie verwendet werden, um den Bereich für unternehmensübergreifende Datenquellen zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="32948-131">Note that when the **Use draft** option is turned on for the assigned to a single ER format organization hierarchy, the legal entities from the draft version of this hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="32948-132">Existiert der Entwurf nicht, werden die juristischen Personen aus der letzten veröffentlichten Version dieser Organisationshierarchie verwendet.</span><span class="sxs-lookup"><span data-stu-id="32948-132">If the draft version does not exist, the legal entities from the last published version of this organization hierarchy will be used for this.</span></span>

<span data-ttu-id="32948-133">Beachten Sie, dass, wenn die Option **Entwurf verwenden** für die Zuordnung zu einer einzelnen ER-Format-Organisationshierarchie deaktiviert ist, die juristischen Personen aus der letzten Entwurfsversion dieser Organisationshierarchie verwendet werden, um den Bereich für unternehmensübergreifende Datenquellen zu identifizieren.</span><span class="sxs-lookup"><span data-stu-id="32948-133">Note that when the **Use draft** option is turned off for the assigned to a single ER format organization hierarchy, the legal entities from the last published version of this organization hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="32948-134">Datumseffektivität von Organisationshierarchien wird im ER-Framework noch nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="32948-134">Date effectiveness of organization hierarchies is not supported yet in the ER framework.</span></span>

<span data-ttu-id="32948-135">Die Hierarchie kann einem Format in einer bestimmten Seite zugeordnet werden, das über den ER-Arbeitsbereich oder über den Menüpunkt **Organisationsverwaltung** \>Elektronische Berichterstellung\> Formatfilter der juristischen Person erreichbar ist.</span><span class="sxs-lookup"><span data-stu-id="32948-135">The hierarchy can be assigned to a format in a specific page that can be accessed from the ER workspace or by using the **Organization administration \> Electronic reporting \> Legal entity filter for formats** menu item.</span></span> <span data-ttu-id="32948-136">Um auf die Seite zuzugreifen, muss einem Benutzer das Recht **Formatfilter der juristischen Person pflegen** (ERMaintainFormatMappingLegalEntityFilters) gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="32948-136">To access the page, the **Maintain legal entity filters for format** privilege (ERMaintainFormatMappingLegalEntityFilters) must be granted to a user.</span></span> <span data-ttu-id="32948-137">Zusätzlich zu der Einschränkung, die der Benutzer im Dialogfenster der Systemabfrage manuell festlegen kann, wird die Bereichseinschränkung von hierarchisch strukturierten juristischen Personen für das Format angewendet.</span><span class="sxs-lookup"><span data-stu-id="32948-137">The scope restriction of hierarchy-based legal entities for the format is applied in addition to the restriction that the user can manually specify in the system query dialog box.</span></span> <span data-ttu-id="32948-138">Die Schnittmenge dieser Einschränkungen wird bei der Ausführung des Formats verwendet.</span><span class="sxs-lookup"><span data-stu-id="32948-138">The intersection of these restrictions is used when the format is run.</span></span>

<span data-ttu-id="32948-139">Um mehr über diese Funktion zu erfahren, spielen Sie den Aufgabenleitfaden **ER Zugriff auf Datensätze in unternehmensabhängigen Tabellenim unternehmensübergreifenden Modus**, der Teil des Geschäftsprozesses 7.5.4.3 IT-Dienstleistungs-/-Lösungskomponenten anschaffen/entwickeln (10677) ist und im [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684) heruntergeladen werden kann.</span><span class="sxs-lookup"><span data-stu-id="32948-139">To learn more about this feature, play the task guide, **ER Access records of company dependent tables in cross-company mode**, which is part of the 7.5.4.3 Acquire/Develop IT service/solution components (10677) business process, and can be downloaded from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span></span> <span data-ttu-id="32948-140">Dieser Aufgabenleitfaden führt Sie durch den Prozess der Konfiguration einer ER-Modellzuordnung und des ER-Formats für den Zugriff auf Anwendungstabellen im unternehmensübergreifenden Modus.</span><span class="sxs-lookup"><span data-stu-id="32948-140">This task guide walks you through the process of configuring an ER model mapping and ER format to access application tables in cross-company mode.</span></span>

<span data-ttu-id="32948-141">Laden Sie die folgenden Dateien herunter, um den Aufgabenleitfaden ausführen:</span><span class="sxs-lookup"><span data-stu-id="32948-141">Download the following files to complete the task guide:</span></span>

- [<span data-ttu-id="32948-142">ER-Datenmodellkonfiguration - CrossCompanyDataAccessModel.xml</span><span class="sxs-lookup"><span data-stu-id="32948-142">ER model configuration - CrossCompanyDataAccessModel.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)
- [<span data-ttu-id="32948-143">ER-Formatkonfiguration - CrossCompanyDataAccessFormat.xml</span><span class="sxs-lookup"><span data-stu-id="32948-143">ER format configuration - CrossCompanyDataAccessFormat.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)
