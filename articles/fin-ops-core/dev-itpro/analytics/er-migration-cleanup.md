---
title: Bereinigung der EB-Migration
description: In diesem Thema wird erläutert, wie Sie die EB-Migrationsbereinigungsfunktion verwenden können, um Probleme mit EB-Vorlagen zu beheben.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace, ERParameters, ERMigrationCleanup
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: AX 8.0.0
ms.openlocfilehash: edb60f247b2bd6cc4ecd514e3e85bafbb681788d
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 12/05/2020
ms.locfileid: "4686367"
---
# <a name="er-migration-cleanup"></a><span data-ttu-id="367b3-103">Bereinigung der EB-Migration</span><span class="sxs-lookup"><span data-stu-id="367b3-103">ER migration cleanup</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="367b3-104">Wenn Sie Ihre Finance-Instanzen verwalten, können Sie entscheiden, Ihre aktuelle Instanz zu einem anderen Speicherort zu migrieren.</span><span class="sxs-lookup"><span data-stu-id="367b3-104">When you manage your Finance instances, you might decide to migrate your current instance to another location.</span></span> <span data-ttu-id="367b3-105">Sie können Ihre Produktionsinstanz beispielsweise zu einer neuen Sandboxumgebung migrieren.</span><span class="sxs-lookup"><span data-stu-id="367b3-105">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="367b3-106">Wenn Sie das Elektronische Berichterstellungs-(EB)-Framework konfigurieren, um Vorlagen im Microsoft Azure BLOB-Speicher zu speichern, verweist die **DocuValue**-Tabelle in der neuen Sandboxumgebung auf die BLOB-Speicherinstanz in der Produktionsumgebung.</span><span class="sxs-lookup"><span data-stu-id="367b3-106">If you configured the Electronic reporting (ER) framework to store templates in Microsoft Azure Blob storage, the **DocuValue** table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="367b3-107">Auf diese Instanz kann jedoch nicht über die Sandboxumgebung zugegriffen werden, da der Migrationsprozess die Migration von Artefakten im BLOB-Speicher nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="367b3-107">However, this instance can't be accessed from the sandbox environment because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="367b3-108">Es wird vielmehr erwartet, dass Sie in der neuen Sandbox-Umgebung auf die Instanz des BLOB-Speichers in der Sandbox-Umgebung verweisen, die noch keine EB-Vorlagen bezieht.</span><span class="sxs-lookup"><span data-stu-id="367b3-108">Rather, it's expected that in the new sandbox environment, you refer to the instance of Blob storage in the sandbox environment that does not yet obtain the ER templates.</span></span>

<span data-ttu-id="367b3-109">Wenn Sie versuchen, ein EB-Format auszuführen, das eine Vorlage zum Generieren von Geschäftsdokumenten verwendet, tritt eine Ausnahme auf, und Sie erhalten eine Benachrichtigung, dass die Vorlage fehlt.</span><span class="sxs-lookup"><span data-stu-id="367b3-109">If you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="367b3-110">Sie erhalten auch eine Anleitung dazu, wie Sie die EB-Migrationsbereinungsoption verwenden, um die EB-Formatkonfiguration, die die Vorlage enthält, zu löschen und dann erneut zu importieren.</span><span class="sxs-lookup"><span data-stu-id="367b3-110">You're also guided to use the ER migration cleanup option to delete and then re-import the ER format configuration that contains the template.</span></span>

<span data-ttu-id="367b3-111">[![Ausführen eines EB-Formats](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span><span class="sxs-lookup"><span data-stu-id="367b3-111">[![Running an ER format](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span></span>

<span data-ttu-id="367b3-112">Sie erhalten eine ähnliche Fehlermeldung, wenn Sie zur Seite **Konfigurationen** (**Organisationsverwaltung** \> **Elektronische Berichterstellung** \> **Konfigurationen**) navigieren und in der Konfigurationsstruktur versuchen, eine EB-Formatkonfiguration zu löschen, die eine Vorlage verwendet.</span><span class="sxs-lookup"><span data-stu-id="367b3-112">You will receive a similar error if you navigate to the **Configurations** page (**Organization administration** \> **Electronic reporting** \> **Configurations**) and in the configurations tree, try to delete an ER format configuration that uses a template.</span></span>

<span data-ttu-id="367b3-113">[![Löschen eines EB-Formats](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span><span class="sxs-lookup"><span data-stu-id="367b3-113">[![Deletion an ER format](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span></span>

<span data-ttu-id="367b3-114">Führen Sie die folgenden Schritte aus, um Probleme mit EB-Vorlagen zu beheben, auf die Sie nicht zugreifen können.</span><span class="sxs-lookup"><span data-stu-id="367b3-114">Complete the following steps to resolve issues with ER templates that you are unable to access.</span></span>

1.  <span data-ttu-id="367b3-115">Gehen Sie zur Seite **Organisationsverwaltung** \> **Periodisch** \> **Migrationsbereinigung**.</span><span class="sxs-lookup"><span data-stu-id="367b3-115">Go to **Organization administration** \> **Periodic** \> **Migration cleanup** page.</span></span>
2.  <span data-ttu-id="367b3-116">Wählen Sie eine EB-Formatkonfiguration aus, die nicht ausgeführt oder gelöscht werden kann.</span><span class="sxs-lookup"><span data-stu-id="367b3-116">Select an ER format configuration that can’t be executed or deleted.</span></span>
3.  <span data-ttu-id="367b3-117">Wählen Sei **Löschen**.</span><span class="sxs-lookup"><span data-stu-id="367b3-117">Select **Delete**.</span></span>
4.  <span data-ttu-id="367b3-118">Bestätigen Sie das Löschen der ausgewählten EB-Formatkonfiguration.</span><span class="sxs-lookup"><span data-stu-id="367b3-118">Confirm the deletion of the selected ER format configuration.</span></span>
5.  <span data-ttu-id="367b3-119">[Importieren](download-electronic-reporting-configuration-lcs.md) Sie die gelöschte EB-Formatkonfiguration zur aktuellen Finance-Instanz.</span><span class="sxs-lookup"><span data-stu-id="367b3-119">[Import](download-electronic-reporting-configuration-lcs.md) the deleted ER format configuration to the current Finance instance.</span></span>

## <a name="applicability"></a><span data-ttu-id="367b3-120">Anwendbarkeit</span><span class="sxs-lookup"><span data-stu-id="367b3-120">Applicability</span></span>

> <span data-ttu-id="367b3-121">[Wichtig] Die Option **Migrationsbereinigung** ist nur das Ziel für EB-Formatkonfigurationen, die nicht zugängliche EB-Vorlagen enthalten.</span><span class="sxs-lookup"><span data-stu-id="367b3-121">[Important] The **Migration cleanup** option is targeted only for ER format configurations that contain non-accessible ER templates.</span></span> <span data-ttu-id="367b3-122">Wenn Sie eine EB-Formatkonfiguration mithilfe der Option **Migrationsbereinigung** löschen, löscht EB die Vorlagen, die sich auf die Konfigurationsartefakte in der einzigen Anwendungsdatenbank beziehen.</span><span class="sxs-lookup"><span data-stu-id="367b3-122">When you delete an ER format configuration by using the **Migration cleanup** option, ER deletes the templates that are related to the configuration artifacts in the only application database.</span></span> <span data-ttu-id="367b3-123">Das Vorhandensein der entsprechenden physischen Dateien im Blob-Speicher wird nicht überprüft.</span><span class="sxs-lookup"><span data-stu-id="367b3-123">The existence of the appropriate physical files in Blob storage are not validated.</span></span> <span data-ttu-id="367b3-124">Stattdessen wird angenommen, dass es keine gibt.</span><span class="sxs-lookup"><span data-stu-id="367b3-124">Instead, it is assumed that there are none.</span></span> <span data-ttu-id="367b3-125">Verwenden Sie daher nicht die Option **Migrationsbereinigung** als Alternative zur EB-Konfigurationslöschungsoption auf der Seite **Konfigurationen**.</span><span class="sxs-lookup"><span data-stu-id="367b3-125">Therefore, do not use the **Migration cleanup** option as an alternative to the ER configuration deletion option on the **Configurations** page.</span></span> <span data-ttu-id="367b3-126">Verwenden Sie die Option **Migrationsbereinigung** nur, wenn die EB-Konfigurationslöschungsoption auf der Seite **Konfigurationen** fehlgeschlagen ist.</span><span class="sxs-lookup"><span data-stu-id="367b3-126">Use the **Migration cleanup** option only when the ER configuration deletion option on the **Configurations** page failed.</span></span>
>
> <span data-ttu-id="367b3-127">Wenn Sie die Option **Migrationsbereinigung** verwenden, um eine EB-Formatkonfiguration zu löschen, wenn die bevorzugte Vorlage im Blob-Speicher verfügbar ist, können Sie zur zugehörige Konfigurationsartefakte in der Anwendungsdatenbank löschen.</span><span class="sxs-lookup"><span data-stu-id="367b3-127">If you use the **Migration cleanup** option to delete an ER format configuration when the referred template is available in the Blob storage, you only delete related configuration artifacts in the application database.</span></span> <span data-ttu-id="367b3-128">Die physische Datei der Vorlage im Blob-Speicher bleibt erhalten.</span><span class="sxs-lookup"><span data-stu-id="367b3-128">The physical file of the template in the Blob storage remains.</span></span> <span data-ttu-id="367b3-129">Das Überschreiben von Dateien im Blob-Speicher ist nicht mehr zulässig.</span><span class="sxs-lookup"><span data-stu-id="367b3-129">File overwriting in Blob storage is no longer allowed.</span></span> <span data-ttu-id="367b3-130">Weitere Informationen finden Sie unter [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span><span class="sxs-lookup"><span data-stu-id="367b3-130">For more information, see [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span></span> <span data-ttu-id="367b3-131">Darüber hinaus können Sie die mithilfe der Migrationsbereinigung in dieser Umgebung gelöschten Konfigurationen nicht mehr erneut importieren.</span><span class="sxs-lookup"><span data-stu-id="367b3-131">Additionally, you will no longer be able to re-import the configurations deleted by using the Migration cleanup in this environment.</span></span> <span data-ttu-id="367b3-132">Um dieses Problem zu beheben, müssen Sie die entsprechende Datei im Blob-Speicher suchen und manuell löschen.</span><span class="sxs-lookup"><span data-stu-id="367b3-132">To resolve this issue, you need to find the corresponding file in Blob storage and manually delete it.</span></span>

<span data-ttu-id="367b3-133">[![Importieren eines EB-Formats](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span><span class="sxs-lookup"><span data-stu-id="367b3-133">[![Importing an ER format](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span></span>

<span data-ttu-id="367b3-134">Ein ähnliches Problem kann auftreten, wenn Sie Ihre Anwendungsinstanz an einen anderen Speicherort migrieren, der mehrmals als Migrationsziel verwendet wurde und für den der Blob-Speicher bereits EB-Vorlagendateien enthält.</span><span class="sxs-lookup"><span data-stu-id="367b3-134">A similar issue may occur if you migrate your application instance to another location that has been used as a migration target more than once and for which the Blob storage already contains ER template files.</span></span>

<span data-ttu-id="367b3-135">Dieser Vorgang kann zeitaufwändig sein, da Sie über mehrere EB-Formatkonfigurationen verfügen können.</span><span class="sxs-lookup"><span data-stu-id="367b3-135">Because you can have several ER format configurations, this process can be time consuming.</span></span> <span data-ttu-id="367b3-136">Daher ist die Verwendung der Funktion [Sicherungsspeicher von EB-Vorlagen](er-backup-storage-templates.md) zu bevorzugen, um Vorlagen mit fehlerhaften Verweisen automatisch wiederherzustellen.</span><span class="sxs-lookup"><span data-stu-id="367b3-136">Therefore, using the [Backup storage of ER templates](er-backup-storage-templates.md) feature to automatically recover templates with broken references is preferred.</span></span>
