---
title: Unternehmenskonzept in Dataverse
description: In diesem Thema wird die Integration von Unternehmensdaten zwischen Finance and Operations und Dataverse beschrieben.
author: RamaKrishnamoorthy
manager: AnnBe
ms.date: 08/04/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2019-07-15
ms.openlocfilehash: 2f0e3950f2b35dd8b8dbf50601b7d6b6d624863e
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 12/05/2020
ms.locfileid: "4683674"
---
# <a name="company-concept-in-dataverse"></a><span data-ttu-id="0d472-103">Unternehmenskonzept in Dataverse</span><span class="sxs-lookup"><span data-stu-id="0d472-103">Company concept in Dataverse</span></span>

[!include [banner](../../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]


<span data-ttu-id="0d472-104">In Finance and Operations ist das Konzept *Unternehmen* sowohl ein juristisches als auch ein unternehmerisches Konstrukt.</span><span class="sxs-lookup"><span data-stu-id="0d472-104">In Finance and Operations, the concept of a *company* is both a legal construct and a business construct.</span></span> <span data-ttu-id="0d472-105">Es ist außerdem ein Sicherheits- und Sichtbarkeitsgrenze für Daten.</span><span class="sxs-lookup"><span data-stu-id="0d472-105">It's also a security and visibility boundary for data.</span></span> <span data-ttu-id="0d472-106">Benutzer arbeiten immer im Kontext eines einzelnen Unternehmens, und die meisten Daten werden von dem Unternehmen gekennzeichnet.</span><span class="sxs-lookup"><span data-stu-id="0d472-106">Users always work in the context of a single company, and most of the data is striped by company.</span></span>

<span data-ttu-id="0d472-107">Dataverse hat kein entsprechendes Konzept.</span><span class="sxs-lookup"><span data-stu-id="0d472-107">Dataverse doesn't have an equivalent concept.</span></span> <span data-ttu-id="0d472-108">Das nächste Konzept ist *Unternehmenseinheit*, das in erster Linie eine Sicherheits- und Sichtbarkeitsgrenze für Benutzerdaten ist.</span><span class="sxs-lookup"><span data-stu-id="0d472-108">The closest concept is *business unit*, which is primarily a security and visibility boundary for user data.</span></span> <span data-ttu-id="0d472-109">Dieses Konzept besitzt nicht die gleichen rechten oder geschäftlichen Auswirkungen wie das Unternehmenskonzept.</span><span class="sxs-lookup"><span data-stu-id="0d472-109">This concept doesn't have the same legal or business implications as the company concept.</span></span>

<span data-ttu-id="0d472-110">Da Unternehmenseinheit und Unternehmen keine entsprechenden Konzepte sind, ist es nicht möglich, eine 1:1-Zuordnung zum Zwecke der Dataverse-Integration zu erzwingen.</span><span class="sxs-lookup"><span data-stu-id="0d472-110">Because business unit and company aren't equivalent concepts, it isn't possible to force a one-to-one (1:1) mapping between them for the purpose of Dataverse integration.</span></span> <span data-ttu-id="0d472-111">Da Benutzer aber standardmäßig in der Lage sein müssen, dieselben Zeilen in der Anwendung und in Dataverse anzuzeigen, hat Microsoft eine neue Entität in Dataverse mit dem Namen „cdm\_Company“ eingeführt.</span><span class="sxs-lookup"><span data-stu-id="0d472-111">However, because users must, by default, be able to see the same rows in the application and Dataverse, Microsoft has introduced a new entity in Dataverse that is named cdm\_Company.</span></span> <span data-ttu-id="0d472-112">Diese Entität entspricht der Unternehmensentität in der Anwendung.</span><span class="sxs-lookup"><span data-stu-id="0d472-112">This entity is equivalent to the Company entity in the application.</span></span> <span data-ttu-id="0d472-113">Um sicherzustellen, dass die Sichtbarkeit von Zeilen in der Anwendung und in Dataverse standardmäßig äquivalent ist, empfehlen wir die folgende Einstellung für Daten in Dataverse:</span><span class="sxs-lookup"><span data-stu-id="0d472-113">To help guarantee that visibility of rows is equivalent between the application and Dataverse out of the box, we recommend the following setup for data in Dataverse:</span></span>

+ <span data-ttu-id="0d472-114">Für jede Unternehmensdatenszeile in Finance and Operations, für die duales Schreiben aktiviert ist, wird eine zugehörige cdm\_Company-Zeile erstellt.</span><span class="sxs-lookup"><span data-stu-id="0d472-114">For each Finance and Operations Company row that is enabled for dual-write, an associated cdm\_Company row is created.</span></span>
+ <span data-ttu-id="0d472-115">Wenn eine cdm\_Company-Zeile erstellt und für duales Schreiben aktiviert wird, wird eine Standardunternehmenseinheit mit demselben Namen erstellt.</span><span class="sxs-lookup"><span data-stu-id="0d472-115">When a cdm\_Company row is created and enabled for dual-write, a default business unit is created that has the same name.</span></span> <span data-ttu-id="0d472-116">Es wird zwar automatisch ein Standardteam für diese Geschäftseinheit erstellt, die Geschäftseinheit wird aber nicht verwendet.</span><span class="sxs-lookup"><span data-stu-id="0d472-116">Although a default team is automatically created for that business unit, the business unit isn't used.</span></span>
+ <span data-ttu-id="0d472-117">Ein separates Eigentümerteam wird erstellt, das denselben Namen hat.</span><span class="sxs-lookup"><span data-stu-id="0d472-117">A separate owner team is created that has the same name.</span></span> <span data-ttu-id="0d472-118">Es wird ebenfalls der Geschäftseinheit zugeordnet.</span><span class="sxs-lookup"><span data-stu-id="0d472-118">It's also associated with the business unit.</span></span>
+ <span data-ttu-id="0d472-119">Standardmäßig wird der Eigentümer einer beliebigen Zeile, die erstellt und in Dataverse dual geschrieben wird, auf das Team „DW-Eigentümer“ festgelegt, das mit der zugehörigen Unternehmenseinheit verknüpft ist.</span><span class="sxs-lookup"><span data-stu-id="0d472-119">By default, the owner of any row that is created and dual-written to Dataverse is set to the "DW Owner" team that is linked to the associated business unit.</span></span>

<span data-ttu-id="0d472-120">Die folgende Abbildung zeigt ein Beispiel für diese Dateneinreichtung in Dataverse.</span><span class="sxs-lookup"><span data-stu-id="0d472-120">The following illustration shows an example of this data setup in Dataverse.</span></span>

![Dateneinrichtung in Dataverse](media/dual-write-company-1.png)

<span data-ttu-id="0d472-122">Aufgrund dieser Konfiguration ist jede Zeile, due mit dem USMF-Unternehmen verknüpft ist, im Besitz eines Teams, das mit der USFM-Unternehmenseinheit in Dataverse verknüpft ist.</span><span class="sxs-lookup"><span data-stu-id="0d472-122">Because of this configuration, any row that is related to the USMF company will be owned by a team that is linked to the USMF business unit in Dataverse.</span></span> <span data-ttu-id="0d472-123">Daher kann jeder Benutzer, der über eine Sicherheitsrolle Zugriff auf diese Unternehmenseinheit hat, die auf Sichtbarkeit auf Unternehmenseinheitsebene festgelegt ist, diese Zeilen nun anzeigen.</span><span class="sxs-lookup"><span data-stu-id="0d472-123">Therefore, any user who has access to that business unit through a security role that is set to business unit–level visibility can now see those rows.</span></span> <span data-ttu-id="0d472-124">Das folgende Beispiel veranschaulicht, wie Teams verwendet werden können, um den richtigen Zugang zu diesen Zeilen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="0d472-124">The following example shows how teams can be used to provide the correct access to those rows.</span></span>

+ <span data-ttu-id="0d472-125">Die Rolle „Vertriebsmanager“ ist Mitgliedern des Teams „USMF-Vertrieb“ zugewiesen.</span><span class="sxs-lookup"><span data-stu-id="0d472-125">The "Sales Manager" role is assigned to members of the "USMF Sales" team.</span></span>
+ <span data-ttu-id="0d472-126">Benutzer mit der Rolle „Vertriebsmanager“ können auf beliebige Kontozeilen zugreifen, die Mitglieder derselben Unternehmenseinheit wie sie sind.</span><span class="sxs-lookup"><span data-stu-id="0d472-126">Users who have the "Sales Manager" role can access any account rows that are members of the same business unit that they are members of.</span></span>
+ <span data-ttu-id="0d472-127">Das Team „USMF-Vertrieb“ wird mit der zuvor erwähnten USMF-Geschäftseinheit verknüpft.</span><span class="sxs-lookup"><span data-stu-id="0d472-127">The "USMF Sales" team is linked to the USMF business unit that was mentioned earlier.</span></span>
+ <span data-ttu-id="0d472-128">Daher können Mitglieder des Teams „USMF-Vertrieb“ ein beliebiges Konto sehen, das im Besitz des Benutzers „USMF DW“ ist, der von der USMF-Unternehmenseinheit in Finance and Operations stammt.</span><span class="sxs-lookup"><span data-stu-id="0d472-128">Therefore, members of the "USMF Sales" team can see any account that is owned by the "USMF DW" user, which would have come from the USMF Company entity in Finance and Operations.</span></span>

![Wie Teams verwendet werden können](media/dual-write-company-2.png)

<span data-ttu-id="0d472-130">Wie in der vorherigen Abbildung dargestellt, ist diese 1:1-Zuordnung zwischen Geschäftseinheit, Unternehmen und Team nur ein Anfangspunkt.</span><span class="sxs-lookup"><span data-stu-id="0d472-130">As the preceding illustration shows, this 1:1 mapping between business unit, company, and team is just a starting point.</span></span> <span data-ttu-id="0d472-131">In diesem Beispiel wird eine neue Geschäftseinheit „Europa“ manuell in Dataverse als übergeordnetes Element für DEMF und ESMF erstellt.</span><span class="sxs-lookup"><span data-stu-id="0d472-131">In this example, a new "Europe" business unit is manually created in Dataverse as the parent for both DEMF and ESMF.</span></span> <span data-ttu-id="0d472-132">Diese neue Stammgeschäftseinheit ist nicht mit dem dualen Schreiben verknüpft.</span><span class="sxs-lookup"><span data-stu-id="0d472-132">This new root business unit is unrelated to dual-write.</span></span> <span data-ttu-id="0d472-133">Sie kann allerdings verwendet werden, um Mitgliedern des Teams „EUR-Vertrieb“ Zugriff auf Kontodaten sowohl in DEMF als auch in ESMF zu gewähren, indem die Datensichtbarkeit in der zugehörigen Sicherheitsrolle auf **Übergeordnete/untergeordnete Geschäftseinheit** festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="0d472-133">However, it can be used to give members of the "EUR Sales" team access to account data in both DEMF and ESMF by setting the data visibility to **Parent/Child BU** in the associated security role.</span></span>

<span data-ttu-id="0d472-134">Ein abschließendes Thema ist, wie durch das duale Schreiben bestimmt wird, welchem Eigentümerteam Zeilen zugewiesen werden sollen.</span><span class="sxs-lookup"><span data-stu-id="0d472-134">A final topic to discuss is how dual-write determines which owner team it should assign rows to.</span></span> <span data-ttu-id="0d472-135">Dieses Verhalten wird vom Feld **Standardeigentümerteam** in der Zeile cdm\_Company gesteuert.</span><span class="sxs-lookup"><span data-stu-id="0d472-135">This behavior is controlled by the **Default owning team** field on the cdm\_Company row.</span></span> <span data-ttu-id="0d472-136">Wenn eine cdm\_Company-Zeile für duales Schreiben aktiviert ist, erstellt ein Plug-In automatisch die zugewiesene Unternehmenseinheit sowie das Eigentümerteam (wenn nicht bereits vorhanden) und legt das Feld **Standardeigentümerteam** fest.</span><span class="sxs-lookup"><span data-stu-id="0d472-136">When a cdm\_Company row is enabled for dual-write, a plug-in automatically creates the associated business unit and owner team (if it doesn't already exist), and sets the **Default owning team** field.</span></span> <span data-ttu-id="0d472-137">Der Administrator kann das Feld in einen anderen Wert ändern.</span><span class="sxs-lookup"><span data-stu-id="0d472-137">The admin can change this field to a different value.</span></span> <span data-ttu-id="0d472-138">Allerdings kann der Administrator das Feld nicht deaktivieren, sofern die Entität für duales Schreiben aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="0d472-138">However, the admin can't clear the field as long as the entity is enabled for dual-write.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="0d472-139">![Feld „Standardeigentümerteam“](media/dual-write-default-owning-team.jpg)</span><span class="sxs-lookup"><span data-stu-id="0d472-139">![Default owning team field](media/dual-write-default-owning-team.jpg)</span></span>

## <a name="company-striping-and-bootstrapping"></a><span data-ttu-id="0d472-140">Unternehmensstriping und Bootstrapping</span><span class="sxs-lookup"><span data-stu-id="0d472-140">Company striping and bootstrapping</span></span>

<span data-ttu-id="0d472-141">Die Dataverse-Integration bringt Unternehmensparität durch Verwendung eines Unternehmensbezeichners zum Kennzeichen von Daten.</span><span class="sxs-lookup"><span data-stu-id="0d472-141">Dataverse integration brings company parity by using a company identifier to stripe data.</span></span> <span data-ttu-id="0d472-142">Wie in der folgenden Abbildung dargestellt, werden alle unternehmensspezifischen Tabellen so erweitert, dass sie eine Viele-zu-Eins-Beziehung (N:1) mit der cdm\_Company-Entität haben.</span><span class="sxs-lookup"><span data-stu-id="0d472-142">As the following illustration shows, all company-specific tables are extended so that they have a many-to-one (N:1) relationship with the cdm\_Company entity.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="0d472-143">![N:1-Beziehung zwischen einer unternehmensspezifischen Entität und der cdm_Company-Entität](media/dual-write-bootstrapping.png)</span><span class="sxs-lookup"><span data-stu-id="0d472-143">![N:1 relationship between a company-specific entity and the cdm_Company entity](media/dual-write-bootstrapping.png)</span></span>

+ <span data-ttu-id="0d472-144">Für Zeilen wird der Wert schreibgeschützt, nachdem ein Unternehmen hinzugefügt und gespeichert wird.</span><span class="sxs-lookup"><span data-stu-id="0d472-144">For rows, after a company is added and saved, the value becomes read-only.</span></span> <span data-ttu-id="0d472-145">Daher sollten Benutzer sicherstellen, dass Sie das korrekte Unternehmen auswählen.</span><span class="sxs-lookup"><span data-stu-id="0d472-145">Therefore, users should make sure that they select the correct company.</span></span>
+ <span data-ttu-id="0d472-146">Nur Zeilen mit Unternehmensdaten kommen für duales Schreiben zwischen der Anwendung und Dataverse infrage.</span><span class="sxs-lookup"><span data-stu-id="0d472-146">Only rows that have company data are eligible for dual-write between the application and Dataverse.</span></span>
+ <span data-ttu-id="0d472-147">Für vorhandene Dataverse-Daten wird in Kürze eine vom Administrator geführte Bootstrapping-Erfahrung verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="0d472-147">For existing Dataverse data, an admin-led bootstrapping experience will soon be available.</span></span>


## <a name="autopopulate-company-name-in-customer-engagement-apps"></a><span data-ttu-id="0d472-148">Unternehmensname in Kundenbindungs-Apps automatisch ausfüllen</span><span class="sxs-lookup"><span data-stu-id="0d472-148">Autopopulate company name in customer engagement apps</span></span>

<span data-ttu-id="0d472-149">Es gibt verschiedene Möglichkeiten, den Unternehmensnamen in Kundenbindungs-Apps automatisch auszufüllen.</span><span class="sxs-lookup"><span data-stu-id="0d472-149">There are several ways to auto-populate the company name in customer engagement apps.</span></span>

+ <span data-ttu-id="0d472-150">Wenn Sie ein Systemadministrator sind, können Sie das Standardunternehmen festlegen, indem Sie zu **Erweiterte Einstellungen > System > Sicherheit > Benutzer** navigieren.</span><span class="sxs-lookup"><span data-stu-id="0d472-150">If you are a system administrator, you can set the default company by navigating to **Advanced Settings > System > Security > Users**.</span></span> <span data-ttu-id="0d472-151">Öffnen Sie das Formular **Benutzer**, und im Abschnitt **Organisationsinformationen** legen Sie den Wert **Unternehmen gemäß Standard auf Formularen** fest.</span><span class="sxs-lookup"><span data-stu-id="0d472-151">Open the **User** form, and in the **Organization Information** section, set the **Company to default on Forms** value.</span></span>

    :::image type="content" source="media/autopopulate-company-name-1.png" alt-text="Legen Sie im Abschnitt Organisationsinformationen das Standardunternehmen fest.":::

+ <span data-ttu-id="0d472-153">Wenn Sie **Schreib**-Zugriff auf die Entität **SystemUser** für die Ebene **Unternehmenseinheit** haben, können Sie das Standardunternehmen auf jedem beliebigen Formular ändern, indem Sie ein Unternehmen aus dem Dropdownmenü **Unternehmen** auswählen.</span><span class="sxs-lookup"><span data-stu-id="0d472-153">If you have **Write** access to the **SystemUser** entity for the **Business Unit** level, then you can change the default company on any form by selecting a company from the **Company** drop-down menu.</span></span>

    :::image type="content" source="media/autopopulate-company-name-2.png" alt-text="Ändern des Unternehmensnamens bei einem neuen Konto.":::

+ <span data-ttu-id="0d472-155">Wenn Sie **Schreibzugriff** auf Daten in mehr als einem Unternehmen haben, können Sie das Standardunternehmen ändern, indem Sie eine Zeile auswählen, die zu einem anderen Unternehmen gehört.</span><span class="sxs-lookup"><span data-stu-id="0d472-155">If you have **Write** access to data in more than one company, then you can change the default company by choosing a row that belongs to different company.</span></span>

    :::image type="content" source="media/autopopulate-company-name-3.png" alt-text="Durch Auswahl einer Zeile wird das Standardunternehmen geändert.":::

+ <span data-ttu-id="0d472-157">Wenn Sie ein Systemkonfigurator oder -Administrator sind und Unternehmensdaten automatisch in ein benutzerdefiniertes Formular einfügen möchten, können Sie [Formularereignisse](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids) verwenden.</span><span class="sxs-lookup"><span data-stu-id="0d472-157">If you are a system configurator or administrator, and you want to auto-populate company data on a custom form, then you can use [form events](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span></span> <span data-ttu-id="0d472-158">Fügen Sie einen JavaScript-Verweis auf **msdyn_/DefaultCompany.js** hinzu, und verwenden Sie die folgenden Ereignisse.</span><span class="sxs-lookup"><span data-stu-id="0d472-158">Add a JavaScript reference to **msdyn_/DefaultCompany.js** and use the following events.</span></span> <span data-ttu-id="0d472-159">Sie können jedes sofort einsatzbereite Formular verwenden, z. B. das **Konto**-Formular.</span><span class="sxs-lookup"><span data-stu-id="0d472-159">You can use any out-of-the-box form, for example, the **Account** form.</span></span>

    + <span data-ttu-id="0d472-160">**OnLoad**-Ereignis für das Formular: Legen Sie das Feld **defaultCompany** fest.</span><span class="sxs-lookup"><span data-stu-id="0d472-160">**OnLoad** event for the form: Set the **defaultCompany** field.</span></span>
    + <span data-ttu-id="0d472-161">**OnChange**-Ereignis für das Feld **Unternehmen**: Legen Sie das Feld **updateDefaultCompany** fest.</span><span class="sxs-lookup"><span data-stu-id="0d472-161">**OnChange** event for the **Company** field: Set the **updateDefaultCompany** field.</span></span>

## <a name="apply-filtering-based-on-the-company-context"></a><span data-ttu-id="0d472-162">Wenden Sie die Filterung basierend auf dem Unternehmenskontext an</span><span class="sxs-lookup"><span data-stu-id="0d472-162">Apply filtering based on the company context</span></span>

<span data-ttu-id="0d472-163">Um die Filterung in Ihren benutzerdefinierten Formularen oder in benutzerdefinierten Suchfeldern, die den Standardformularen hinzugefügt wurden, basierend auf dem Unternehmenskontext anzuwenden, öffnen Sie das Formular, und verwenden Sie den Abschnitt **Filterung zugehöriger Datensätze**, um den Unternehmensfilter anzuwenden.</span><span class="sxs-lookup"><span data-stu-id="0d472-163">To apply filtering based on the company context on your custom forms or on custom lookup fields added to the standard forms, open the form and use the **Related Records Filtering** section to apply the company filter.</span></span> <span data-ttu-id="0d472-164">Sie müssen dies für jedes Suchfeld festlegen, das die Filterung basierend auf dem zugrunde liegenden Unternehmen für eine bestimmte Zeile erfordert.</span><span class="sxs-lookup"><span data-stu-id="0d472-164">You must set this for each lookup field that requires filtering based on the underlying company on a given row.</span></span> <span data-ttu-id="0d472-165">Die Einstellung wird für **Konto** in der folgenden Abbildung angezeigt.</span><span class="sxs-lookup"><span data-stu-id="0d472-165">The setting is shown for **Account** in the following illustration.</span></span>

:::image type="content" source="media/apply-company-context.png" alt-text="Unternehmenskontext anwenden":::

