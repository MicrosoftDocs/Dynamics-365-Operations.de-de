---
title: Übersicht Omni-Channel-Zahlungen
description: Dieses Thema bietet einen Überblick über die Omni-Kanalzahlungen in Dynamics 365 Commerce.
author: rubendel
manager: AnnBe
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 6ecfd518298021e08cf73934b450d175cf699a46
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 01/15/2021
ms.locfileid: "4985860"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="bf893-103">Übersicht Omni-Channel-Zahlungen</span><span class="sxs-lookup"><span data-stu-id="bf893-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="bf893-104">Dieses Thema bietet einen Überblick über die Omni-Kanalzahlungen in Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="bf893-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="bf893-105">Er umfasst eine umfangreiche Liste von unterstützten Szenarien, Informationen über Funktionalität und Problembehandlung und Beschreibungen einige typischer Probleme.</span><span class="sxs-lookup"><span data-stu-id="bf893-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="bf893-106">Schlüsselbegriffe</span><span class="sxs-lookup"><span data-stu-id="bf893-106">Key terms</span></span>

| <span data-ttu-id="bf893-107">Zeitdauer</span><span class="sxs-lookup"><span data-stu-id="bf893-107">Term</span></span> | <span data-ttu-id="bf893-108">Beschreibung</span><span class="sxs-lookup"><span data-stu-id="bf893-108">Description</span></span> |
|---|---|
| <span data-ttu-id="bf893-109">Token</span><span class="sxs-lookup"><span data-stu-id="bf893-109">Token</span></span> | <span data-ttu-id="bf893-110">Eine Zeichenfolge von Daten, die ein Zahlungsprozessor als Referenz bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="bf893-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="bf893-111">Tokens können Zahlungs-Kartennummern, Zahlungsautorisierungen oder früheren Zahlungserfassungen darstellen.</span><span class="sxs-lookup"><span data-stu-id="bf893-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="bf893-112">Token sind wichtig, da sie beitragen, sensible Daten vom Verkaufsstellen-System (POS) fernzuhalten.</span><span class="sxs-lookup"><span data-stu-id="bf893-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="bf893-113">Sie werden manchmal auch als *Referenzen* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="bf893-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="bf893-114">Kartentoken</span><span class="sxs-lookup"><span data-stu-id="bf893-114">Card token</span></span> | <span data-ttu-id="bf893-115">Ein Token, den ein Zahlungsprozessor zum Aufbewahren im POS-System angegeben hat.</span><span class="sxs-lookup"><span data-stu-id="bf893-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="bf893-116">Ein Kartentoken kann nur von dem Einzelhändler verwendet werden, der ihn erhält.</span><span class="sxs-lookup"><span data-stu-id="bf893-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="bf893-117">Kartentoken werden manchmal auch als *Kartenreferenzen* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="bf893-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="bf893-118">Autorisierungstoken (auth)</span><span class="sxs-lookup"><span data-stu-id="bf893-118">Authorization (auth) token</span></span> | <span data-ttu-id="bf893-119">Eine eindeutige Kennung, die ein Zahlungsvorgang als Antwort bereitstellt, die an ein POS-System übermittelt wird, nachdem das POS-System einen Autorisierungsantrag stellt.</span><span class="sxs-lookup"><span data-stu-id="bf893-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="bf893-120">Ein Autorisierungstoken kann später verwendet werden, wenn der Prozessor aufgerufen wird, um Aktivitäten wie Stornieren oder Stornieren der Autorisierung auszuführen.</span><span class="sxs-lookup"><span data-stu-id="bf893-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="bf893-121">Oftmals werden sie dazu verwendet, Fonds zu erfassen, wenn ein Auftrag erfüllt oder eine Trasaktion abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="bf893-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="bf893-122">Authorisierungstoken werden manchmal auch als *Authorisierungsreferenzen* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="bf893-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="bf893-123">Token erfassen</span><span class="sxs-lookup"><span data-stu-id="bf893-123">Capture token</span></span> | <span data-ttu-id="bf893-124">Eine Referenz, die ein Zahlungsprozessor einem POS-System bereitstellt, wenn eine Zahlung abgeschlossen oder aufgezeichnet wird.</span><span class="sxs-lookup"><span data-stu-id="bf893-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="bf893-125">Das Erfassungstoken kann dann verwendet werden, um auf die Zahlung in nachfolgenden Arbeitsgängen wie Rückerstattungsanforderungen zu erfassen.</span><span class="sxs-lookup"><span data-stu-id="bf893-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="bf893-126">Karte nicht vorhanden</span><span class="sxs-lookup"><span data-stu-id="bf893-126">Card not present</span></span> | <span data-ttu-id="bf893-127">Eine Bedingung, die sich auf eine Zahlungsbuchungen bezieht, wenn keine physische Karte vorhanden ist.</span><span class="sxs-lookup"><span data-stu-id="bf893-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="bf893-128">Beispielsweise können diese Transaktionen in E-Commerce- oder Callcenterszenarien auftreten.</span><span class="sxs-lookup"><span data-stu-id="bf893-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="bf893-129">Für diese Transaktionen werden die den Zahlungen zugeordneten Informationen manuell auf eine E-Commerce-Website, in einen Callcenterfluss oder im POS oder Zahlungsterminal eingegeben.</span><span class="sxs-lookup"><span data-stu-id="bf893-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="bf893-130">Karte vorhanden</span><span class="sxs-lookup"><span data-stu-id="bf893-130">Card present</span></span> | <span data-ttu-id="bf893-131">Eine Bedingung, die sich auf Zahlungstransaktionen bezieht, in denen eine physischen Karte auf einem Zahlungsterminal vorgewiesen und verwendet wird, der mit dem Microsoft Dynamics 365 POS-System verbunden ist.</span><span class="sxs-lookup"><span data-stu-id="bf893-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="bf893-132">Übersicht</span><span class="sxs-lookup"><span data-stu-id="bf893-132">Overview</span></span>

<span data-ttu-id="bf893-133">Im Allgemeinen beschreibt der Begriff *Omni-Kanal-Zahlungen* die Möglichkeit, einen Auftrag in einem Kanal zu erstellen und diesen in einem anderen Kanal zu erfüllen.</span><span class="sxs-lookup"><span data-stu-id="bf893-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="bf893-134">Der Schlüssel zur Omni-Kanal-Zahlungunterstützung behält Zahlungsdetails zusammen mit den Restbetrag der Auftragsdetails und verwendet dann jene Zahlungsdetails, wenn der Auftrag zurückgerufen oder in einem anderen Kanal verarbeitet wird.</span><span class="sxs-lookup"><span data-stu-id="bf893-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="bf893-135">Ein klassisches Beispiel ist das Szenarion „Einkauf online, Abholen im Geschäft“.</span><span class="sxs-lookup"><span data-stu-id="bf893-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="bf893-136">In diesem Szenario werden die Zahlungsdetails hinzugefügt, wenn der Auftrag online erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="bf893-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="bf893-137">Sie werden dann am POS erneut aufgerufen, um die Zahlungskarte des Debitors bei der Abholung zu belasten.</span><span class="sxs-lookup"><span data-stu-id="bf893-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="bf893-138">Alle Szenarien, die in diesem Thema beschrieben werden, können implementiert werden, wenn das Standardzahlungs-Software-Development Kit (SDK) verwendet wird, das mit Commerce bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="bf893-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="bf893-139">Die [Dynamics 365 Zahlungsverbindung für Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) stellt eine vordefinierte Implementierung jedes Szenarios zur Verfügung, das hier beschrieben wird.</span><span class="sxs-lookup"><span data-stu-id="bf893-139">The [Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="bf893-140">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="bf893-140">Prerequisites</span></span>

<span data-ttu-id="bf893-141">Alle Szenarien, die in diesem Thema beschrieben werden, benötigen einen Zahlungskonnektor, der Omni-Kanalzahlungen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="bf893-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="bf893-142">Der vordefinierte Adyen-Konnektor kann auch verwendet werden, weil er die Szenarien unterstützt, die über das Zahlungen SDK bereitgestellt werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="bf893-143">Weitere Informationen dazu, wie Zahlungskonnektoren implementiert werden und Informationen zu Retail SDK im Allgemeinen finden Sie unter [Retail für It Pros und Entwickler-Startseite.](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span><span class="sxs-lookup"><span data-stu-id="bf893-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="bf893-144">Unterstützten Versionen</span><span class="sxs-lookup"><span data-stu-id="bf893-144">Supported versions</span></span>

<span data-ttu-id="bf893-145">Die Omnikanal-Zahlungsfunktionen, die in diesem Thema beschrieben sind, wurden im Rahmen der Microsoft Dynamics 365 for Retail Version 8.1.3 freigegeben.</span><span class="sxs-lookup"><span data-stu-id="bf893-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="bf893-146">„Karte vorhanden“ und „Karte nicht vorhanden“ Verbindungen</span><span class="sxs-lookup"><span data-stu-id="bf893-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="bf893-147">Das Zahlungen-SDK basiert auf zwei Sätzen von Anwendungsprogrammierschnittstellen (APIs) für Zahlungen.</span><span class="sxs-lookup"><span data-stu-id="bf893-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="bf893-148">Das erste Set von APIs nennt man **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="bf893-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="bf893-149">Sie wird verwendet, um „Karte nicht vorhandene“ Zahlungskonnektoren zu implementieren, die in Callcentern und der Microsoft Dynamics e-Commerce-Plattform verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="bf893-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="bf893-150">Weitere Informationen zur **iPaymentProcessor** Schnittstelle finden Sie im [Implementieren Sie einen Zahlungskonnektor und ein Zahlungsgerät](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) Whitepaper, das Zahlungen umfasst.</span><span class="sxs-lookup"><span data-stu-id="bf893-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="bf893-151">Das zweite Set von APIs nennt man **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="bf893-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="bf893-152">Er unterstützt die Implementierung von „Karte vorhandenen“ Zahlungsintegrationen, die als Zahlungsterminal verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="bf893-153">Weitere Informationen zur **iNamedRequestHandler**-Schnittstelle finden Sie unter [Erstellen Sie eine Zahlungsintegration für ein Zahlungsterminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span><span class="sxs-lookup"><span data-stu-id="bf893-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="bf893-154">Einrichtung und Konfiguration</span><span class="sxs-lookup"><span data-stu-id="bf893-154">Setup and configuration</span></span>

<span data-ttu-id="bf893-155">Die folgenden Komponenten und Einrichtungsschritte sind erforderlich:</span><span class="sxs-lookup"><span data-stu-id="bf893-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="bf893-156">**eCommerce Integration:** Eine Integration mit Commerce ist erforderlich, um Szenarien zu unterstützen, in denen ein Auftrag aus einem Online-Geschäft stammt.</span><span class="sxs-lookup"><span data-stu-id="bf893-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="bf893-157">Weitere Informationen zu Retail-E-Commerce SDK finden Sie unter [E-Commerce-Plattform-Software Development Kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span><span class="sxs-lookup"><span data-stu-id="bf893-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="bf893-158">In einer Vorführungsumgebung unterstützt das Bezugsschaufenster das Omnikanal-Zahlungsszenarien.</span><span class="sxs-lookup"><span data-stu-id="bf893-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="bf893-159">**Online-Zahlungskonfiguration:** Die Einstellung des Online-Kanals muss einen Zahlungskonnektor enthalten, der aktualisiert wurde, um Omnikanalzahlungen zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="bf893-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="bf893-160">Alternativ kann der vordefinierten Zahlungskonnektor verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="bf893-161">Informationen darüber, wie der für Adyen-Zahlungskonnektor für Onlineshops konfiguriert wird, finden Sie unter. [Adyen-Zahlungskonnektor](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce)</span><span class="sxs-lookup"><span data-stu-id="bf893-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="bf893-162">Zusätzlich zum Einrichtungsschritt für eCommerce, der in diesem Thema beschrieben sind, muss der Parameter **Speichern von Zahlungsinformationen in eCommerce zulassen** auf **Wahr** in den Einstellungen für den Adyen-Konnektor festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="bf893-163">**Omnikanal-Zahlungskonfiguration:** Im Back Office gehen Sie zu **Einzelhandel und Handel \> Headquarters Einstellung \> Parameter \> Freigegebene Commerce-Parameter**.</span><span class="sxs-lookup"><span data-stu-id="bf893-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="bf893-164">Legen Sie anschließend auf der Registerkarte **Omnikanal-Zahlungen** die Option **Omnikanal-Zahlungen verwenden** auf **Ja** fest.</span><span class="sxs-lookup"><span data-stu-id="bf893-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="bf893-165">Ab der Commerce-Version 10.0.12 befindet sich diese Einstellung im Arbeitsbereich **Funktionsverwaltung**.</span><span class="sxs-lookup"><span data-stu-id="bf893-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="bf893-166">Wählen Sie die Funktion **Omnikanal-Zahlungen** und klicken Sie auf **Jetzt aktivieren**.</span><span class="sxs-lookup"><span data-stu-id="bf893-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="bf893-167">**Zahlungsdienstleistungen:** Das Callcenter verwendet den Standardzahlungskonnektor auf der Seite **Zahlungsdienste** um Zahlungen zu verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="bf893-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="bf893-168">Um Szenarien wie „Einkauf im Callcenter, Abholung im Shop“ zu unterstützen, muss dieser Standardzahlungskonnektor der Adyen-Zahlungskonnektor oder ein Zahlungskonnektor sein, der die Implementierungsbedingungen für Omnikanal-Zahlungen erfüllt.</span><span class="sxs-lookup"><span data-stu-id="bf893-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="bf893-169">**Überweisungs-Dienstleistungen:** Zahlungen über einen Zahlungsterminal müssen im Inforegsiter **Elektronische Überweisung** des Hardwareprofils eingerichtet werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="bf893-170">Der Adyen-Konnektor unterstützt Omnikanal-Zahlungs-Szenariostandards.</span><span class="sxs-lookup"><span data-stu-id="bf893-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="bf893-171">Andere Zahlungskonnektoren, die die Schnittstelle **iNamedRequestHandler** unterstützen, können auch verwendet werden, wenn sie Omnikanal-Zahlungen unterstützen.</span><span class="sxs-lookup"><span data-stu-id="bf893-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="bf893-172">**Zahlungskonnektorverfügbarkeit:** Wenn ein Auftrag erneut aufgerufen wird, enthalten die Zahlungsmittelpositionen, die zusammen mit dem Auftrag aufgerufen werden, den Namen des Zahlungskonnektors, der verwendet wurde, um die Autorisierungen zu erstellen, die diesem Auftrag zugeordnet sind.</span><span class="sxs-lookup"><span data-stu-id="bf893-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="bf893-173">Wenn der Auftrag abgeschlossen ist, versucht das SDK Zahlungen, den gleichen Konnektor zu verwenden, der verwendet wurde, um die ursprüngliche Autorisierung zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="bf893-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="bf893-174">Daher muss ein Zahlungskonnektor, der dieselben Handelseigenschaften hat, zur ERfassung verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="bf893-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="bf893-175">**Kartentypen:** Damit Omnikanal-Szenarien einwandfrei funktionieren, muss jeder Kanal die gleiche Einstellung für Zahlungsmitteltypen haben, die für Omnikanal verwendet werden können.</span><span class="sxs-lookup"><span data-stu-id="bf893-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="bf893-176">Diese Einstellung beinhaltet Zahlungsmethoden-Kennungen und Kartentyp-Kennungen.</span><span class="sxs-lookup"><span data-stu-id="bf893-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="bf893-177">Wenn beispielsweise der Zahlungsmitteltyp **Karten** eine Kennung **2** in der Onlineshopeinstellung hat, sollten sie dieselbe Kennung in der Ladengeschäftseinstellung haben.</span><span class="sxs-lookup"><span data-stu-id="bf893-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="bf893-178">Dieselbe Anforderung gilt für Kartentyp-Kennungen.</span><span class="sxs-lookup"><span data-stu-id="bf893-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="bf893-179">Wenn die Kartennummer **12** auf **VISUM** im Onlineshop festgelegt wurde, muss dieselbe Kennung für den Retail Shop eingerichtet werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="bf893-180">Retail Modern POS für Windows oder Android mit einer integrierten Hardwarestation oder</span><span class="sxs-lookup"><span data-stu-id="bf893-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="bf893-181">Modern POS für iOS oder Cloud POS mit verbundener gemeinsam genutzter Hardwarestation.</span><span class="sxs-lookup"><span data-stu-id="bf893-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="bf893-182">Grundlegende Prinzipien, die Omnikanal-Zahlungen unterstützen</span><span class="sxs-lookup"><span data-stu-id="bf893-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="bf893-183">Zahlungskonnektoren und Zahlungsverarbeitungsstellen verwenden Token oder Referenzen, um auf Interaktionen zu verweisen, die den Kartenzahlungen zugeordnet werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="bf893-184">Wenn beispielsweise eine Zahlungsautorisierung angefordert wird, wird eine Referenz zu dieser Autorisierung bereitgestellt.</span><span class="sxs-lookup"><span data-stu-id="bf893-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="bf893-185">Daher kann später auf die Autorisierung verwiesen werden, wenn Mitteln zum Zeitpunkt der Erfüllung erfasst werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="bf893-186">Diese Autorisierung ist für den Einzelhändler, den Zahlungskonnektor und den Prozessor eindeutig.</span><span class="sxs-lookup"><span data-stu-id="bf893-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="bf893-187">Wenn ein Auftrag, der online erstellt wurde, im Shop abgeholt wird, müssen dieselben Zahlungsdetails für diesen Auftrag erneut aufgerufen und verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="bf893-188">Wenn die Originaldetails als Teil der Anforderung, eine Zahlung durch die ursprüngliche Autorisierung aufzuzeichnen, bereitgestellt werden, ist der Zahlungsprozessor in der Lage, die Anforderung zu bearbeiten und die Zahlung zu erfassen.</span><span class="sxs-lookup"><span data-stu-id="bf893-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="bf893-189">Um auf die Onlinebestellung korrekt zu verweisen, muss ein Zahlungskonnektor „Karte nicht vorhanden“, der denselben Prozessor unterstützt, auch verfügbar sein.</span><span class="sxs-lookup"><span data-stu-id="bf893-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="bf893-190">Auf diese Weise kann das POS-System einen Prozessor für Zahlungen „Karte vorhanden“ haben, aber er kann auch auf andere Zahlungsahlungskonnektoren zugreifen, damit er Aufträge erfüllen kann, die in anderen Kanälen erstellt werden, indem verschiedene Zahlungsverarbeitungsstellen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="bf893-191">Unterstützte Szenarien</span><span class="sxs-lookup"><span data-stu-id="bf893-191">Supported scenarios</span></span>

<span data-ttu-id="bf893-192">Die folgenden Omnikanal-Zahlungsszenarien werden unterstützt:</span><span class="sxs-lookup"><span data-stu-id="bf893-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="bf893-193">Online kaufen und im Shop abholen</span><span class="sxs-lookup"><span data-stu-id="bf893-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="bf893-194">Im Callcenter kaufen und In einem Shop abholen</span><span class="sxs-lookup"><span data-stu-id="bf893-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="bf893-195">Im Callcenter kaufen und Im Shop B abholen</span><span class="sxs-lookup"><span data-stu-id="bf893-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="bf893-196">Im Shop A kaufen und an den Debitor versenden</span><span class="sxs-lookup"><span data-stu-id="bf893-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="bf893-197">Im Callcenter getätigte Zahlungen, die der Zahlungsfunktion „Normal“ zugeordnet sind, müssen als **Vorab bezahlen** = **Ja** gekennzeichnet sein, um in dem fälligen Betrag berücksichtigt zu werden, wenn die Bestellung am POS zurückgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="bf893-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="bf893-198">Nicht im Voraus bezahlte Zahlungen vom Typ „Normal“ werden nicht erfasst, wenn die Bestellung am POS zurückgerufen wird.</span><span class="sxs-lookup"><span data-stu-id="bf893-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="bf893-199">Abweichungen dieser Szenarien werden ebenfalls unterstützt.</span><span class="sxs-lookup"><span data-stu-id="bf893-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="bf893-200">So kann eine Onlinebestellung beide Positionen umfassen nämlich jene, die an den Debitor versendet wird und jene, die im Shop abgeholt wird.</span><span class="sxs-lookup"><span data-stu-id="bf893-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="bf893-201">Alle Auftragserfüllungsoptionen werden über Omnikanal-Zahlungen unterstützt.</span><span class="sxs-lookup"><span data-stu-id="bf893-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="bf893-202">In den folgenden Abschnitten werden die Schritte für jedes Szenario beschrieben und es wird aufgezeigt, wie die Szenarien mithilfe von Demodaten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="bf893-203">Online kaufen und im Shop abholen</span><span class="sxs-lookup"><span data-stu-id="bf893-203">Buy online, pick up in store</span></span>

<span data-ttu-id="bf893-204">Bevor Sie starten, stellen Sie sicher, dass die folgenden Voraussetzungen erfüllt sind:</span><span class="sxs-lookup"><span data-stu-id="bf893-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="bf893-205">Sie haben ein Bezugsschaufenster, in dem der Adyen-Konnektor konfiguriert wird.</span><span class="sxs-lookup"><span data-stu-id="bf893-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="bf893-206">Die Option **Omnikanal-Zahlungen** auf der Seite **Freigegebene Commerce Parameter** wird auf **Wahr** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="bf893-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="bf893-207">In späteren Versionen ist diese Einstellung in den Arbeitsbereich **Funktionsverwaltung** verschoben, wo Sie die Funktion **Omnikanal-Zahlungen** auswählen und auf **Jetzt aktivieren** klicken können.</span><span class="sxs-lookup"><span data-stu-id="bf893-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="bf893-208">Der Adyen-Zahlungskonnektor wird für das Houston-POS-Register konfiguriert.</span><span class="sxs-lookup"><span data-stu-id="bf893-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="bf893-209">Retail Modern POS für Windows oder Android mit einer integrierten Hardwarestation oder</span><span class="sxs-lookup"><span data-stu-id="bf893-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="bf893-210">Modern POS für iOS oder Cloud POS mit verbundener gemeinsam genutzter Hardwarestation.</span><span class="sxs-lookup"><span data-stu-id="bf893-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="bf893-211">Um das Szenario auszuführen, führen Sie folgende Schritte aus:</span><span class="sxs-lookup"><span data-stu-id="bf893-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="bf893-212">Im Bezugsschaufenster erstellen Sie einen Auftrag für eine Abholung im Shop.</span><span class="sxs-lookup"><span data-stu-id="bf893-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="bf893-213">Achten Sie darauf, das Sie den Shop **Houston** auswählen.</span><span class="sxs-lookup"><span data-stu-id="bf893-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="bf893-214">Führen Sie die Zahlungsschritte aus und bezahlen Sie, indem Sie eine Testkreditkartennummer verwenden.</span><span class="sxs-lookup"><span data-stu-id="bf893-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="bf893-215">Sie können finden Testkreditkartennummern auf der [Adyen-Test-Kartennummerseite](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span><span class="sxs-lookup"><span data-stu-id="bf893-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="bf893-216">In Commerce verwenden Sie den Stapelverarbeitungsauftrag **Aufträge synchronisieren** und den **P-001** Verteilungszeitplan, um die Aufträge im Back Office zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="bf893-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="bf893-217">Im POS auf der Willkommensseite wählen Sie den Vorgang **Aufträge zur Abholung** aus, um die Aufträge zur Abholung im Shop anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="bf893-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="bf893-218">Wählen Sie eine oder mehrere Zeilen aus dem Auftrag auf, der im Bezugsschaufenster erstellt wurde, und wählen Sie dann **Abholen**.</span><span class="sxs-lookup"><span data-stu-id="bf893-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="bf893-219">Der Auftrag wird im Back Office abgerufen.</span><span class="sxs-lookup"><span data-stu-id="bf893-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="bf893-220">Wenn die Auftragspositionsdetails im Back Office abgerufen werden und eine Kartenzahlung, die für Omnikanal verwendet werden kann erkannt wurde, Sie darüber informieren, dass eine Zahlungsmethode verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="bf893-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="bf893-221">Wählen Sie **Verfügbare Zahlungsmethode**, um die Buchung ausführen, indem die Kartendetails verwenden, die in das Bezugsschaufenster eingegeben wurden.</span><span class="sxs-lookup"><span data-stu-id="bf893-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="bf893-222">Die Auftragspositionen werden auf der Transaktionsseite geladen und der fällige Saldo ist 0 (null).</span><span class="sxs-lookup"><span data-stu-id="bf893-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="bf893-223">Wählen Sie die Registerkarte **Zahlungen** aus, um die Positionsbeträge anzuzeigen, die aus der Onlinebestellung gezogen wurden.</span><span class="sxs-lookup"><span data-stu-id="bf893-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="bf893-224">Wählen Sie eine beliebige Zahlungsmethode aus, um die Transaktion abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="bf893-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="bf893-225">Im Callcenter kaufen und In einem Shop abholen</span><span class="sxs-lookup"><span data-stu-id="bf893-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="bf893-226">In Commerce auf der Seite **Kundendienst** geben Sie **Karen-Berg** in der Suchenleiste ein, und wählen Sie dann **Suchen**.</span><span class="sxs-lookup"><span data-stu-id="bf893-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="bf893-227">Wählen Sie **Karen-Berg** in den Suchergebnisse aus.</span><span class="sxs-lookup"><span data-stu-id="bf893-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="bf893-228">Nachdem Karen auf der Seite **Kundendienst** geladen ist, wählen Sie **Neuer Auftrag** aus.</span><span class="sxs-lookup"><span data-stu-id="bf893-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="bf893-229">Wählen Sie auf der Seite „Neuer Auftrag“ die **Kopfzeile**, um den Bestellkopf anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="bf893-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="bf893-230">Auf der Seite **Auftragskopf** können Sie den Standort auf **Zentral** und den Lagerort auf **Houston** festlegen.</span><span class="sxs-lookup"><span data-stu-id="bf893-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="bf893-231">Auf der Registerkarte **Liefern** muss das Datum im Feld **Lieferart** für Debitorenaufnahme auf **60** festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="bf893-232">Wählen Sie **Positionen** aus und fügen Sie anschließend eine oder mehrere Position im Auftrag hinzu.</span><span class="sxs-lookup"><span data-stu-id="bf893-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="bf893-233">Wählen Sie **Vollständig**, um den Auftragsabschlussfluss einzugeben.</span><span class="sxs-lookup"><span data-stu-id="bf893-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="bf893-234">Navigieren Sie nach unten zum Zahlungsabschnitt, wählen Sie **Hinzufügen** und wählen Sie dann eine Position aus, in der die Zahlungsmethode auf **Karten** festgelegt wird.</span><span class="sxs-lookup"><span data-stu-id="bf893-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="bf893-235">Wählen Sie das Pluszeichen (**+**) um eine Kartenzahlung hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="bf893-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="bf893-236">Hier können Sie die Details für eine Testkreditkartennummer eingeben, die Sie auf der [Adyen-Test-Kartennummerseite](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description) gefunden haben und dann wählen Sie **OK**.</span><span class="sxs-lookup"><span data-stu-id="bf893-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="bf893-237">Wenn die Kartenmarke für die Kartennummer, die Sie eingegeben haben, von der Marke abweicht, die ausgewählt wurde, als die Zahlung ausgelöst wurde, wird die Zahlung dennoch ausgeführt.</span><span class="sxs-lookup"><span data-stu-id="bf893-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="bf893-238">Allerdings wird sie auf die Konten gebucht, die der Kartenmarke zugeordnet werden, die Sie in Schritt 10 ausgewählt haben.</span><span class="sxs-lookup"><span data-stu-id="bf893-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="bf893-239">Wählen Sie **OK** aus, um das Dialogfeld **Auftragsabschlusszahlungen** zu schließen.</span><span class="sxs-lookup"><span data-stu-id="bf893-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="bf893-240">Wählen Sie auf der Seite **Auftragszusammenfassung** **Übermitteln** aus.</span><span class="sxs-lookup"><span data-stu-id="bf893-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="bf893-241">Im POS auf der Willkommensseite wählen Sie den Vorgang **Aufträge zur Abholung** aus, um die Aufträge zur Abholung im Shop anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="bf893-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="bf893-242">Wählen Sie eine oder mehrere Zeilen aus dem Auftrag auf, der im Bezugsschaufenster erstellt wurde, und wählen Sie dann **Abholen**.</span><span class="sxs-lookup"><span data-stu-id="bf893-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="bf893-243">Der Auftrag wird im Back Office abgerufen.</span><span class="sxs-lookup"><span data-stu-id="bf893-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="bf893-244">Wenn die Auftragspositionsdetails im Back Office abgerufen werden und eine Kartenzahlung, die für Omnikanal verwendet werden kann erkannt wurde, Sie darüber informieren, dass eine Zahlungsmethode verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="bf893-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="bf893-245">Wählen Sie **Verfügbare Zahlungsmethode**, um die Buchung ausführen, indem die Kartendetails verwenden, die in das Bezugsschaufenster eingegeben wurden.</span><span class="sxs-lookup"><span data-stu-id="bf893-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="bf893-246">Die Auftragspositionen werden auf der Transaktionsseite geladen und der fällige Saldo ist 0 (null).</span><span class="sxs-lookup"><span data-stu-id="bf893-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="bf893-247">Wählen Sie die Registerkarte **Zahlungen** aus, um die Positionsbeträge anzuzeigen, die aus der Onlinebestellung gezogen wurden.</span><span class="sxs-lookup"><span data-stu-id="bf893-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="bf893-248">Wählen Sie eine beliebige Zahlungsmethode aus, um die Transaktion abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="bf893-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="bf893-249">Im Callcenter kaufen und Im Shop B abholen</span><span class="sxs-lookup"><span data-stu-id="bf893-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="bf893-250">Starten Sie den POS für den Houston-Shop.</span><span class="sxs-lookup"><span data-stu-id="bf893-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="bf893-251">Auf der Seite **Transakltion** fügen Sie Karen Berg der Transaktion hinzu, indem Sie die Nummerauflage verwenden, um **2001** einzugeben.</span><span class="sxs-lookup"><span data-stu-id="bf893-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="bf893-252">Fügen Sie eine oder mehrere Zeilen der Transaktion hinzu.</span><span class="sxs-lookup"><span data-stu-id="bf893-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="bf893-253">Wählen Sie **Aufträge**, um die Auftragsoptionen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="bf893-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="bf893-254">Wählen Sie **Alle abholen** und dann aus, wenn Sie dazu aufgefordert werden, wählen Sie **Debitorenauftrag** aus.</span><span class="sxs-lookup"><span data-stu-id="bf893-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="bf893-255">In der Suchenleiste geben Sie **Seattle** ein und wählen anschließend den Shop **Seattle** für die Abholung aus.</span><span class="sxs-lookup"><span data-stu-id="bf893-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="bf893-256">Wählen Sie **OK**, um das aktuelle Datum als Datum der Abholung zu akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="bf893-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="bf893-257">Wählen Sie **Mit Karte bezahlen** aus, um die Zahlung auszulösen.</span><span class="sxs-lookup"><span data-stu-id="bf893-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="bf893-258">Zahlungsmittel Kartenzahlung für den Betrag, der für die Anzahlung fällig ist.</span><span class="sxs-lookup"><span data-stu-id="bf893-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="bf893-259">Beenden Sie die Einzahlung am Zahlungsterminal.</span><span class="sxs-lookup"><span data-stu-id="bf893-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="bf893-260">Nachdem die Summe bezahlt ist, wählen Sie die Option, die selbe Karte für Erfüllung nutzen und warten Sie, bis der Auftrag abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="bf893-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="bf893-261">Starten Sie den POS für den Seattle-Shop.</span><span class="sxs-lookup"><span data-stu-id="bf893-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="bf893-262">Im POS auf der Willkommensseite wählen Sie den Vorgang **Aufträge zur Abholung** aus, um die Aufträge zur Abholung im Shop anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="bf893-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="bf893-263">Wählen Sie eine oder mehrere Zeilen aus dem Auftrag auf, der im Bezugsschaufenster erstellt wurde, und wählen Sie dann **Abholen**.</span><span class="sxs-lookup"><span data-stu-id="bf893-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="bf893-264">Der Auftrag wird im Back Office abgerufen.</span><span class="sxs-lookup"><span data-stu-id="bf893-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="bf893-265">Wenn die Auftragspositionsdetails im Back Office abgerufen werden und eine Kartenzahlung, die für Omnikanal verwendet werden kann erkannt wurde, Sie darüber informieren, dass eine Zahlungsmethode verfügbar ist.</span><span class="sxs-lookup"><span data-stu-id="bf893-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="bf893-266">Wählen Sie **Verfügbare Zahlungsmethode**, um die Buchung ausführen, indem die Kartendetails verwenden, die in das Bezugsschaufenster eingegeben wurden.</span><span class="sxs-lookup"><span data-stu-id="bf893-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="bf893-267">Die Auftragspositionen werden auf der Transaktionsseite geladen und der fällige Saldo ist 0 (null).</span><span class="sxs-lookup"><span data-stu-id="bf893-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="bf893-268">Wählen Sie die Registerkarte **Zahlungen** aus, um die Positionsbeträge anzuzeigen, die aus der Onlinebestellung gezogen wurden.</span><span class="sxs-lookup"><span data-stu-id="bf893-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="bf893-269">Wählen Sie eine beliebige Zahlungsmethode aus, um die Transaktion abzuschließen.</span><span class="sxs-lookup"><span data-stu-id="bf893-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="bf893-270">Im Shop A kaufen und an den Debitor versenden</span><span class="sxs-lookup"><span data-stu-id="bf893-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="bf893-271">Starten Sie den POS für den Houston-Shop.</span><span class="sxs-lookup"><span data-stu-id="bf893-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="bf893-272">Auf der Seite **Transakltion** fügen Sie Karen Berg der Transaktion hinzu, indem Sie die Nummerauflage verwenden, um **2001** einzugeben.</span><span class="sxs-lookup"><span data-stu-id="bf893-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="bf893-273">Fügen Sie eine oder mehrere Zeilen der Transaktion hinzu.</span><span class="sxs-lookup"><span data-stu-id="bf893-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="bf893-274">Wählen Sie **Aufträge**, um die Auftragsoptionen anzuzeigen.</span><span class="sxs-lookup"><span data-stu-id="bf893-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="bf893-275">Wählen Sie **Alles versenden** und dann, wenn Sie dazu aufgefordert werden, wählen Sie **Debitorenauftrag** aus.</span><span class="sxs-lookup"><span data-stu-id="bf893-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="bf893-276">Wählen Sie auf der Seite Versandart die Option aus **Standard über Nacht** und dann **OK** aus, um das heutige Datum als Versanddatum zu akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="bf893-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="bf893-277">Wählen Sie **OK**, um das aktuelle Datum als Datum der Abholung zu akzeptieren.</span><span class="sxs-lookup"><span data-stu-id="bf893-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="bf893-278">Wählen Sie **Mit Karte bezahlen** aus, um die Zahlung auszulösen.</span><span class="sxs-lookup"><span data-stu-id="bf893-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="bf893-279">Zahlungsmittel Kartenzahlung für den Betrag, der für die Anzahlung fällig ist.</span><span class="sxs-lookup"><span data-stu-id="bf893-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="bf893-280">Beenden Sie die Einzahlung am Zahlungsterminal.</span><span class="sxs-lookup"><span data-stu-id="bf893-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="bf893-281">Nachdem die Summe bezahlt ist, wählen Sie die Option, die selbe Karte für Erfüllung nutzen und warten Sie, bis der Auftrag abgeschlossen ist.</span><span class="sxs-lookup"><span data-stu-id="bf893-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="bf893-282">Wenn der Auftrag im Back Office entnommen, verpackt und fakturiert wurde, werden die Zahlungsdetails, die am POS bereitgestellt werden verwendet, um die Ressourcen für die Waren zu erfassen, die an den Debitor gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="bf893-283">Szenariodetails</span><span class="sxs-lookup"><span data-stu-id="bf893-283">Scenario details</span></span>

<span data-ttu-id="bf893-284">Neben den grundlegenden Szenarien, die derzeit beschrieben wurden, wurden einige Erweiterungen für die SDK Zahlungen vorgenommen, um die Omnikanal-Zahlungen zu unterstützen.</span><span class="sxs-lookup"><span data-stu-id="bf893-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="bf893-285">POS</span><span class="sxs-lookup"><span data-stu-id="bf893-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="bf893-286">Einzelne Karte durch Lesegerät ziehen / Karte hineinstecken für Kundenufträge</span><span class="sxs-lookup"><span data-stu-id="bf893-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="bf893-287">Bevor die Omnikanal-Zahlungsfunktion implementiert wurde, mussten Debitorenbestellung, die Einzahlungen umfassten, am POS erstellt werden, Debitoren mussten ihre Karte zweimal durch das Lesegerät ziehen (oder hineinstecken), um die Anzahlung zu leisten und einmal, um die Karte zur nachträglichen Auftragserfüllung zu zerlegen.</span><span class="sxs-lookup"><span data-stu-id="bf893-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="bf893-288">Wenn die Omnikanal-Tokenisierungsfunktion aktiviert ist, müssen Debitoren ihre Karte nur einmal durch das Lesegerät ziehen, um die Anzahlung zu bezahlen und den Betrag zu autorisieren, der für Waren fällig ist, die später erfüllt werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="bf893-289">Zum Zeitpunkt der Erfüllung wird die autorisierte Deckung aufgezeichnet.</span><span class="sxs-lookup"><span data-stu-id="bf893-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="bf893-290">Bevor die Omnikanal-Tokenisierungsfunktion implementiert wurde, konnte nur ein wiederkehrendes Kartentoken für nachfolgende Auftragserfüllung erstellt wurde.</span><span class="sxs-lookup"><span data-stu-id="bf893-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="bf893-291">Daher wurden die Mittel für die ausstehende Erfüllung nicht autorisiert und weil diese Mittel nicht für diese bestimmte Bestellung vorgesehen war, war es weniger wahrscheinlich, dass sie später aufgezeichnet werden konnten.</span><span class="sxs-lookup"><span data-stu-id="bf893-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="bf893-292">Karte nur einmal durch das Lesegerät ziehen ist in Retail Version 8.1.3 nicht unterstützt.</span><span class="sxs-lookup"><span data-stu-id="bf893-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="bf893-293">Debitorenaufträge in Version 8.1.3 verwenden den gleichen Ablauf, der verwendet wurde, bevor die Omnikanal-Tokenisierungsfunktion implementiert wurde.</span><span class="sxs-lookup"><span data-stu-id="bf893-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="bf893-294">Karten, die keine wiederkehrenden Kartentoken ausgeben können</span><span class="sxs-lookup"><span data-stu-id="bf893-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="bf893-295">Einige Karten können nicht für Omnikanal-Zahlungen verwendet werden, da sie keine wiederkehrende Kartentoken unterstützen.</span><span class="sxs-lookup"><span data-stu-id="bf893-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="bf893-296">Wenn ein Auftrag am POS erstellt wird, wenn die Anzahlung vorgenommen wird, indem eine Karte verwendet wird, die keine wiederkehrende Kartentoken unterstützt, wird der vorherige Kartentokenisierungsfluss verwendet.</span><span class="sxs-lookup"><span data-stu-id="bf893-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="bf893-297">Daher muss ein Debitor, der eine Zahlung bereitstellen möchte,, die für die nachfolgende Auftragserfüllung verwendet wird, eine zweite Karte vorweisen.</span><span class="sxs-lookup"><span data-stu-id="bf893-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="bf893-298">Wenn die zweite Karte keine wiederkehrenden Kartentoken unterstützt, wird die Tokenisierungsaktivität abgelehnt, und der Kassierer wird aufgefordert, den Debitor zu bitten, eine andere Karte bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="bf893-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="bf893-299">Eine andere Karte verwenden</span><span class="sxs-lookup"><span data-stu-id="bf893-299">Using a different card</span></span>

<span data-ttu-id="bf893-300">Ein Debitor, der in den Shop kommt, um den Auftrag abzuohlen, hat die Option, eine andere zu verwenden.</span><span class="sxs-lookup"><span data-stu-id="bf893-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="bf893-301">Wenn der Kassierer zum Zeitpunkt der Abolung der Bestellung die Aufforderung erhält **Verfügbare Zahlungsmethode verwenden** kann er oder sie den Kunden fragen, ob er die selbe Karte verwenden möchte.</span><span class="sxs-lookup"><span data-stu-id="bf893-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, he or she can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="bf893-302">Wenn der Debitor die Karte verloren hat, die verwendet wurde, um einen Auftrag zu erstellen und für den Auftrag bezahlt möchte, indem er eine andere Karte verwendet, kann der Kassierer **Eine andere Zahlungsmethode verwenden** auswählen.</span><span class="sxs-lookup"><span data-stu-id="bf893-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="bf893-303">Wenn der Kunde später zurückkehrt, um mehr Artikel für denselben Auftrag abzuholen, kann der Kassier, wenn die ursprüngliche Kartenautorisierung noch gültig ist, erneut fragen, ob der Debitor diese Karte verwenden möchte.</span><span class="sxs-lookup"><span data-stu-id="bf893-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="bf893-304">Ungültige Autorisierungen</span><span class="sxs-lookup"><span data-stu-id="bf893-304">Invalid authorizations</span></span>

<span data-ttu-id="bf893-305">Wenn die Karte, die verwendet wurde, um einen Auftrag zu erstellen, nicht mehr gültig ist, wenn Produkte für die Abholung ausgewählt werden, wird die Zahlungs-Anforderung fehlschlagen.</span><span class="sxs-lookup"><span data-stu-id="bf893-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="bf893-306">Der POS-Zahlungskonnektor versucht dann, eine neue Autorisierung aufzuzeichnen und zu erstellen, indem er die gleichen Kartendetails verwendet.</span><span class="sxs-lookup"><span data-stu-id="bf893-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="bf893-307">Wenn die neue Autorisierung oder Erfassung fehlschlägt, wird der Kassierer informiert, dass die Zahlung nicht verarbeitet werden kann.</span><span class="sxs-lookup"><span data-stu-id="bf893-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="bf893-308">Der Kassierer muss dann eine neue Zahlung vom Debitor erhalten.</span><span class="sxs-lookup"><span data-stu-id="bf893-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="bf893-309">Mehrere verfügbare Zahlungen</span><span class="sxs-lookup"><span data-stu-id="bf893-309">Multiple available payments</span></span>

<span data-ttu-id="bf893-310">Wenn ein Auftrag, der mehrere Zahlungsmittel und mehrere Positionen beinhaltet, verarbeitet wird, wird der Kassierer aufgefordert zuerst die **Verfügbare Zahlungsmethode zu verwenden**.</span><span class="sxs-lookup"><span data-stu-id="bf893-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="bf893-311">Sind mehrere Karten vorhanden, wenn der Kassierer **Verfügbare Zahlungsmethode verwenden** auswählt, werden bestehende Karten (Zahlungsmittel) erfasst, bis der Saldo für die Waren, die abgeholt werden, ausgeglichen ist.</span><span class="sxs-lookup"><span data-stu-id="bf893-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="bf893-312">Der Kassierer hat nicht die Option, die Karte auszuwählen, die für die Waren verwendet werden soll, die abgeholt werden.</span><span class="sxs-lookup"><span data-stu-id="bf893-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="bf893-313">Verwandte Themen</span><span class="sxs-lookup"><span data-stu-id="bf893-313">Related topics</span></span>

- [<span data-ttu-id="bf893-314">FAQs zu Zahlungen</span><span class="sxs-lookup"><span data-stu-id="bf893-314">Payments FAQ</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="bf893-315">Zahlungskonnektor von Dynamics 365 für Adyen</span><span class="sxs-lookup"><span data-stu-id="bf893-315">Dynamics 365 Payment Connector for Adyen</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="bf893-316">BOPIS in einer Dynamics 365 Commerce-Auswertungsumgebung konfigurieren</span><span class="sxs-lookup"><span data-stu-id="bf893-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](https://docs.microsoft.com/dynamics365/commerce/cpe-bopis)

