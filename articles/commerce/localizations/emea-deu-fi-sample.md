---
title: Integrationsbeispiel für Steuererfassungsdienst für Deutschland
description: In diesem Thema erhalten Sie einen Überblick über das steuerliche Integrationsbeispiel für Deutschland.
author: josaw
manager: annbe
ms.date: 05/26/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.scope: Retail
ms.search.region: Germany
ms.search.industry: Retail
ms.author: v-kikozl
ms.search.validFrom: 2020-5-29
ms.dyn365.ops.version: 10.0.12
ms.openlocfilehash: 84f48ebfa20755d6a37271d8a14f287f3e86539f
ms.sourcegitcommit: 83ec80382bfeb693d5c5949b6f65296bd50eed12
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/09/2020
ms.locfileid: "3973995"
---
# <a name="fiscal-registration-service-integration-sample-for-germany"></a><span data-ttu-id="5af33-103">Integrationsbeispiel für Steuererfassungsdienst für Deutschland</span><span class="sxs-lookup"><span data-stu-id="5af33-103">Fiscal registration service integration sample for Germany</span></span>

[!include[banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="5af33-104">Einführung</span><span class="sxs-lookup"><span data-stu-id="5af33-104">Introduction</span></span>

<span data-ttu-id="5af33-105">Um die lokalen steuerlichen Anforderungen für Kassen in Deutschland zu erfüllen, umfassen die Microsoft Dynamics 365 Commerce-Funktionen für Deutschland eine Beispielintegration der Verkaufsstelle (POS) in einen externen Steuerregistrierungsservice.</span><span class="sxs-lookup"><span data-stu-id="5af33-105">To meet local fiscal requirements for cash registers in Germany, the Microsoft Dynamics 365 Commerce functionality for Germany includes a sample integration of the point of sale (POS) with an external fiscal registration service.</span></span> <span data-ttu-id="5af33-106">Das Beispiel erweitert die [steuerliche Integrationsfunktionen](fiscal-integration-for-retail-channel.md).</span><span class="sxs-lookup"><span data-stu-id="5af33-106">The sample extends the [fiscal integration functionality](fiscal-integration-for-retail-channel.md).</span></span> <span data-ttu-id="5af33-107">Es basiert auf der [EFR (Electronisches Fiskalregister)](https://www.efsta.eu/de/fiskalloesungen/deutschland)-Lösung von [EFSTA](https://www.efsta.eu/de/) und ermöglicht die Kommunikation mit dem EFR-Service über das HTTPS-Protokoll.</span><span class="sxs-lookup"><span data-stu-id="5af33-107">It's based on the [EFR (Electronic Fiscal Register)](https://www.efsta.eu/de/fiskalloesungen/deutschland) solution from [EFSTA](https://www.efsta.eu/de/) and enables communication with the EFR service via the HTTPS protocol.</span></span> <span data-ttu-id="5af33-108">Der EFR-Dienst sollte entweder in der Retail Hardware station oder auf einem separaten Computer gehostet werden, zu dem von der Hardarestation aus eine Verbindung hergestellt werden kann.</span><span class="sxs-lookup"><span data-stu-id="5af33-108">The EFR service should be hosted on either the Retail Hardware station or a separate computer that can be connected to from the Hardware station.</span></span> <span data-ttu-id="5af33-109">Das Beispiel wird in der Form eines Quellcodes bereitgestellt und ist Teil des Retail Software Development Kit (SDK).</span><span class="sxs-lookup"><span data-stu-id="5af33-109">The sample is provided in the form of source code and is part of the Retail software development kit (SDK).</span></span>

<span data-ttu-id="5af33-110">Microsoft gibt keine Hardware, Software oder Dokumentation von EFSTA aus frei.</span><span class="sxs-lookup"><span data-stu-id="5af33-110">Microsoft doesn't release any hardware, software, or documentation from EFSTA.</span></span> <span data-ttu-id="5af33-111">Um Informationen darüber zu erhalten, wie Sie die EFR-Lösung beziehen und betreiben, wenden Sie sich an [EFSTA](https://www.efsta.eu/de/kontakt/kontakt).</span><span class="sxs-lookup"><span data-stu-id="5af33-111">For information about how to get the EFR solution and operate it, contact [EFSTA](https://www.efsta.eu/de/kontakt/kontakt).</span></span>

## <a name="scenarios"></a><span data-ttu-id="5af33-112">Szenarien</span><span class="sxs-lookup"><span data-stu-id="5af33-112">Scenarios</span></span>

<span data-ttu-id="5af33-113">Die folgenden Szenarien werden im Beispiel für die Integration des Steuerregistrierungsservice für Deutschland abgedeckt:</span><span class="sxs-lookup"><span data-stu-id="5af33-113">The following scenarios are covered by the fiscal registration service integration sample for Germany.</span></span>

### <a name="sales-operations"></a><span data-ttu-id="5af33-114">Verkaufsvorgänge</span><span class="sxs-lookup"><span data-stu-id="5af33-114">Sales operations</span></span>

- <span data-ttu-id="5af33-115">**Registrierung von Cash-and-Carry-Verkäufen und -Rückgaben im Steuerregistrierungsdienst:**</span><span class="sxs-lookup"><span data-stu-id="5af33-115">**Registration of cash-and-carry sales and returns in the fiscal registration service:**</span></span>

<span data-ttu-id="5af33-116">Die Registrierung von Verkaufsvorgängen umfasst die folgenden Schritte:</span><span class="sxs-lookup"><span data-stu-id="5af33-116">Registration of sales operations includes the following steps:</span></span>

  1. <span data-ttu-id="5af33-117">Erfassung des Startdatums</span><span class="sxs-lookup"><span data-stu-id="5af33-117">Registration of the transaction start</span></span>

<span data-ttu-id="5af33-118">Der Start jeder Transaktion wird in einem technischen Sicherheitselement (TSE) registriert, das mit dem EFR-Dienst verbunden ist.</span><span class="sxs-lookup"><span data-stu-id="5af33-118">The start of each transaction is registered in a technical security element (TSE) that is connected to the EFR service.</span></span> <span data-ttu-id="5af33-119">Als Ergebnis der Registrierung weist eine TSE eine Transaktions-ID (TID) zu.</span><span class="sxs-lookup"><span data-stu-id="5af33-119">As a result of    registration a TSE assigns a transaction ID (TID).</span></span>

  2. <span data-ttu-id="5af33-120">Erfassung des Enddatums</span><span class="sxs-lookup"><span data-stu-id="5af33-120">Registration of the transaction end</span></span>

<span data-ttu-id="5af33-121">Wenn eine Transaktion am POS abgeschlossen wird, wird sie mit derselben TID registriert, die bei der Registrierung des Transaktionsstarts zugewiesen wurde.</span><span class="sxs-lookup"><span data-stu-id="5af33-121">When a transaction is concluded at the POS, it's registered by using the same TID that was assigned during registration of the transaction start.</span></span> <span data-ttu-id="5af33-122">Zu diesem Zeitpunkt werden detaillierte Buchungsdaten dem Steuererfassungsdienst zugestellt.</span><span class="sxs-lookup"><span data-stu-id="5af33-122">At that moment, detailed transaction data is sent to the fiscal registration service.</span></span> <span data-ttu-id="5af33-123">Diese Daten beinhalten Informationen zu Verkaufspositionen sowie Informationen über Rabatte, Zahlungen und Steuern.</span><span class="sxs-lookup"><span data-stu-id="5af33-123">This data includes sales line information, and information about discounts, payments, and taxes.</span></span>

  3. <span data-ttu-id="5af33-124">Erfassen einer Antwort vom Steuererfassungsdienst</span><span class="sxs-lookup"><span data-stu-id="5af33-124">Capturing a response from the fiscal registration service</span></span>

<span data-ttu-id="5af33-125">Sicherheitsdaten werden von einer TSE als Teil einer Antwort empfangen und in der Transaktion in der Kanaldatenbank gespeichert.</span><span class="sxs-lookup"><span data-stu-id="5af33-125">Security data is received from a TSE as a part of a response and is saved in the transaction in the channel database.</span></span> <span data-ttu-id="5af33-126">Die Sicherheitsdaten bestehen aus folgenden Informationen: – TID – Datum und Uhrzeit des Transaktionsstarts – Datum und Uhrzeit des Transaktionsendes – Signaturzähler – Prüfwert – Seriennummer des TSE</span><span class="sxs-lookup"><span data-stu-id="5af33-126">The security data consist of the following information: - TID - Date and time of the transaction start - Date and time of the transaction end - Signature counter - Check value - Serial number of the TSE</span></span>

- <span data-ttu-id="5af33-127">**Registrierung von Kundenbestellungen im Steuerregistrierungsdienst:** Der Registrierungsprozess ist der gleiche wie der Prozess für Cash-and-Carry-Verkäufe und -Rückgaben.</span><span class="sxs-lookup"><span data-stu-id="5af33-127">**Registration of customer orders in the fiscal registration service:** The registration process is the same as the process for cash-and-carry sales and returns.</span></span>
- <span data-ttu-id="5af33-128">**Registrierung von Vorgängen im Zusammenhang mit Geschenkkarten und Einzahlungen** Der Registrierungsprozess ist der gleiche wie der Prozess für Cash-and-Carry-Verkäufe und -Rückgaben.</span><span class="sxs-lookup"><span data-stu-id="5af33-128">**Registration of operations that involve gift cards and deposits:** The registration process is the same as the process for cash-and-carry sales and returns.</span></span>

#### <a name="notifying-users-about-fiscal-registration-failures"></a><span data-ttu-id="5af33-129">Benachrichtigen von Benutzern über Fehler bei der Steuerregistrierung</span><span class="sxs-lookup"><span data-stu-id="5af33-129">Notifying users about fiscal registration failures</span></span>

<span data-ttu-id="5af33-130">Es gibt zwei Möglichkeiten, wie der Steuerregistrierungsdienst Benutzer über Fehler informieren kann, die während der Steuerregistrierung aufgetreten sind:</span><span class="sxs-lookup"><span data-stu-id="5af33-130">There are two ways that the fiscal registration service can notify users about failures that occurred during the fiscal registration:</span></span>

- <span data-ttu-id="5af33-131">Drucken Sie zusätzliche Informationen aus der Antwort im Feld **Info Nachricht** auf Quittungen.</span><span class="sxs-lookup"><span data-stu-id="5af33-131">Print additional information from the response in the **Info message** field on receipts.</span></span>
- <span data-ttu-id="5af33-132">Benachrichtigungen des Finanzdienstes als Benutzernachrichten am POS anzeigen.</span><span class="sxs-lookup"><span data-stu-id="5af33-132">Show notifications from the fiscal service as user messages at the POS.</span></span>

    > [!NOTE]
    > <span data-ttu-id="5af33-133">Dieser Benachrichtigungsmechanismus erfordert, dass die **Steuerregistrierungsbenachrichtigungen anzeigen** Parameter auf der Seite **Technische Profile der Steckverbinder** eingeschaltet werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-133">This notification mechanism requires that the **Show fiscal registration notifications** parameter on the **Connector technical profiles** page be turned on.</span></span>

#### <a name="printing-receipts"></a><span data-ttu-id="5af33-134">Quittungen werden gedruckt</span><span class="sxs-lookup"><span data-stu-id="5af33-134">Printing receipts</span></span>

<span data-ttu-id="5af33-135">Der Belegdruck ist in Deutschland obligatorisch.</span><span class="sxs-lookup"><span data-stu-id="5af33-135">Receipt printing is mandatory in Germany.</span></span> <span data-ttu-id="5af33-136">Alle Belege müssen mindestens folgende Angaben enthalten:</span><span class="sxs-lookup"><span data-stu-id="5af33-136">All receipts must contain at least the following information:</span></span>

- <span data-ttu-id="5af33-137">Name und Anschrift des Unternehmens</span><span class="sxs-lookup"><span data-stu-id="5af33-137">Name and address of the company</span></span>
- <span data-ttu-id="5af33-138">Informationen über Waren, einschließlich deren Preise und Mengen</span><span class="sxs-lookup"><span data-stu-id="5af33-138">Information about goods, including their prices and quantities</span></span>
- <span data-ttu-id="5af33-139">Informationen zu eingegangenen Zahlungen</span><span class="sxs-lookup"><span data-stu-id="5af33-139">Information about payments that were received</span></span>
- <span data-ttu-id="5af33-140">Informationen zu Steuern, einschließlich Gesamtbeträgen pro Steuersatz</span><span class="sxs-lookup"><span data-stu-id="5af33-140">Information about taxes, including total amounts per tax rate</span></span>
- <span data-ttu-id="5af33-141">Datensicherheit:</span><span class="sxs-lookup"><span data-stu-id="5af33-141">Security data:</span></span>

    - <span data-ttu-id="5af33-142">TID</span><span class="sxs-lookup"><span data-stu-id="5af33-142">TID</span></span>
    - <span data-ttu-id="5af33-143">Das Datum und die Zeit des Transaktionsstarts</span><span class="sxs-lookup"><span data-stu-id="5af33-143">Date and time of the transaction start</span></span>
    - <span data-ttu-id="5af33-144">Das Datum und die Zeit des Transaktionsende</span><span class="sxs-lookup"><span data-stu-id="5af33-144">Date and time of the transaction end</span></span>
    - <span data-ttu-id="5af33-145">Signaturzähler</span><span class="sxs-lookup"><span data-stu-id="5af33-145">Signature counter</span></span>
    - <span data-ttu-id="5af33-146">Wert prüfen</span><span class="sxs-lookup"><span data-stu-id="5af33-146">Check value</span></span>
    - <span data-ttu-id="5af33-147">Seriennummer der TSE</span><span class="sxs-lookup"><span data-stu-id="5af33-147">Serial number of the TSE</span></span>

- <span data-ttu-id="5af33-148">Informationsnachricht</span><span class="sxs-lookup"><span data-stu-id="5af33-148">Informational message</span></span>

> [!NOTE]
> <span data-ttu-id="5af33-149">Ein QR-Code kann auch auf Quittungen gedruckt werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-149">A QR code can also be printed on receipts.</span></span> <span data-ttu-id="5af33-150">Obwohl der QR-Code optional ist, wird er dringend empfohlen.</span><span class="sxs-lookup"><span data-stu-id="5af33-150">Although the QR code is optional, it's highly recommended.</span></span> <span data-ttu-id="5af33-151">Weitere Informationen dazu, wie Sie QR-Code als Teil einer Antwort vom Steuerregistrierungsdienst erhalten, finden Sie im EFR-Handbuch \[DE\] Dokument, das auf der Website [EFSTA-Dokumentation](https://public.efsta.net/efr/) veröffentlicht wird.</span><span class="sxs-lookup"><span data-stu-id="5af33-151">For more information about how to get QR code as a part of a response from the fiscal registration service, see the "EFR Guide \[DE\]" document that is published on the [EFSTA documentation](https://public.efsta.net/efr/) website.</span></span>
>
> <span data-ttu-id="5af33-152">Das Feld **Info Nachricht** auf den Belegen zeigt eine Benachrichtigung des Steuerregistrierungsdienstes.</span><span class="sxs-lookup"><span data-stu-id="5af33-152">The **Info message** field on receipts shows a notification from the fiscal registration service.</span></span> <span data-ttu-id="5af33-153">Wenn beispielsweise ein Signaturgerät defekt ist, kann ein spezieller Text auf eine Quittung gedruckt werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-153">For example, if a signature device is broken, special text can be printed on a receipt.</span></span>

#### <a name="voided-suspended-and-recalled-transactions"></a><span data-ttu-id="5af33-154">Stornierte, suspendierte und zurückgerufene Transaktionen</span><span class="sxs-lookup"><span data-stu-id="5af33-154">Voided, suspended, and recalled transactions</span></span>

- <span data-ttu-id="5af33-155">Eine stornierte Transaktion wird als Anforderung zum Beenden einer Transaktion im Steuerregistrierungsdienst registriert.</span><span class="sxs-lookup"><span data-stu-id="5af33-155">A voided transaction is registered as a request to terminate a transaction in the fiscal registration service.</span></span>
- <span data-ttu-id="5af33-156">Eine stornierte Transaktion wird als Anforderung zum Beenden einer Transaktion im Steuerregistrierungsdienst registriert.</span><span class="sxs-lookup"><span data-stu-id="5af33-156">A suspended transaction is registered as a request to terminate a transaction in the fiscal registration service.</span></span>
- <span data-ttu-id="5af33-157">Eine stornierte Transaktion wird als Anforderung zum Beginn einer Transaktion im Steuerregistrierungsdienst registriert.</span><span class="sxs-lookup"><span data-stu-id="5af33-157">Recall of a suspended transaction is registered as the start of a new transaction in the fiscal registration service.</span></span>

### <a name="non-sales-transactions-and-shift-closing"></a><span data-ttu-id="5af33-158">Nichtverkaufstransaktionen und Schichtabschluss</span><span class="sxs-lookup"><span data-stu-id="5af33-158">Non-sales transactions and shift closing</span></span>

<span data-ttu-id="5af33-159">Die folgenden Nichtverkaufstransaktionen werden im Steuerregistrierungsdienst unter Verwendung von als nicht steuerliche Vorgänge mithilfe dem **NFS** Etikett registriert:</span><span class="sxs-lookup"><span data-stu-id="5af33-159">The following non-sales transactions are registered as non-fiscal operations in the fiscal registration service by using the **NFS** tag:</span></span>

- <span data-ttu-id="5af33-160">Ausgangsbetrag deklarieren</span><span class="sxs-lookup"><span data-stu-id="5af33-160">Declare start amount</span></span>
- <span data-ttu-id="5af33-161">Mittelzugang</span><span class="sxs-lookup"><span data-stu-id="5af33-161">Float entry</span></span>
- <span data-ttu-id="5af33-162">Zahlungsmittel entfernen</span><span class="sxs-lookup"><span data-stu-id="5af33-162">Tender removal</span></span>
- <span data-ttu-id="5af33-163">Ablage in Tresor</span><span class="sxs-lookup"><span data-stu-id="5af33-163">Safe drop</span></span>
- <span data-ttu-id="5af33-164">Bankeinzahlung</span><span class="sxs-lookup"><span data-stu-id="5af33-164">Bank drop</span></span>
- <span data-ttu-id="5af33-165">Ertragskonten</span><span class="sxs-lookup"><span data-stu-id="5af33-165">Income accounts</span></span>
- <span data-ttu-id="5af33-166">Aufwandskonten</span><span class="sxs-lookup"><span data-stu-id="5af33-166">Expense accounts</span></span>

<span data-ttu-id="5af33-167">Der Vorgang **Nichtverkaufstransaktionen** werden im Steuerregistrierungsdienst mithilfe dem **NFS** Etikett als nicht steuerliche Vorgänge registriert.</span><span class="sxs-lookup"><span data-stu-id="5af33-167">The **Close shift** operation is also registered as a non-fiscal operation in the fiscal registration service by using the **NFS** tag.</span></span>

### <a name="data-export-and-audit"></a><span data-ttu-id="5af33-168">Datenexport und Audit</span><span class="sxs-lookup"><span data-stu-id="5af33-168">Data export and audit</span></span>

<span data-ttu-id="5af33-169">Alle Transaktionen müssen von einem TSE signiert werden, um ihre Integrität, Authentizität und Vollständigkeit sicherzustellen und um die Manipulation aufgezeichneter Daten zu verhindern.</span><span class="sxs-lookup"><span data-stu-id="5af33-169">All transactions must be signed by a TSE to ensure their integrity, authenticity, and completeness, and to help prevent manipulation of recorded data.</span></span>

> [!WARNING]
> <span data-ttu-id="5af33-170">Es kann nur ein zertifizierter TSE verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-170">Only a certified TSE can be used.</span></span> <span data-ttu-id="5af33-171">Informationen zu den Typen und Modellen von TSEs, die von der EFR-Lösung unterstützt werden, finden Sie im EFR-Handbuch \[DE \] Dokument, das auf der Website [EFSTA-Dokumentation](https://public.efsta.net/efr/) veröffentlicht wird.</span><span class="sxs-lookup"><span data-stu-id="5af33-171">For information about the types and models of TSEs that are supported in the EFR solution, see the "EFR Guide \[DE\]" document that is published on the [EFSTA documentation](https://public.efsta.net/efr/) website.</span></span> <span data-ttu-id="5af33-172">Informationen zur Auswahl und zum Erhalt eines TSE erhalten Sie von [EFSTA](https://www.efsta.eu/at/kontakt).</span><span class="sxs-lookup"><span data-stu-id="5af33-172">For information about how to choose and obtain a TSE, contact [EFSTA](https://www.efsta.eu/at/kontakt).</span></span>

<span data-ttu-id="5af33-173">Vorschriften in Deutschland erfordern Unterstützung für den DSFinV-K-Export.</span><span class="sxs-lookup"><span data-stu-id="5af33-173">Regulations in Germany require support for the DSFinV-K export.</span></span> <span data-ttu-id="5af33-174">Der DSFinV-K-Export kann in der EFR-Lösung ausgelöst werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-174">The DSFinV-K export can be triggered in the EFR solution.</span></span> <span data-ttu-id="5af33-175">Weitere Informationen zum DSFinV-K-Export finden Sie im EFR-Handbuch \[DE \] Dokument, das auf der Website [EFSTA-Dokumentation](https://public.efsta.net/efr/) veröffentlicht wird.</span><span class="sxs-lookup"><span data-stu-id="5af33-175">For more information about the DSFinV-K export, see the "EFR Guide \[DE\]" document that is published on the [EFSTA documentation](https://public.efsta.net/efr/) web-site.</span></span>

### <a name="default-data-mapping"></a><span data-ttu-id="5af33-176">Standarddatenzuordnung</span><span class="sxs-lookup"><span data-stu-id="5af33-176">Default data mapping</span></span>

<span data-ttu-id="5af33-177">Die folgende Standarddatenzuordnung ist in der Steuerbeleganbieter-Konfiguration enthalten, die als Teil des Steuerintegrationsbeispiels bereitgestellt wird.</span><span class="sxs-lookup"><span data-stu-id="5af33-177">The following default data mapping is included in the fiscal document provider configuration that is provided as part of the fiscal integration sample.</span></span>

- <span data-ttu-id="5af33-178">**Ausschreibungstypzuordnung** 1: 0; 2: 1; 3: 3; 4: 8; 5: 2; 6: 0; 7: 7; 8: 6; 9: 0; 10: 8; 11: 1</span><span class="sxs-lookup"><span data-stu-id="5af33-178">**Tender type mapping:** 1: 0; 2: 1; 3: 3; 4: 8; 5: 2; 6: 0; 7: 7; 8: 6; 9: 0; 10: 8; 11: 1</span></span>

    > [!NOTE]
    > <span data-ttu-id="5af33-179">In jedem Wertepaar, das durch ein Semikolon (;) getrennt ist, bezieht sich die erste Zahl auf eine Zahlungsmethode, die für das Geschäft eingerichtet wurde.</span><span class="sxs-lookup"><span data-stu-id="5af33-179">In each pair of values that is separated by a semicolon (;), the first number refers to a payment method that is set up for the store.</span></span> <span data-ttu-id="5af33-180">Die zweite Nummer bezieht sich auf eine entsprechende Zahlungsgruppe im EFR-Dienst, dargestellt durch das **PayG** Attribut.</span><span class="sxs-lookup"><span data-stu-id="5af33-180">The second number refers to a corresponding payment group in the EFR service, as represented by the **PayG** attribute.</span></span>

- <span data-ttu-id="5af33-181">**Zuordnung der Mehrwertsteuersätze:** A: 19.00; B: 7,00; C: 10,70; D: 5,50; E: 0,00</span><span class="sxs-lookup"><span data-stu-id="5af33-181">**Value-added tax (VAT) rates mapping:** A: 19.00; B: 7.00; C: 10.70; D: 5.50; E: 0.00</span></span>

    > [!NOTE]
    > <span data-ttu-id="5af33-182">In jedem Wertepaar, das durch ein Semikolon (;) getrennt ist, bezieht sich der Buchstabe auf eine Steuergruppe im EFR-Dienst, dargestellt durch das **TaxG** Attribut.</span><span class="sxs-lookup"><span data-stu-id="5af33-182">In each pair of values that is separated by a semicolon (;), the letter refers to a tax group in the EFR service, as represented by the **TaxG** attribute.</span></span> <span data-ttu-id="5af33-183">Die Zahl bezieht sich auf den Steuerprozentsatz.</span><span class="sxs-lookup"><span data-stu-id="5af33-183">The number refers to the tax percentage.</span></span>

- <span data-ttu-id="5af33-184">**Steuergruppe für Geschenkkarten und Einzahlungen:** G</span><span class="sxs-lookup"><span data-stu-id="5af33-184">**Tax group for gift cards and deposits:** G</span></span>
- <span data-ttu-id="5af33-185">**Steuergruppe für Mehrwertsteuer befreit:** F</span><span class="sxs-lookup"><span data-stu-id="5af33-185">**Tax group for VAT exempt:** F</span></span>

> [!WARNING]
> <span data-ttu-id="5af33-186">Die Steuereinstellungen in der Standarddatenzuordnung sind für die Übereinstimmung der Steuereinstellungen im System und der Steuergruppen im EFR-Dienst verantwortlich.</span><span class="sxs-lookup"><span data-stu-id="5af33-186">Tax settings in the default data mapping are responsible for matching tax settings in the system and tax groups in the EFR service.</span></span> <span data-ttu-id="5af33-187">Steuergruppen können nur dann auf Quittungen gedruckt werden, wenn das Feld **Code zum Drucken** auf der Seite **Umsatzsteuerkennzeichen** festgelegt ist.</span><span class="sxs-lookup"><span data-stu-id="5af33-187">Tax groups can be printed on receipts only if the **Code for printing** field is set on the **Sales tax codes** page.</span></span>

### <a name="limitations-of-the-sample"></a><span data-ttu-id="5af33-188">Einschränkungen des Beispiels</span><span class="sxs-lookup"><span data-stu-id="5af33-188">Limitations of the sample</span></span>

<span data-ttu-id="5af33-189">Der Steuererfassungsdienst unterstützt nur Szenarien, bei denen die Mehrwertsteuer in den Preisen enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="5af33-189">The fiscal registration service supports only scenarios where sales tax is included in prices.</span></span> <span data-ttu-id="5af33-190">Daher muss die Option **Preise in Mehrwertsteuer enthalten** auf **Ja** sowohl für Geschäfte als auch Debitoren festgelegt werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-190">Therefore, the **Prices include sales tax** option must be set to **Yes** for both stores and customers.</span></span>

<span data-ttu-id="5af33-191">Der Finanzdienst unterstützt keine Situationen, in denen mehr als ein Umsatzsteuerkennzeichen auf dieselbe Transaktionszeile angewendet wird.</span><span class="sxs-lookup"><span data-stu-id="5af33-191">The fiscal service doesn't support situations where more than one sales tax code is applied to the same transaction line.</span></span>

<span data-ttu-id="5af33-192">Das Rahmenwerk für die steuerliche Integration unterstützt keine Angebote.</span><span class="sxs-lookup"><span data-stu-id="5af33-192">The fiscal integration framework doesn't support sales quotations.</span></span> <span data-ttu-id="5af33-193">Daher sind diese Vorgänge nicht im Finanzdienst registriert.</span><span class="sxs-lookup"><span data-stu-id="5af33-193">Therefore, those operations aren't registered in the fiscal service.</span></span>

## <a name="set-up-commerce-for-germany"></a><span data-ttu-id="5af33-194">Commerce für Deutschland einrichten</span><span class="sxs-lookup"><span data-stu-id="5af33-194">Set up Commerce for Germany</span></span>

<span data-ttu-id="5af33-195">In diesem Abschnitt werden die Commerce-Einstellungen beschrieben, die für Deutschland spezifisch und empfohlen sind.</span><span class="sxs-lookup"><span data-stu-id="5af33-195">This section describes the Commerce settings that are specific to and recommended for Germany.</span></span> <span data-ttu-id="5af33-196">Weitere Informationen für das Einrichten finden Sie unter [Commerce-Homepage](../index.md).</span><span class="sxs-lookup"><span data-stu-id="5af33-196">For more setup information, see [Commerce home page](../index.md).</span></span>

<span data-ttu-id="5af33-197">Um die Deutschland-spezifischen Funktionen zu verwenden, müssen Sie die folgenden Einstellungen angeben.</span><span class="sxs-lookup"><span data-stu-id="5af33-197">To use the functionality that is specific to Germany, you must specify the following settings.</span></span>

- <span data-ttu-id="5af33-198">Legen Sie in der primären Adresse der juristischen Person das Feld **Land/Region** auf **DEU** (Deutschland) fest.</span><span class="sxs-lookup"><span data-stu-id="5af33-198">In the primary address of the legal entity, set the **Country/region** field to **DEU** (Germany).</span></span>
- <span data-ttu-id="5af33-199">Legen Sie im POS-Funktionsprofil jedes einzelnen Einzelhandelsgeschäfts in Österreich das Feld **ISO-Code** auf **DE** (Deutschland) fest.</span><span class="sxs-lookup"><span data-stu-id="5af33-199">In the POS functionality profile of every store that is located in Austria, set the **ISO code** field to **DE** (Germany).</span></span>

<span data-ttu-id="5af33-200">Sie müssen auch die folgenden Einstellungen für Deutschland angeben.</span><span class="sxs-lookup"><span data-stu-id="5af33-200">You must also specify the following settings for Germany.</span></span> <span data-ttu-id="5af33-201">Stellen Sie sicher, dass Sie entsprechende Verteilungseinzelvorgänge ausführen müssen, nachdem Sie die Einrichtung abschließen.</span><span class="sxs-lookup"><span data-stu-id="5af33-201">Be sure to run appropriate distribution jobs after you complete the setup.</span></span>

### <a name="set-up-vat-per-german-requirements"></a><span data-ttu-id="5af33-202">MwSt. nach deutschen Anforderungen einrichten</span><span class="sxs-lookup"><span data-stu-id="5af33-202">Set up VAT per German requirements</span></span>

<span data-ttu-id="5af33-203">Sie müssen Mehrwertsteuercodes, Mehrwertsteuergruppen und Artikel-Mehrwertsteuergruppen erstellen.</span><span class="sxs-lookup"><span data-stu-id="5af33-203">You must create sales tax codes, sales tax groups, and item sales tax groups.</span></span> <span data-ttu-id="5af33-204">Sie müssen auch Mehrwertsteuerinformationen für Produkte und Dienstleistungen einrichten.</span><span class="sxs-lookup"><span data-stu-id="5af33-204">You must also set up sales tax information for products and services.</span></span> <span data-ttu-id="5af33-205">Weitere Informationen dazu, wie die Mehrwertsteuer in eingerichtet und verwendet wird, finden Sie unter [Mehrwertsteuerüberblick](../../financials/general-ledger/indirect-taxes-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5af33-205">For more information about how to set up and use sales tax features, see [Sales tax overview](../../financials/general-ledger/indirect-taxes-overview.md).</span></span>

<span data-ttu-id="5af33-206">Auf Verkaufsbelegen können Sie einen abgekürzten Code für einen Mehrwertsteuercode drucken (beispielsweise „A“ oder „B”).</span><span class="sxs-lookup"><span data-stu-id="5af33-206">On sales receipts, you can print an abbreviated code for a sales tax code (for example, "A" or "B").</span></span> <span data-ttu-id="5af33-207">Um diese Funktionalität verfügbar zu machen, legen Sie das Feld **Code zum Drucken** auf der Seite **Mehrwertsteuercodes** fest.</span><span class="sxs-lookup"><span data-stu-id="5af33-207">To make this functionality available, set the **Code for printing** field on the **Sales tax codes** page.</span></span>

### <a name="set-up-stores"></a><span data-ttu-id="5af33-208">Shops einrichten</span><span class="sxs-lookup"><span data-stu-id="5af33-208">Set up stores</span></span>

<span data-ttu-id="5af33-209">Aktualisieren Sie auf der Seite **Alle Geschäfte** die Details der Geschäfte.</span><span class="sxs-lookup"><span data-stu-id="5af33-209">On the **All stores** page, update the store details.</span></span> <span data-ttu-id="5af33-210">Legen Sie genauer die folgenden Parameter fest:</span><span class="sxs-lookup"><span data-stu-id="5af33-210">Specifically, set the following parameters:</span></span>

- <span data-ttu-id="5af33-211">Geben Sie im Feld **Mehrwertsteuergruppe** die Mehrwertsteuergruppe an, die für Verkäufe an den Standarddebitoren verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="5af33-211">In the **Sales tax group** field, specify the sales tax group that should be used for sales to the default customer.</span></span>
- <span data-ttu-id="5af33-212">Legen Sie die Option **Preis enthält Mehrwertsteuersatz** auf **Ja** fest.</span><span class="sxs-lookup"><span data-stu-id="5af33-212">Set the **Prices include sales tax** option to **Yes**.</span></span>
- <span data-ttu-id="5af33-213">Legen Sie das Feld **Name** auf den Unternehmensnamen fest.</span><span class="sxs-lookup"><span data-stu-id="5af33-213">Set the **Name** field to the company name.</span></span> <span data-ttu-id="5af33-214">Durch diese Änderung wird sichergestellt, dass der Unternehmensname auf dem Verkaufsbeleg angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="5af33-214">This change helps ensure that the company name appears on a sales receipt.</span></span> <span data-ttu-id="5af33-215">Alternativ können Sie den Unternehmensnamen im Verkaufsbeleglayout als Freiformtext hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="5af33-215">Alternatively, you can add the company name to the sales receipt layout as free-form text.</span></span>
- <span data-ttu-id="5af33-216">Legen Sie das Feld **Steuernummer (TIN)** auf die Unternehmenskennnummer fest.</span><span class="sxs-lookup"><span data-stu-id="5af33-216">Set the **Tax identification number (TIN)** field to the company identification number.</span></span> <span data-ttu-id="5af33-217">Durch diese Änderung wird sichergestellt, dass die Identifikationsnummer auf dem Verkaufsbeleg angezeigt wird.</span><span class="sxs-lookup"><span data-stu-id="5af33-217">This change helps ensure that the company identification number appears on a sales receipt.</span></span> <span data-ttu-id="5af33-218">Alternativ können Sie Unternehmenskennnummer dem Verkaufsbeleglayout als Freiformtext hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="5af33-218">Alternatively, you can add the company identification number to the sales receipt layout as free-form text.</span></span>

### <a name="set-up-functionality-profiles"></a><span data-ttu-id="5af33-219">Einrichten von Funktionsprofilen</span><span class="sxs-lookup"><span data-stu-id="5af33-219">Set up functionality profiles</span></span>

<span data-ttu-id="5af33-220">POS-Funktionsprofile einrichten.</span><span class="sxs-lookup"><span data-stu-id="5af33-220">Set up POS functionality profiles.</span></span> <span data-ttu-id="5af33-221">Richten Sie im Inforegister **Belegnummerierung** die Belegnummerierung ein, indem Sie Datensätzen für die Belegbuchungstypen **Verkauf**, **Auftrag** und **Retoure** erstellen oder aktualisieren.</span><span class="sxs-lookup"><span data-stu-id="5af33-221">On the **Receipt numbering** FastTab, set up receipt numbering by creating or updating records for the **Sale**, **Sales order**, and **Return** receipt transaction types.</span></span>

### <a name="configure-custom-fields-so-that-they-can-be-used-in-receipt-formats-for-sales-receipts"></a><span data-ttu-id="5af33-222">Konfigurieren Sie benutzerdefinierte Felder, damit sie in Belegformate für Verkaufsbelege verwendet werden können</span><span class="sxs-lookup"><span data-stu-id="5af33-222">Configure custom fields so that they can be used in receipt formats for sales receipts</span></span>

<span data-ttu-id="5af33-223">Sie können den Sprachtext und die benutzerdefinierten Felder konfigurieren, die in den POS-Belegformaten verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-223">You can configure the language text and custom fields that are used in the POS receipt formats.</span></span> <span data-ttu-id="5af33-224">Das Standardunternehmen des Benutzers, der die Boneinrichtung erstellt, sollte die gleiche juristische Person sein, in dem die Sprachtexteinstellung erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="5af33-224">The default company of the user who creates the receipt setup should be the same legal entity where the language text setup is created.</span></span> <span data-ttu-id="5af33-225">Alternativ sollten dieselben Sprachtexte im Standardunternehmen des Benutzers und in der juristischen Person des Shops verwendet werden, für den das Setup erstellt wird.</span><span class="sxs-lookup"><span data-stu-id="5af33-225">Alternatively, the same language texts should be created in both the user's default company and the legal entity of the store that the setup is created for.</span></span>

<span data-ttu-id="5af33-226">Fügen Sie auf der Seite **Sprachentext** die folgenden Datensätze für die Beschriftungen der benutzerdefinierten Felder für Bonlayouts hinzu.</span><span class="sxs-lookup"><span data-stu-id="5af33-226">On the **Language text** page, add the following records for the labels of the custom fields for receipt layouts.</span></span> <span data-ttu-id="5af33-227">Beachten Sie, dass **Sprachen-ID**, **Text-ID** und **Text**-Werte, die in der Tabelle angezeigt werden, nur Beispiele sind.</span><span class="sxs-lookup"><span data-stu-id="5af33-227">Note that the **Language ID**, **Text ID**, and **Text** values that are shown in the table are just examples.</span></span> <span data-ttu-id="5af33-228">Sie können sie ändern, damit sie Ihre Anforderungen erfüllen.</span><span class="sxs-lookup"><span data-stu-id="5af33-228">You can change them to meet to your requirements.</span></span> <span data-ttu-id="5af33-229">Allerdings müssen die **Text-ID**-Werte, die Sie verwenden, eindeutig sein und gleich oder größer als 900001 sein.</span><span class="sxs-lookup"><span data-stu-id="5af33-229">However, the **Text ID** values that you use must be unique, and they must be equal to or more than 900001.</span></span>

<span data-ttu-id="5af33-230">Fügen Sie dem Abschnitt **POS** der Seite **Sprachentext** aus der Tabelle die folgenden POS-Beschriftungen hinzu:</span><span class="sxs-lookup"><span data-stu-id="5af33-230">Add the following POS labels to the **POS** section of the **Language text** page.</span></span>

| <span data-ttu-id="5af33-231">Sprachkennung</span><span class="sxs-lookup"><span data-stu-id="5af33-231">Language ID</span></span> | <span data-ttu-id="5af33-232">Textkennung</span><span class="sxs-lookup"><span data-stu-id="5af33-232">Text ID</span></span> | <span data-ttu-id="5af33-233">Text</span><span class="sxs-lookup"><span data-stu-id="5af33-233">Text</span></span>                                  |
|-------------|---------|---------------------------------------|
| <span data-ttu-id="5af33-234">en-US</span><span class="sxs-lookup"><span data-stu-id="5af33-234">en-US</span></span>       | <span data-ttu-id="5af33-235">900001</span><span class="sxs-lookup"><span data-stu-id="5af33-235">900001</span></span>  | <span data-ttu-id="5af33-236">QR-Code</span><span class="sxs-lookup"><span data-stu-id="5af33-236">QR code</span></span>                               |
| <span data-ttu-id="5af33-237">en-US</span><span class="sxs-lookup"><span data-stu-id="5af33-237">en-US</span></span>       | <span data-ttu-id="5af33-238">900002</span><span class="sxs-lookup"><span data-stu-id="5af33-238">900002</span></span>  | <span data-ttu-id="5af33-239">Transaktions-ID</span><span class="sxs-lookup"><span data-stu-id="5af33-239">Transaction ID</span></span>                        |
| <span data-ttu-id="5af33-240">en-US</span><span class="sxs-lookup"><span data-stu-id="5af33-240">en-US</span></span>       | <span data-ttu-id="5af33-241">900003</span><span class="sxs-lookup"><span data-stu-id="5af33-241">900003</span></span>  | <span data-ttu-id="5af33-242">Einzelhandelsdruckcode für Steuer</span><span class="sxs-lookup"><span data-stu-id="5af33-242">Tax Retail Print Code</span></span>                 |
| <span data-ttu-id="5af33-243">en-US</span><span class="sxs-lookup"><span data-stu-id="5af33-243">en-US</span></span>       | <span data-ttu-id="5af33-244">900004</span><span class="sxs-lookup"><span data-stu-id="5af33-244">900004</span></span>  | <span data-ttu-id="5af33-245">Steuerbetrag (Umsatz)</span><span class="sxs-lookup"><span data-stu-id="5af33-245">Tax Amount (sales)</span></span>                    |
| <span data-ttu-id="5af33-246">en-US</span><span class="sxs-lookup"><span data-stu-id="5af33-246">en-US</span></span>       | <span data-ttu-id="5af33-247">900005</span><span class="sxs-lookup"><span data-stu-id="5af33-247">900005</span></span>  | <span data-ttu-id="5af33-248">Steuergrundlage (Umsatz)</span><span class="sxs-lookup"><span data-stu-id="5af33-248">Tax Basis (sales)</span></span>                     |
| <span data-ttu-id="5af33-249">en-US</span><span class="sxs-lookup"><span data-stu-id="5af33-249">en-US</span></span>       | <span data-ttu-id="5af33-250">900006</span><span class="sxs-lookup"><span data-stu-id="5af33-250">900006</span></span>  | <span data-ttu-id="5af33-251">Datum und Uhrzeit des Buchungsstarts</span><span class="sxs-lookup"><span data-stu-id="5af33-251">Transaction start date time</span></span>           |
| <span data-ttu-id="5af33-252">en-US</span><span class="sxs-lookup"><span data-stu-id="5af33-252">en-US</span></span>       | <span data-ttu-id="5af33-253">900007</span><span class="sxs-lookup"><span data-stu-id="5af33-253">900007</span></span>  | <span data-ttu-id="5af33-254">Datum und Uhrzeit des Buchungsendes</span><span class="sxs-lookup"><span data-stu-id="5af33-254">Transaction end date time</span></span>             |
| <span data-ttu-id="5af33-255">en-US</span><span class="sxs-lookup"><span data-stu-id="5af33-255">en-US</span></span>       | <span data-ttu-id="5af33-256">900008</span><span class="sxs-lookup"><span data-stu-id="5af33-256">900008</span></span>  | <span data-ttu-id="5af33-257">Seriennummer des Sicherheitselements</span><span class="sxs-lookup"><span data-stu-id="5af33-257">Serial number of the security element</span></span> |
| <span data-ttu-id="5af33-258">en-US</span><span class="sxs-lookup"><span data-stu-id="5af33-258">en-US</span></span>       | <span data-ttu-id="5af33-259">900009</span><span class="sxs-lookup"><span data-stu-id="5af33-259">900009</span></span>  | <span data-ttu-id="5af33-260">Signaturzähler</span><span class="sxs-lookup"><span data-stu-id="5af33-260">Signature counter</span></span>                     |
| <span data-ttu-id="5af33-261">en-US</span><span class="sxs-lookup"><span data-stu-id="5af33-261">en-US</span></span>       | <span data-ttu-id="5af33-262">900010</span><span class="sxs-lookup"><span data-stu-id="5af33-262">900010</span></span>  | <span data-ttu-id="5af33-263">Wert prüfen</span><span class="sxs-lookup"><span data-stu-id="5af33-263">Check value</span></span>                           |
| <span data-ttu-id="5af33-264">en-US</span><span class="sxs-lookup"><span data-stu-id="5af33-264">en-US</span></span>       | <span data-ttu-id="5af33-265">900011</span><span class="sxs-lookup"><span data-stu-id="5af33-265">900011</span></span>  | <span data-ttu-id="5af33-266">Infomeldung</span><span class="sxs-lookup"><span data-stu-id="5af33-266">Info message</span></span>                          |

<span data-ttu-id="5af33-267">Fügen Sie auf der Seite **Benutzerdefinierte Felder** die folgenden Datensätze für die benutzerdefinierten Felder für Bonlayouts hinzu.</span><span class="sxs-lookup"><span data-stu-id="5af33-267">On the **Custom fields** page, add the following records for the custom fields for receipt layouts.</span></span> <span data-ttu-id="5af33-268">Beachten Sie, dass die Werte für **Textkennung Titel** den Werten **Textkennung** entsprechen müssen, die Sie auf der Seite **Sprachentext** angegeben haben.</span><span class="sxs-lookup"><span data-stu-id="5af33-268">Note that the **Caption text ID** values must correspond to the **Text ID** values that you specified on the **Language text** page.</span></span>

| <span data-ttu-id="5af33-269">Name</span><span class="sxs-lookup"><span data-stu-id="5af33-269">Name</span></span>                            | <span data-ttu-id="5af33-270">Typ</span><span class="sxs-lookup"><span data-stu-id="5af33-270">Type</span></span>    | <span data-ttu-id="5af33-271">Textkennung Titel</span><span class="sxs-lookup"><span data-stu-id="5af33-271">Caption text ID</span></span> |
|---------------------------------|---------|-----------------|
| <span data-ttu-id="5af33-272">QRCODE\_DE</span><span class="sxs-lookup"><span data-stu-id="5af33-272">QRCODE\_DE</span></span>                      | <span data-ttu-id="5af33-273">Zugang</span><span class="sxs-lookup"><span data-stu-id="5af33-273">Receipt</span></span> | <span data-ttu-id="5af33-274">900001</span><span class="sxs-lookup"><span data-stu-id="5af33-274">900001</span></span>          |
| <span data-ttu-id="5af33-275">TRANSACTIONID\_DE</span><span class="sxs-lookup"><span data-stu-id="5af33-275">TRANSACTIONID\_DE</span></span>               | <span data-ttu-id="5af33-276">Zugang</span><span class="sxs-lookup"><span data-stu-id="5af33-276">Receipt</span></span> | <span data-ttu-id="5af33-277">900002</span><span class="sxs-lookup"><span data-stu-id="5af33-277">900002</span></span>          |
| <span data-ttu-id="5af33-278">RETAILPRINTCODE\_DE</span><span class="sxs-lookup"><span data-stu-id="5af33-278">RETAILPRINTCODE\_DE</span></span>             | <span data-ttu-id="5af33-279">Zugang</span><span class="sxs-lookup"><span data-stu-id="5af33-279">Receipt</span></span> | <span data-ttu-id="5af33-280">900003</span><span class="sxs-lookup"><span data-stu-id="5af33-280">900003</span></span>          |
| <span data-ttu-id="5af33-281">SALESTAXAMOUNT\_DE</span><span class="sxs-lookup"><span data-stu-id="5af33-281">SALESTAXAMOUNT\_DE</span></span>              | <span data-ttu-id="5af33-282">Zugang</span><span class="sxs-lookup"><span data-stu-id="5af33-282">Receipt</span></span> | <span data-ttu-id="5af33-283">900004</span><span class="sxs-lookup"><span data-stu-id="5af33-283">900004</span></span>          |
| <span data-ttu-id="5af33-284">SALESTAXBASIS\_DE</span><span class="sxs-lookup"><span data-stu-id="5af33-284">SALESTAXBASIS\_DE</span></span>               | <span data-ttu-id="5af33-285">Zugang</span><span class="sxs-lookup"><span data-stu-id="5af33-285">Receipt</span></span> | <span data-ttu-id="5af33-286">900005</span><span class="sxs-lookup"><span data-stu-id="5af33-286">900005</span></span>          |
| <span data-ttu-id="5af33-287">TRANSACTIONSTARTDATETIME\_DE</span><span class="sxs-lookup"><span data-stu-id="5af33-287">TRANSACTIONSTARTDATETIME\_DE</span></span>    | <span data-ttu-id="5af33-288">Zugang</span><span class="sxs-lookup"><span data-stu-id="5af33-288">Receipt</span></span> | <span data-ttu-id="5af33-289">900006</span><span class="sxs-lookup"><span data-stu-id="5af33-289">900006</span></span>          |
| <span data-ttu-id="5af33-290">TRANSACTIONENDDATETIME\_DE</span><span class="sxs-lookup"><span data-stu-id="5af33-290">TRANSACTIONENDDATETIME\_DE</span></span>      | <span data-ttu-id="5af33-291">Zugang</span><span class="sxs-lookup"><span data-stu-id="5af33-291">Receipt</span></span> | <span data-ttu-id="5af33-292">900007</span><span class="sxs-lookup"><span data-stu-id="5af33-292">900007</span></span>          |
| <span data-ttu-id="5af33-293">SECURITYELEMENTSERIALNUMBER\_DE</span><span class="sxs-lookup"><span data-stu-id="5af33-293">SECURITYELEMENTSERIALNUMBER\_DE</span></span> | <span data-ttu-id="5af33-294">Zugang</span><span class="sxs-lookup"><span data-stu-id="5af33-294">Receipt</span></span> | <span data-ttu-id="5af33-295">900008</span><span class="sxs-lookup"><span data-stu-id="5af33-295">900008</span></span>          |
| <span data-ttu-id="5af33-296">SIGNCOUNTER\_DE</span><span class="sxs-lookup"><span data-stu-id="5af33-296">SIGNCOUNTER\_DE</span></span>                 | <span data-ttu-id="5af33-297">Zugang</span><span class="sxs-lookup"><span data-stu-id="5af33-297">Receipt</span></span> | <span data-ttu-id="5af33-298">900009</span><span class="sxs-lookup"><span data-stu-id="5af33-298">900009</span></span>          |
| <span data-ttu-id="5af33-299">SIGN\_DE</span><span class="sxs-lookup"><span data-stu-id="5af33-299">SIGN\_DE</span></span>                        | <span data-ttu-id="5af33-300">Zugang</span><span class="sxs-lookup"><span data-stu-id="5af33-300">Receipt</span></span> | <span data-ttu-id="5af33-301">900010</span><span class="sxs-lookup"><span data-stu-id="5af33-301">900010</span></span>          |
| <span data-ttu-id="5af33-302">INFOMESSAGE\_DE</span><span class="sxs-lookup"><span data-stu-id="5af33-302">INFOMESSAGE\_DE</span></span>                 | <span data-ttu-id="5af33-303">Zugang</span><span class="sxs-lookup"><span data-stu-id="5af33-303">Receipt</span></span> | <span data-ttu-id="5af33-304">900011</span><span class="sxs-lookup"><span data-stu-id="5af33-304">900011</span></span>          |

### <a name="configure-receipt-formats"></a><span data-ttu-id="5af33-305">Bonformate konfigurieren</span><span class="sxs-lookup"><span data-stu-id="5af33-305">Configure receipt formats</span></span>

<span data-ttu-id="5af33-306">Ändern Sie für jedes erforderliche Format den Wert des Felds **Druckverhalten** auf **Immer drucken**.</span><span class="sxs-lookup"><span data-stu-id="5af33-306">For every receipt format that is required, change the value of the **Print behavior** field to **Always print**.</span></span>

<span data-ttu-id="5af33-307">In Designer für Bonformat fügen Sie die folgenden benutzerdefinierten Felder den entsprechenden Bonabschnitten hinzu.</span><span class="sxs-lookup"><span data-stu-id="5af33-307">In the Receipt format designer, add the following custom fields to the appropriate receipt sections.</span></span> <span data-ttu-id="5af33-308">Beachten Sie, dass die Feldnamen den Sprachtexten entsprechen, die Sie im vorherigen Abschnitt definiert haben.</span><span class="sxs-lookup"><span data-stu-id="5af33-308">Note that field names correspond to the language texts that you defined in the previous section.</span></span>

- <span data-ttu-id="5af33-309">**Kopfzeile:** Fügen Sie die folgenden Felder hinzu:</span><span class="sxs-lookup"><span data-stu-id="5af33-309">**Header:** Add the following fields:</span></span>

    - <span data-ttu-id="5af33-310">Die Felder **Shopname** und **Steueridentifikationsnummer**, die zum Drucken des Unternehmensnamens und der Kennungsnummer auf Belegen verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-310">**Store name** and **Tax Identification Number** fields, which are used to print the company name and identification number on receipts.</span></span> <span data-ttu-id="5af33-311">Alternativ können Sie den Unternehmensnamen und die Kennungsnummer im Layout als Freiformtext hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="5af33-311">Alternatively, you can add the company name and identification number to the layout as free-form text.</span></span>
    - <span data-ttu-id="5af33-312">**Shopadresse**, **Datum**, **Zeit 24 h**, **Bonnummer** und **Registernummer**</span><span class="sxs-lookup"><span data-stu-id="5af33-312">**Store address**, **Date**, **Time 24H**, **Receipt Number**, and **Register number** fields.</span></span>

- <span data-ttu-id="5af33-313">**Positionen:** Fügen Sie die folgenden Felder hinzu:</span><span class="sxs-lookup"><span data-stu-id="5af33-313">**Lines:** Add the following fields:</span></span>

    - <span data-ttu-id="5af33-314">**Artikelname** Feld</span><span class="sxs-lookup"><span data-stu-id="5af33-314">**Item name** field</span></span>
    - <span data-ttu-id="5af33-315">**Menge** Feld</span><span class="sxs-lookup"><span data-stu-id="5af33-315">**Qty** field</span></span>
    - <span data-ttu-id="5af33-316">Feld **Gesamtpreis mit Steuer**</span><span class="sxs-lookup"><span data-stu-id="5af33-316">**Total price with tax** field</span></span>
    - <span data-ttu-id="5af33-317">Das Feld **Steuereinzelhandels-Druckcode**, das verwendet wird, um den abgekürzten Code zu drucken, der dem Mehrwertsteuercode entspricht, der für den Artikel gilt</span><span class="sxs-lookup"><span data-stu-id="5af33-317">**Tax Retail Print Code** field, which is used to print the abbreviated code that corresponds to the sales tax code that applies to the item</span></span>

- <span data-ttu-id="5af33-318">**Fußzeile:** Fügen Sie die folgenden Felder hinzu:</span><span class="sxs-lookup"><span data-stu-id="5af33-318">**Footer:** Add the following fields:</span></span>

    - <span data-ttu-id="5af33-319">Ändern Sie die Zahlungsfelder, damit die Zahlungsbeträge für jede Zahlungsmethode gedruckt werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-319">Payment fields, so that the payment amounts for each payment method are printed.</span></span> <span data-ttu-id="5af33-320">Beispiel: Fügen Sie die Felder **Name des Zahlungsmittels** und **Betrag des Zahlungsmittels** einer Position des Layouts hinzu.</span><span class="sxs-lookup"><span data-stu-id="5af33-320">For example, add the **Tender name** and **Tender amount** fields to one line of the layout.</span></span>
    - <span data-ttu-id="5af33-321">Felder in der **Steueraufschlüsselung** Feldgruppe.</span><span class="sxs-lookup"><span data-stu-id="5af33-321">Fields in the **Tax break down** field group.</span></span> <span data-ttu-id="5af33-322">Die Felder in dieser Feldgruppe müssen in einer separaten Position gedruckt werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-322">The fields in this field group must be printed on a separate line.</span></span>

        - <span data-ttu-id="5af33-323">Feld **Steuerkennung**, das ein Standardfeld ist, das den Druck einer Mehrwertsteuerzusammenfassung für jeden Mehrwertsteuercode aktiviert.</span><span class="sxs-lookup"><span data-stu-id="5af33-323">**Tax Id** field, which is a standard field that enables a sales tax summary to be printed for each sales tax code.</span></span> <span data-ttu-id="5af33-324">Das Feld muss einer neuen Position hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-324">The field must be added to a new line.</span></span>
        - <span data-ttu-id="5af33-325">**Steuerprozentsatz**-Feld, das ein Standardfeld ist, das zum Drucken des tatsächlichen Steuersatzes für den Mehrwertsteuercode verwendet wird.</span><span class="sxs-lookup"><span data-stu-id="5af33-325">**Tax Percentage** field, which is a standard field that is used to print the effective tax rate for the sales tax code.</span></span>
        - <span data-ttu-id="5af33-326">Feld **Steuerbasis (Verkauf)**, das verwendet wird, um den Gesamtbarverkaufsbetrag für den Mehrwertsteuercode des Belegs zu drucken.</span><span class="sxs-lookup"><span data-stu-id="5af33-326">**Tax Basis (sales)** field, which is used to print the receipt's total cash sale amount for the sales tax code.</span></span> <span data-ttu-id="5af33-327">Vorauszahlungen und Geschenkkartenvorgänge werden ausgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="5af33-327">Prepayments and gift card operations are excluded.</span></span>
        - <span data-ttu-id="5af33-328">Feld **Steuerbetrag (Verkauf)**, das verwendet wird, um den Steuerbetrag für Barverkäufe des Belegs für den Mehrwertsteuercode zu drucken.</span><span class="sxs-lookup"><span data-stu-id="5af33-328">**Tax Amount (sales)** field, which is used to print the receipt's tax amount for cash sales for the sales tax code.</span></span>
        - <span data-ttu-id="5af33-329">Feld **Steuereinzelhandels-Druckcode**, das verwendet wird, um den abgekürzten Code zu drucken, der dem Mehrwertsteuercode entspricht.</span><span class="sxs-lookup"><span data-stu-id="5af33-329">**Tax Retail Print Code** field, which is used to print the abbreviated code that corresponds to the sales tax code.</span></span>

    - <span data-ttu-id="5af33-330">Felder, die gesicherte Transaktionsdaten enthalten, die vom Steuerregistrierungsdienst zurückgegeben werden:</span><span class="sxs-lookup"><span data-stu-id="5af33-330">Fields that contain secured transaction data that is returned by the fiscal registration service:</span></span>

        - <span data-ttu-id="5af33-331">Feldr **Transaktions-ID**, um die Nummer der Bargeldbuchungen im Steuererfassungsdienst zu identifizieren</span><span class="sxs-lookup"><span data-stu-id="5af33-331">**Transaction ID** field, which identifies the number of the cash transaction in the fiscal registration service</span></span>
        - <span data-ttu-id="5af33-332">**Transaktionsstartdatum** Feld</span><span class="sxs-lookup"><span data-stu-id="5af33-332">**Transaction start date time** field</span></span>
        - <span data-ttu-id="5af33-333">**Transaktionsenddatum** Feld</span><span class="sxs-lookup"><span data-stu-id="5af33-333">**Transaction end date time** field</span></span>
        - <span data-ttu-id="5af33-334">Feld **Seriennummer des Sicherheitselements**</span><span class="sxs-lookup"><span data-stu-id="5af33-334">**Serial number of the security element** field</span></span>
        - <span data-ttu-id="5af33-335">**Signaturzähler** Feld</span><span class="sxs-lookup"><span data-stu-id="5af33-335">**Signature counter** field</span></span>
        - <span data-ttu-id="5af33-336">**Wert prüfen** Feld</span><span class="sxs-lookup"><span data-stu-id="5af33-336">**Check value** field</span></span>
        - <span data-ttu-id="5af33-337">Feld **QR-Code**, das verwendet wird, um den Verweis auf die erfasste Bargeldbuchung in der Form eines QR-Codes zu drucken</span><span class="sxs-lookup"><span data-stu-id="5af33-337">**QR Code** field, which is used to print the reference to the registered cash transaction in the form of a QR code</span></span>

    - <span data-ttu-id="5af33-338">Das Feld **Info Nachricht** auf den Belegen zeigt eine Benachrichtigungsnachricht des Steuerregistrierungsdienstes.</span><span class="sxs-lookup"><span data-stu-id="5af33-338">**Info message** field, so that notification messages from the fiscal registration service can be shown on receipts.</span></span> <span data-ttu-id="5af33-339">Wenn beispielsweise ein Signaturgerät defekt ist, kann ein spezieller Text auf eine Quittung gedruckt werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-339">For example, if a signature device is broken, special text can be printed on a receipt.</span></span>

<span data-ttu-id="5af33-340">Weitere Informationen zum Arbeiten mit Belegformaten finden Sie unter [Einrichten und Entwerfen von Bonformaten](../receipt-templates-printing.md).</span><span class="sxs-lookup"><span data-stu-id="5af33-340">For more information about how to work with receipt formats, see [Set up and design receipt formats](../receipt-templates-printing.md).</span></span>

### <a name="configure-fiscal-integration"></a><span data-ttu-id="5af33-341">Steuerintegration konfigurieren</span><span class="sxs-lookup"><span data-stu-id="5af33-341">Configure fiscal integration</span></span>

<span data-ttu-id="5af33-342">Schließen Sie die Schritte zur Einrichtung der steuerlichen Integration ab, wie unter [Einrichtung der steuerlichen Integration für Commerce-Kanäle](setting-up-fiscal-integration-for-retail-channel.md) beschrieben sind:</span><span class="sxs-lookup"><span data-stu-id="5af33-342">Set up the fiscal integration by completing the following steps that are described in [Set up the fiscal integration for Commerce channels](setting-up-fiscal-integration-for-retail-channel.md):</span></span>

  1. <span data-ttu-id="5af33-343">[Richten Sie einen Steuererfassungsprozesses ein](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="5af33-343">[Set up a fiscal registration process](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span> <span data-ttu-id="5af33-344">Beachten Sie bitte auch die Einstellungen für den Steuererfassungsprozess, die [für dieses Steuererfassungsdienst-Integrationsbeispiel spezifisch sind](#set-up-the-registration-process).</span><span class="sxs-lookup"><span data-stu-id="5af33-344">Also note the settings for the fiscal registration process that are [specific to this fiscal registration service integration sample](#set-up-the-registration-process).</span></span>
  2. <span data-ttu-id="5af33-345">[Legen Sie Einstellungen zur Fehlerbehandlung fest](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="5af33-345">[Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

> [!WARNING]
> <span data-ttu-id="5af33-346">Die Fehlerbehandlungsfunktionen des Rahmens für die steuerliche Integration sind möglicherweise nicht vollständig an die örtlichen steuerlichen Vorschriften angepasst.</span><span class="sxs-lookup"><span data-stu-id="5af33-346">The error handling capabilities of the fiscal integration framework might be not fully aligned with the local fiscal regulations.</span></span>
>
> - <span data-ttu-id="5af33-347">Wir empfehlen Ihnen, die Option **Fahren Sie mit dem Fehler fort** auf der **Steuerlicher Registrierungsprozess** zu verlassen, da alle Transaktionen korrekt registriert werden müssen, auch wenn der erste Versuch der Steuerregistrierung nicht erfolgreich war.</span><span class="sxs-lookup"><span data-stu-id="5af33-347">We recommend that you leave the **Continue on error** option on the **Fiscal registration process** page turned off, because all transactions must be correctly registered, even if the first attempt at fiscal registration wasn't successful.</span></span>
> - <span data-ttu-id="5af33-348">Bevor Sie die Option **Überspringen** oder **Als registriert markieren** auf der Seite **Steuerlicher Registrierungsprozess** aktivieren, sollten Sie diese Änderungen des Steuerregistrierungsprozesses mit Ihrem Steuerberater oder dem örtlichen Finanzamt besprechen.</span><span class="sxs-lookup"><span data-stu-id="5af33-348">Before you turn on the **Skip** or **Mark as registered** option on the **Fiscal registration process** page, you should discuss these changes to the fiscal registration process with your tax consultant or the local tax office.</span></span>

  3. <span data-ttu-id="5af33-349">[Aktivieren Sie manuelle Ausführung der verschobenen steuerlichen Erfassung](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span><span class="sxs-lookup"><span data-stu-id="5af33-349">[Enable manual execution of postponed fiscal registration](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span></span>

## <a name="deployment-guidelines-for-cash-registers-for-germany"></a><span data-ttu-id="5af33-350">Bereitstellungsrichtlinien für Kassen für Deutschland</span><span class="sxs-lookup"><span data-stu-id="5af33-350">Deployment guidelines for cash registers for Germany</span></span>

<span data-ttu-id="5af33-351">Das Steuererfassungsdienst-Integrationsbeispiel für Deutschland ist Teil des Retail SDK.</span><span class="sxs-lookup"><span data-stu-id="5af33-351">The fiscal registration service integration sample for Germany is part of the Retail SDK.</span></span> <span data-ttu-id="5af33-352">Mehr Informationen zur Installation und Verwendung des Retail SDK finden Sie in der [Retail Software Development Kit (SDK)-Architektur](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5af33-352">For more information about how to install and use the Retail SDK, see the [Retail software development kit (SDK) architecture](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span></span>

<span data-ttu-id="5af33-353">Dieses Beispiel besteht aus Erweiterungen für die Commerce Runtime (CRT) und Hardwarestation.</span><span class="sxs-lookup"><span data-stu-id="5af33-353">This sample consists of extensions for the Commerce runtime (CRT) and Hardware station.</span></span> <span data-ttu-id="5af33-354">Um dieses Beispiel auszuführen, müssen Sie die CRT und Hardwarestation-Projekte ändern und erstellen.</span><span class="sxs-lookup"><span data-stu-id="5af33-354">To run this sample, you must modify and build the CRT and Hardware station projects.</span></span> <span data-ttu-id="5af33-355">Es wird empfohlen, dass Sie ein unverändertes Retail SDK verwenden, um die Änderungen vorzunehmen, die in diesem Thema beschrieben werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-355">We recommend that you use an unmodified Retail SDK to make the changes that are described in this topic.</span></span> <span data-ttu-id="5af33-356">Es wird außerdem empfohlen, dass Sie ein Quellsteuerungssystem verwenden, wie Azure DevOps, bei dem noch keine Dateien geändert wurden.</span><span class="sxs-lookup"><span data-stu-id="5af33-356">We also recommend that you use a source control system, such as Azure DevOps, where no files have been changed yet.</span></span>

<span data-ttu-id="5af33-357">Gehen Sie folgendermaßen vor, um eine Entwicklungsumgebung einzurichten, damit Sie das Beispiel testen und erweitern können.</span><span class="sxs-lookup"><span data-stu-id="5af33-357">Follow these steps to set up a development environment so that you can test and extend the sample.</span></span>

### <a name="enable-crt-extensions"></a><span data-ttu-id="5af33-358">Aktivieren der CRT Erweiterungen</span><span class="sxs-lookup"><span data-stu-id="5af33-358">Enable CRT extensions</span></span>

<span data-ttu-id="5af33-359">Die CRT-Erweiterungskomponenten sind in den CRT-Beispielen enthalten.</span><span class="sxs-lookup"><span data-stu-id="5af33-359">The CRT extension components are included in the CRT samples.</span></span> <span data-ttu-id="5af33-360">Um die folgenden Prozeduren abzuschließen, öffnen Sie die CRT-Lösung, **CommerceRuntimeSamples.sln**, unter **RetailSdk\\SampleExtensions\\CommerceRuntime**.</span><span class="sxs-lookup"><span data-stu-id="5af33-360">To complete the following procedures, open the CRT solution, **CommerceRuntimeSamples.sln**, under **RetailSdk\\SampleExtensions\\CommerceRuntime**.</span></span>

#### <a name="documentproviderefrsample-component"></a><span data-ttu-id="5af33-361">DocumentProvider.EFRSample-Komponente</span><span class="sxs-lookup"><span data-stu-id="5af33-361">DocumentProvider.EFRSample component</span></span>

1. <span data-ttu-id="5af33-362">Suchen Sie das Projekt **Runtime.Extensions.DocumentProvider.EFRSample**, und erstellen Sie es.</span><span class="sxs-lookup"><span data-stu-id="5af33-362">Find the **Runtime.Extensions.DocumentProvider.EFRSample** project, and build it.</span></span>
2. <span data-ttu-id="5af33-363">Im Ordner **Runtime.Extensions.DocumentProvider.EFRSample\\bin\\Debug** suchen Sie die Assembly-Datei **Contoso.Commerce.Runtime.DocumentProvider.EFRSample.dll**.</span><span class="sxs-lookup"><span data-stu-id="5af33-363">In the **Runtime.Extensions.DocumentProvider.EFRSample\\bin\\Debug** folder, find the **Contoso.Commerce.Runtime.DocumentProvider.EFRSample.dll** assembly file.</span></span>
3. <span data-ttu-id="5af33-364">Kopieren Sie die Assemblydatei in den CRT-Erweiterungsordner:</span><span class="sxs-lookup"><span data-stu-id="5af33-364">Copy the assembly file to the CRT extensions folder:</span></span>

    - <span data-ttu-id="5af33-365">**Commerce Scale Unit** Kopieren Sie die Assembly in den Ordner **\\bin\\ext** unter dem Microsoft Internet Information Services (IIS) Commerce Scale Unit Standort.</span><span class="sxs-lookup"><span data-stu-id="5af33-365">**Commerce Scale Unit:** Copy the assembly to the **\\bin\\ext** folder under the Internet Information Services (IIS) Commerce Scale Unit site location.</span></span>
    - <span data-ttu-id="5af33-366">**Lokales CRT i Modern POS:** Kopieren Sie die Assembly in den Ordner **\\ext** unter dem lokalen CRT-Clientbroker-Speicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-366">**Local CRT on Modern POS:** Copy the assembly to the **\\ext** folder under the local CRT client broker location.</span></span>

4. <span data-ttu-id="5af33-367">Suchen Sie die Erweiterungskonfigurationsdatei für CRT:</span><span class="sxs-lookup"><span data-stu-id="5af33-367">Find the extension configuration file for CRT:</span></span>

    - <span data-ttu-id="5af33-368">**Commerce-Skalierungseinheit:** Die Datei hat den Namen **commerceruntime.ext.config**, und sie befindet sich im Ordner **bin\\ext** unter dem IIS Commerce-Skalierungseinheit-Websitespeicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-368">**Commerce Scale Unit:** The file is named **commerceruntime.ext.config**, and it's in the **bin\\ext** folder under the IIS Commerce Scale Unit site location.</span></span>
    - <span data-ttu-id="5af33-369">**Lokales CRT in Modern POS:** Die Datei hat den Namen **CommerceRuntime.MPOSOffline.Ext.config**, und sie befindet sich unter dem lokalen CRT-Clientbroker-Speicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-369">**Local CRT on Modern POS:** The file is named **CommerceRuntime.MPOSOffline.Ext.config**, and it's under the local CRT client broker location.</span></span>

5. <span data-ttu-id="5af33-370">Erfassen Sie die CRT-Änderung in der Erweiterungskonfigurationsdatei:</span><span class="sxs-lookup"><span data-stu-id="5af33-370">Register the CRT change in the extension configuration file:</span></span>

    ``` xml
    <add source="assembly" value="Contoso.Commerce.Runtime.DocumentProvider.EFRSample" />
    ```

#### <a name="documentproviderdatamodelefr-component"></a><span data-ttu-id="5af33-371">DocumentProvider.DataModelEFR-Komponente</span><span class="sxs-lookup"><span data-stu-id="5af33-371">DocumentProvider.DataModelEFR component</span></span>

1. <span data-ttu-id="5af33-372">Suchen Sie das Projekt **Runtime.Extensions.DocumentProvider.DataModelEFR**, und erstellen Sie es.</span><span class="sxs-lookup"><span data-stu-id="5af33-372">Find the **Runtime.Extensions.DocumentProvider.DataModelEFR** project, and build it.</span></span>
2. <span data-ttu-id="5af33-373">Im Ordner **Runtime.Extensions.DocumentProvider.DataModelEFR\\bin\\Debug** suchen Sie die Assembly-Datei **Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll**.</span><span class="sxs-lookup"><span data-stu-id="5af33-373">In the **Runtime.Extensions.DocumentProvider.DataModelEFR\\bin\\Debug** folder, find the **Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll** assembly file.</span></span>
3. <span data-ttu-id="5af33-374">Kopieren Sie die Assemblydatei in den CRT-Erweiterungsordner:</span><span class="sxs-lookup"><span data-stu-id="5af33-374">Copy the assembly file to the CRT extensions folder:</span></span>

    - <span data-ttu-id="5af33-375">**Commerce-Skalierungseinheit:** Kopieren Sie die Assembly in den Ordner **\\bin\\ext** unter dem IIS Commerce-Skalierungseinheit-Websitespeicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-375">**Commerce Scale Unit:** Copy the assembly to the **\\bin\\ext** folder under the IIS Commerce Scale Unit site location.</span></span>
    - <span data-ttu-id="5af33-376">**Lokales CRT i Modern POS:** Kopieren Sie die Assembly in den Ordner **\\ext** unter dem lokalen CRT-Clientbroker-Speicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-376">**Local CRT on Modern POS:** Copy the assembly to the **\\ext** folder under the local CRT client broker location.</span></span>

4. <span data-ttu-id="5af33-377">Suchen Sie die Erweiterungskonfigurationsdatei für CRT:</span><span class="sxs-lookup"><span data-stu-id="5af33-377">Find the extension configuration file for CRT:</span></span>

    - <span data-ttu-id="5af33-378">**Commerce-Skalierungseinheit:** Die Datei hat den Namen **commerceruntime.ext.config**, und sie befindet sich im Ordner **bin\\ext** unter dem IIS Commerce-Skalierungseinheit-Websitespeicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-378">**Commerce Scale Unit:** The file is named **commerceruntime.ext.config**, and it's in the **bin\\ext** folder under the IIS Commerce Scale Unit site location.</span></span>
    - <span data-ttu-id="5af33-379">**Lokales CRT in Modern POS:** Die Datei hat den Namen **CommerceRuntime.MPOSOffline.Ext.config**, und sie befindet sich unter dem lokalen CRT-Clientbroker-Speicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-379">**Local CRT on Modern POS:** The file is named **CommerceRuntime.MPOSOffline.Ext.config**, and it's under the local CRT client broker location.</span></span>

5. <span data-ttu-id="5af33-380">Erfassen Sie die CRT-Änderung in der Erweiterungskonfigurationsdatei.</span><span class="sxs-lookup"><span data-stu-id="5af33-380">Register the CRT change in the extension configuration file.</span></span>

    ``` xml
    <add source="assembly" value="Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR" />
    ```

#### <a name="update-the-extension-configuration-file"></a><span data-ttu-id="5af33-381">Die Erweiterungskonfigurationsdatei aktualisieren</span><span class="sxs-lookup"><span data-stu-id="5af33-381">Update the extension configuration file</span></span>

1. <span data-ttu-id="5af33-382">Suchen Sie die Erweiterungskonfigurationsdatei für CRT:</span><span class="sxs-lookup"><span data-stu-id="5af33-382">Find the extension configuration file for CRT:</span></span>

    - <span data-ttu-id="5af33-383">**Commerce-Skalierungseinheit:** Die Datei hat den Namen **commerceruntime.ext.config**, und sie befindet sich im Ordner **bin\\ext** unter dem IIS Commerce-Skalierungseinheit-Websitespeicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-383">**Commerce Scale Unit:** The file is named **commerceruntime.ext.config**, and it's in the **bin\\ext** folder under the IIS Commerce Scale Unit site location.</span></span>
    - <span data-ttu-id="5af33-384">**Lokales CRT in Modern POS:** Die Datei hat den Namen **CommerceRuntime.MPOSOffline.Ext.config**, und sie befindet sich unter dem lokalen CRT-Clientbroker-Speicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-384">**Local CRT on Modern POS:** The file is named **CommerceRuntime.MPOSOffline.Ext.config**, and it's under the local CRT client broker location.</span></span>

2. <span data-ttu-id="5af33-385">Erfassen Sie die CRT-Änderung in der Erweiterungskonfigurationsdatei.</span><span class="sxs-lookup"><span data-stu-id="5af33-385">Register the CRT change in the extension configuration file.</span></span>

    ``` xml
    <add source="assembly" value="Microsoft.Dynamics.Commerce.Runtime.ReceiptsGermany" />
    ```

### <a name="enable-hardware-station-extensions"></a><span data-ttu-id="5af33-386">Hardware station-Erweiterungen aktivieren</span><span class="sxs-lookup"><span data-stu-id="5af33-386">Enable Hardware station extensions</span></span>

<span data-ttu-id="5af33-387">Die Hardware station-Erweiterungskomponenten sind in den Hardware station-Beispielen enthalten.</span><span class="sxs-lookup"><span data-stu-id="5af33-387">The Hardware station extension components are included in the Hardware station samples.</span></span> <span data-ttu-id="5af33-388">Um die folgenden Prozeduren abzuschließen, öffnen Sie die Lösung **HardwareStationSamples.sln.sln** unter **RetailSdk\\SampleExtensions\\HardwareStation**.</span><span class="sxs-lookup"><span data-stu-id="5af33-388">To complete the following procedures, open the solution **HardwareStationSamples.sln.sln** under **RetailSdk\\SampleExtensions\\HardwareStation**.</span></span>

#### <a name="efrsample-component"></a><span data-ttu-id="5af33-389">EFRSample-Komponente</span><span class="sxs-lookup"><span data-stu-id="5af33-389">EFRSample component</span></span>

1. <span data-ttu-id="5af33-390">Suchen Sie das Projekt **HardwareStation.Extension.EFRSample**, und erstellen Sie es.</span><span class="sxs-lookup"><span data-stu-id="5af33-390">Find the **HardwareStation.Extension.EFRSample** project, and build it.</span></span>
2. <span data-ttu-id="5af33-391">Im Ordner **Extension.EFRSample\\bin\\Debug** suchen Sie folgende Montage-Dateien:</span><span class="sxs-lookup"><span data-stu-id="5af33-391">In the **Extension.EFRSample\\bin\\Debug** folder, find following assembly files:</span></span>

    - <span data-ttu-id="5af33-392">Contoso.Commerce.HardwareStation.EFRSample.dll</span><span class="sxs-lookup"><span data-stu-id="5af33-392">Contoso.Commerce.HardwareStation.EFRSample.dll</span></span>
    - <span data-ttu-id="5af33-393">Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll</span><span class="sxs-lookup"><span data-stu-id="5af33-393">Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll</span></span>

3. <span data-ttu-id="5af33-394">Kopieren Sie die Assembly-Dateien in den Hardware stations-Erweiterungsordner:</span><span class="sxs-lookup"><span data-stu-id="5af33-394">Copy the assembly files to the Hardware station extensions folder:</span></span>

    - <span data-ttu-id="5af33-395">**Freigegebene Hardware station:** Kopieren Sie die Dateien in den Ordner **Lagerfach** unter dem IIS Hardware stations-Websitespeicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-395">**Shared hardware station:** Copy the files to the **bin** folder under the IIS Hardware station site location.</span></span>
    - <span data-ttu-id="5af33-396">**Dedizierte Hardware station auf Modern POS:** Kopieren Sie die Dateien zum Modern POS-Client-Broker-Speicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-396">**Dedicated hardware station on Modern POS:** Copy the files to the Modern POS client broker location.</span></span>

4. <span data-ttu-id="5af33-397">Suchen Sie die Erweiterungskonfigurationsdatei für die Erweiterungen der Hardware station.</span><span class="sxs-lookup"><span data-stu-id="5af33-397">Find the extension configuration file for the Hardware station's extensions.</span></span> <span data-ttu-id="5af33-398">Die Datei hat den Namen **HardwareStation.Extension.config**.</span><span class="sxs-lookup"><span data-stu-id="5af33-398">The file is named **HardwareStation.Extension.config**.</span></span>

    - <span data-ttu-id="5af33-399">**Freigegebene Hardware station:** Die Datei befindet sich unter dem IIS Hardware station-Websitespeicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-399">**Shared hardware station:** The file is located under the IIS Hardware station site location.</span></span>
    - <span data-ttu-id="5af33-400">**Dedizierte Hardware station auf Modern POS:** Die Datei befindet sich unter dem Modern POS-Client-Broker-Speicherort.</span><span class="sxs-lookup"><span data-stu-id="5af33-400">**Dedicated hardware station on Modern POS:** The file is located under the Modern POS client broker location.</span></span>

5. <span data-ttu-id="5af33-401">Fügen Sie die folgende Position zum Abschnitt **Anordnung** der Konfigurationsdatei hinzu.</span><span class="sxs-lookup"><span data-stu-id="5af33-401">Add the following line to the **composition** section of the configuration file.</span></span>

    ``` xml
    <add source="assembly" value="Contoso.Commerce.HardwareStation.EFRSample.dll" />
    ```

### <a name="set-up-the-registration-process"></a><span data-ttu-id="5af33-402">Den Erfassungsprozess einrichten</span><span class="sxs-lookup"><span data-stu-id="5af33-402">Set up the registration process</span></span>

<span data-ttu-id="5af33-403">Um den Erfassungsprozess zu aktivieren, führen Sie diese Schritte aus, um die Commerce Zentralverwaltung einzurichten.</span><span class="sxs-lookup"><span data-stu-id="5af33-403">To enable the registration process, follow these steps to set up Commerce Headquarters.</span></span> <span data-ttu-id="5af33-404">Weitere Einzelheiten finden Sie unter [Steuerliche Integration für Commerce-Kanäle einrichten](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="5af33-404">For more details, see [Set up the fiscal integration for Commerce channels](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span>

1. <span data-ttu-id="5af33-405">Gehen Sie zu **Retail und Commerce \> Zentralverwaltungseinrichtung \> Parameter \> Gemeinsame Commerce-Parameter**.</span><span class="sxs-lookup"><span data-stu-id="5af33-405">Go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="5af33-406">Auf der Registerkarte **Allgemein** legen Sie die Option **Steuerintegration aktivieren** auf **Ja** fest.</span><span class="sxs-lookup"><span data-stu-id="5af33-406">On the **General** tab, set the **Enable fiscal integration** option to **Yes**.</span></span>
2. <span data-ttu-id="5af33-407">Gehen Sie zu **Retail und Commerce \> Kanaleinrichtung \> Steuerintegration \> Steuerkonnektoren**, und laden Sie die Konnektorkonfiguration.</span><span class="sxs-lookup"><span data-stu-id="5af33-407">Go to **Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal connectors**, and load the connector configuration.</span></span> <span data-ttu-id="5af33-408">Der Dateispeicherort ist **RetailSdk\\SampleExtensions\\HardwareStation\\Extension.EFRSample\\Configuration\\ConnectorEFRSample.xml**.</span><span class="sxs-lookup"><span data-stu-id="5af33-408">The file location is **RetailSdk\\SampleExtensions\\HardwareStation\\Extension.EFRSample\\Configuration\\ConnectorEFRSample.xml**.</span></span>
3. <span data-ttu-id="5af33-409">Wechseln Sie zu **Retail and Commerce \> Kanaleinrichtung \> Steuerintegration \> Steuerdokumentanbieter**, und laden Sie die Dokumentanbieterkonfigurationen.</span><span class="sxs-lookup"><span data-stu-id="5af33-409">Go to **Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal document providers**, and load the document provider configurations.</span></span> <span data-ttu-id="5af33-410">Die Konfigurationsdateien befinden sich unter **RetailSdk\\SampleExtensions\\CommerceRuntime\\Extensions.DocumentProvider.EFRSample\\Configuration\\DocumentProviderFiscalEFRSampleGermany.xml**.</span><span class="sxs-lookup"><span data-stu-id="5af33-410">The configuration file is **RetailSdk\\SampleExtensions\\CommerceRuntime\\Extensions.DocumentProvider.EFRSample\\Configuration\\DocumentProviderFiscalEFRSampleGermany.xml**.</span></span>
4. <span data-ttu-id="5af33-411">Wechseln Sie zu **Retail und Commerce \> Kanaleinrichtung \> Steuerintegration \> Konnektorfunktionsprofile**.</span><span class="sxs-lookup"><span data-stu-id="5af33-411">Go to **Retail and Commerce \> Channel setup \> Fiscal integration \> Connector functional profiles**.</span></span> <span data-ttu-id="5af33-412">Erstellen Sie ein neues funktionales Konnektorprofil, und wählen Sie den Dokumentanbieter und den Konnektor aus, den Sie vorher geladen haben.</span><span class="sxs-lookup"><span data-stu-id="5af33-412">Create a new connector functional profile, and select the document provider and the connector that you loaded earlier.</span></span> <span data-ttu-id="5af33-413">Aktualisieren Sie die Datenzuordnungseinstellungen nach Bedarf.</span><span class="sxs-lookup"><span data-stu-id="5af33-413">Update the data mapping settings as required.</span></span>

    > [!NOTE]
    > <span data-ttu-id="5af33-414">Standardmäßig ist die **Kundendaten einschließen** Option auf **Ja** festgelegt.</span><span class="sxs-lookup"><span data-stu-id="5af33-414">By default, the **Include customer data** option is set to **Yes**.</span></span> <span data-ttu-id="5af33-415">Wenn Sie nicht möchten, dass Kundeninformationen wie Namen und Adressen an den Steuerregistrierungsdienst gesendet werden, können Sie die Einstellung auf **Nein** ändern.</span><span class="sxs-lookup"><span data-stu-id="5af33-415">If you don't want customer information such as names and addresses to be sent to the fiscal registration service, you can change the setting to **No**.</span></span>

5. <span data-ttu-id="5af33-416">Wechseln Sie zu **Retail und Commerce \> Kanaleinrichtung \> Steuerintegration \> Technische Profile des Connectors**.</span><span class="sxs-lookup"><span data-stu-id="5af33-416">Go to **Retail and Commerce \> Channel setup \> Fiscal integration \> Connector technical profiles**.</span></span> <span data-ttu-id="5af33-417">Erstellen Sie ein neues technisches Konnektorprofil, und wählen Sie den Konnektor aus, den Sie vorher geladen haben.</span><span class="sxs-lookup"><span data-stu-id="5af33-417">Create a new connector technical profile, and select the connector that you loaded earlier.</span></span> <span data-ttu-id="5af33-418">Aktualisieren Sie die Verbindungseinstellungen nach Bedarf.</span><span class="sxs-lookup"><span data-stu-id="5af33-418">Update the connection settings as required.</span></span>

    > [!WARNING]
    > <span data-ttu-id="5af33-419">Standardmäßig ist der **Steuerregistrierungsbenachrichtigungen anzeigen** Parameter eingeschaltet.</span><span class="sxs-lookup"><span data-stu-id="5af33-419">By default, the **Show fiscal registration notifications** parameter is turned on.</span></span> <span data-ttu-id="5af33-420">Wir empfehlen, dass Sie es aktiviert lassen, da der Steuerregistrierungsdienst Benachrichtigungen über bestimmte Fehler sendet, die bei der Steuerregistrierung auftreten können (z. B. wurde eine Transaktion zum Zeitpunkt der Registrierung nicht signiert).</span><span class="sxs-lookup"><span data-stu-id="5af33-420">We recommend that you leave it turned on, because the fiscal registration service sends notifications about some specific errors that might occur during fiscal registration (for example, a transaction wasn't signed at the moment of registration).</span></span>

6. <span data-ttu-id="5af33-421">Wechseln Sie zu **Retail und Commerce \> Kanaleinrichtung \> Steuerintegration \> Steuerkonnektorgruppen**.</span><span class="sxs-lookup"><span data-stu-id="5af33-421">Go to **Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal connector groups**.</span></span> <span data-ttu-id="5af33-422">Erstellen Sie eine neue Steuerkonnektorgruppen für das funktionale Konnektorfunktionsprofil, das Sie vorher erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="5af33-422">Create a new fiscal connector group for the connector functional profile that you created earlier.</span></span>
7. <span data-ttu-id="5af33-423">Wechseln Sie zu **Retail und Commerce \> Kanaleinrichtung \> Steuerintegration \> Steuererfassungsprozesse**.</span><span class="sxs-lookup"><span data-stu-id="5af33-423">Go to **Retail and Commerce \> Channel setup \> Fiscal integration \> Fiscal registration processes**.</span></span> <span data-ttu-id="5af33-424">Erstellen Sie einen neuen Steuererfassungsprozess, zwei Steuererfassungsprozess-Schritte, und wählen Sie die Steuerkonnektorgruppe aus, die Sie vorher erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="5af33-424">Create a new fiscal registration process, create a fiscal registration process step, and select the fiscal connector group that you created earlier.</span></span>
8. <span data-ttu-id="5af33-425">Gehen Sie zu **Retail und Commerce \> Kanaleinrichtung \> POS-Einrichtung \> POS-Profile \> Funktionsprofile**.</span><span class="sxs-lookup"><span data-stu-id="5af33-425">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**.</span></span> <span data-ttu-id="5af33-426">Wählen Sie ein Funktionsprofil aus, das mit dem Einzelhandelsgeschäft verbunden ist, wo der Erfassungsprozess aktiviert werden soll.</span><span class="sxs-lookup"><span data-stu-id="5af33-426">Select a functionality profile that is linked to the store where the registration process should be activated.</span></span> <span data-ttu-id="5af33-427">Im Inforegister **Steuererfassungsprozess** aktivieren Sie den Steuererfassungsprozess, den Sie vorher erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="5af33-427">On the **Fiscal registration process** FastTab, select the fiscal registration process that you created earlier.</span></span>
9. <span data-ttu-id="5af33-428">Wechseln Sie zu **Retail und Commerce \> Kanaleinrichtung \> POS-Einrichtung \> POS-Profile \> Hardwareprofile**.</span><span class="sxs-lookup"><span data-stu-id="5af33-428">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Hardware profiles**.</span></span> <span data-ttu-id="5af33-429">Wählen Sie ein Hardwareprofil aus, das mit der Hardware station verknüpft ist, mit der der Belegdrucker verbunden wird.</span><span class="sxs-lookup"><span data-stu-id="5af33-429">Select a hardware profile that is linked to the Hardware station that the fiscal printer will be connected to.</span></span> <span data-ttu-id="5af33-430">Im Inforegister **Peripheriegeräte für die Steuerverwaltung** aktivieren Sie das technische Konnektorprofil, das Sie vorher erstellt haben.</span><span class="sxs-lookup"><span data-stu-id="5af33-430">On the **Fiscal peripherals** FastTab, select the connector technical profile that you created earlier.</span></span>
10. <span data-ttu-id="5af33-431">Gehen Sie zu **Retail und Commerce \> Retail und Commerce IT \> Vertriebsplan**, und wählen Sie Jobs **1070** und **1090** ausführen, um Daten zur Kanaldatenbank zu übertragen.</span><span class="sxs-lookup"><span data-stu-id="5af33-431">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**, and run jobs **1070** and **1090** to transfer data to the channel database.</span></span>

### <a name="production-environment"></a><span data-ttu-id="5af33-432">Produktionsumgebung</span><span class="sxs-lookup"><span data-stu-id="5af33-432">Production environment</span></span>

<span data-ttu-id="5af33-433">In der vorherigen Prozedur aktivieren Sie die Erweiterungen, die Komponenten des Steuererfassungsdienst-Integrationsbeispiels sind.</span><span class="sxs-lookup"><span data-stu-id="5af33-433">In the previous procedure, you enabled the extensions that are components of the fiscal registration service integration sample.</span></span> <span data-ttu-id="5af33-434">Darüber hinaus müssen Sie diese Schritte ausführen, um bereitstellbare Pakete zu erstellen, die Commerce-Komponenten enthalten, und diese Pakete in einer Produktionsumgebung anzuwenden.</span><span class="sxs-lookup"><span data-stu-id="5af33-434">In addition, you must follow these steps to create deployable packages that contain Commerce components, and to apply those packages in a production environment.</span></span>

1. <span data-ttu-id="5af33-435">Nehmen Sie die folgenden Änderungen in den Paketkonfigurationsdateien unter dem Ordner **RetailSdk\\Assets** vor:</span><span class="sxs-lookup"><span data-stu-id="5af33-435">Make the following changes in the package configuration files under the **RetailSdk\\Assets** folder:</span></span>

    - <span data-ttu-id="5af33-436">In den Konfigurationsdateien **commerceruntime.ext.config** und **CommerceRuntime.MPOSOffline.Ext.config** fügen Sie die folgenden Positionen zum Abschnitt **Anordnung** hinzu.</span><span class="sxs-lookup"><span data-stu-id="5af33-436">In the **commerceruntime.ext.config** and **CommerceRuntime.MPOSOffline.Ext.config** configuration files, add the following lines to the **composition** section.</span></span>

        ``` xml
        <add source="assembly" value="Microsoft.Dynamics.Commerce.Runtime.ReceiptsGermany" />
        <add source="assembly" value="Contoso.Commerce.Runtime.DocumentProvider.EFRSample" />
        <add source="assembly" value="Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR" />
        ```

    - <span data-ttu-id="5af33-437">In der Konfigurationsdatei **HardwareStation.Extension.config** fügen Sie die folgende Zeilen dem Abschnitt **Anordnung** hinzu.</span><span class="sxs-lookup"><span data-stu-id="5af33-437">In the **HardwareStation.Extension.config** configuration file, add the following lines to the **composition** section.</span></span>

        ``` xml
        <add source="assembly" value="Contoso.Commerce.HardwareStation.EFRSample" />
        <add source="assembly" value="Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR" />
        ```

2. <span data-ttu-id="5af33-438">Nehmen Sie die folgenden Änderungen in der Paketanpassungs-Konfigurationsdatei **BuildTools\\Customization.settings** vor:</span><span class="sxs-lookup"><span data-stu-id="5af33-438">Make the following changes in the **BuildTools\\Customization.settings** package customization configuration file:</span></span>

    - <span data-ttu-id="5af33-439">Fügen Sie die folgenden Zeilen hinzu, um die CRT-Erweiterungen in die bereitstellbaren Paketen einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="5af33-439">Add the following lines to include the CRT extensions in the deployable packages.</span></span>

        ``` xml
        <ISV_CommerceRuntime_CustomizableFile Include="$(SdkReferencesPath)\Contoso.Commerce.Runtime.DocumentProvider.EFRSample.dll" />
        <ISV_CommerceRuntime_CustomizableFile Include="$(SdkReferencesPath)\Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll" />
        ```

    - <span data-ttu-id="5af33-440">Fügen Sie die folgende Zeilen hinzu, um die Hardwarestation-Erweiterung in die bereitstellbaren Pakete einzuschließen.</span><span class="sxs-lookup"><span data-stu-id="5af33-440">Add the following lines to include the Hardware station extensions in the deployable packages.</span></span>

        ``` xml
        <ISV_HardwareStation_CustomizableFile Include="$(SdkReferencesPath)\Contoso.Commerce.HardwareStation.EFRSample.dll" />
        <ISV_HardwareStation_CustomizableFile Include="$(SdkReferencesPath)\Contoso.Commerce.Runtime.DocumentProvider.DataModelEFR.dll" />
        ```

3. <span data-ttu-id="5af33-441">Starten Sie die MSBuild-Eingabeaufforderung für Visual Studio-Hilfsprogramm und führen Sie **msbuild** unter dem Ordner Retail SDK aus, um bereitstellbare Pakete zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="5af33-441">Start the MSBuild Command Prompt for Visual Studio utility, and run **msbuild** under the Retail SDK folder to create deployable packages.</span></span>
4. <span data-ttu-id="5af33-442">Übernehmen Sie die Pakete über Microsoft Dynamics Lifecycle Services (LCS) oder manuell.</span><span class="sxs-lookup"><span data-stu-id="5af33-442">Apply the packages via Microsoft Dynamics Lifecycle Services (LCS) or manually.</span></span> <span data-ttu-id="5af33-443">Weitere Informationen finden Sie unter [Bereitstellbare Pakete erstellen](../dev-itpro/retail-sdk/retail-sdk-packaging.md).</span><span class="sxs-lookup"><span data-stu-id="5af33-443">For more information, see [Create deployable packages](../dev-itpro/retail-sdk/retail-sdk-packaging.md).</span></span>
5. <span data-ttu-id="5af33-444">Schließen Sie alle erforderlichen Setupaufgaben ab, die früher im Abschnitt [Commerce für Deutschland einrichten](#set-up-commerce-for-germany) beschrieben sind.</span><span class="sxs-lookup"><span data-stu-id="5af33-444">Complete all the required setup tasks that are described in the [Set up Commerce for Germany](#set-up-commerce-for-germany) section earlier in this topic.</span></span>

## <a name="design-of-extensions"></a><span data-ttu-id="5af33-445">Entwurf von Erweiterungen</span><span class="sxs-lookup"><span data-stu-id="5af33-445">Design of extensions</span></span>

### <a name="crt-extension-design"></a><span data-ttu-id="5af33-446">CRT Erweiterungsentwurf</span><span class="sxs-lookup"><span data-stu-id="5af33-446">CRT extension design</span></span>

<span data-ttu-id="5af33-447">Der Zweck der Erweiterung ist es, dass ein Steuerdokumentanbieter dienstspezifische Dokumente erzeugt und Antworten aus dem Steuererfassungsdienst handhabt.</span><span class="sxs-lookup"><span data-stu-id="5af33-447">The purpose of the extension that is a fiscal document provider is to generate service-specific documents and handle responses from the fiscal registration service.</span></span>

<span data-ttu-id="5af33-448">Die CRT-Erweiterung ist **Runtime.Extensions.DocumentProvider.EFRSample**.</span><span class="sxs-lookup"><span data-stu-id="5af33-448">The CRT extension is **Runtime.Extensions.DocumentProvider.EFRSample**.</span></span> <span data-ttu-id="5af33-449">Weitere Einzelheiten über das Design der Lösung für die steuerliche Integration finden Sie unter [Überblick über die steuerliche Integration für Commerce-Kanäle](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span><span class="sxs-lookup"><span data-stu-id="5af33-449">For more details about the design of the fiscal integration solution, see [Overview of fiscal integration for Commerce channels](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span></span>

#### <a name="request-handler"></a><span data-ttu-id="5af33-450">Anforderungshandler</span><span class="sxs-lookup"><span data-stu-id="5af33-450">Request handler</span></span>

<span data-ttu-id="5af33-451">Es gibt einen Anforderungshandler für den Dokumentanbieter: **DocumentProviderEFRFiscalDEU**.</span><span class="sxs-lookup"><span data-stu-id="5af33-451">There is one request handler for the document provider, **DocumentProviderEFRFiscalDEU**.</span></span> <span data-ttu-id="5af33-452">Dieser Handler wird verwendet, um Steuerdokumente für den Steuererfassungsdienst zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="5af33-452">This handler is used to generate fiscal documents for the fiscal registration service.</span></span> <span data-ttu-id="5af33-453">Er wird von der Oberfläche **INamedRequestHandler** geerbt.</span><span class="sxs-lookup"><span data-stu-id="5af33-453">It's inherited from the **INamedRequestHandler** interface.</span></span> <span data-ttu-id="5af33-454">Die Methode **HandlerName** ist für die Rückgabe des Namens des Handlers zuständig.</span><span class="sxs-lookup"><span data-stu-id="5af33-454">The **HandlerName** method is responsible for returning the name of the handler.</span></span> <span data-ttu-id="5af33-455">Der Handlername sollte mit dem Name des Konnektordokumentanbieters übereinstimmen, der in der Commerce Zentralverwaltung angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="5af33-455">The handler name should match the connector document provider name that is specified in Commerce Headquarters.</span></span>

<span data-ttu-id="5af33-456">Der Konnektor unterstützt die folgenden Anforderungen:</span><span class="sxs-lookup"><span data-stu-id="5af33-456">The connector supports the following requests:</span></span>

- <span data-ttu-id="5af33-457">**GetFiscalDocumentDocumentProviderRequest** – Diese Anforderung enthält Informationen darüber, welches Dokument generiert werden soll.</span><span class="sxs-lookup"><span data-stu-id="5af33-457">**GetFiscalDocumentDocumentProviderRequest** – This request contains information about what document should be generated.</span></span> <span data-ttu-id="5af33-458">Sie gibt ein dienstspezifisches Dokument zurück, dass im Steuererfassungsdienst erfasst werden soll.</span><span class="sxs-lookup"><span data-stu-id="5af33-458">It returns a service-specific document that should be registered in the fiscal registration service.</span></span>
- <span data-ttu-id="5af33-459">**GetFiscalTransactionExtendedDataDocumentProviderRequest** – Diese Anfrage gibt die Antwort zusammen mit erweiterten Daten zurück.</span><span class="sxs-lookup"><span data-stu-id="5af33-459">**GetFiscalTransactionExtendedDataDocumentProviderRequest** – This request returns the response together with extended data.</span></span>

#### <a name="configuration"></a><span data-ttu-id="5af33-460">Variante</span><span class="sxs-lookup"><span data-stu-id="5af33-460">Configuration</span></span>

<span data-ttu-id="5af33-461">Die **DocumentProviderFiscalEFRSampleGermany** Konfigurationsdatei befindet sich im Ordner **Konfiguration** des Erweiterungsprojekts.</span><span class="sxs-lookup"><span data-stu-id="5af33-461">The **DocumentProviderFiscalEFRSampleGermany** configuration file is located in the **Configuration** folder of the extension project.</span></span> <span data-ttu-id="5af33-462">Der Zweck dieser Datei ist es, Einstellungen zu aktivieren, damit der Dokumentanbieter von der Commerce Zentralverwaltung aus konfiguriert werden kann.</span><span class="sxs-lookup"><span data-stu-id="5af33-462">The purpose of this file is to enable settings for the document provider to be configured from Commerce Headquarters.</span></span> <span data-ttu-id="5af33-463">Das Dateiformat wird mit den Anforderungen für die Steuerintegrationskonfiguration ausgerichtet.</span><span class="sxs-lookup"><span data-stu-id="5af33-463">The file format is aligned with the requirements for fiscal integration configuration.</span></span>

<span data-ttu-id="5af33-464">Die folgenden Einstellungen werden hinzugefügt:</span><span class="sxs-lookup"><span data-stu-id="5af33-464">The following settings are added:</span></span>

- <span data-ttu-id="5af33-465">**Zuordnung der Mehrwertsteuersätze** – Die Zuordnung von Steuerprozentsatzwerten, die für die Umsatzsteuerkennzeichen eingerichtet wurden, zu Werten der **TaxG** Attribute (Steuergruppe) in Anforderungen, die an den Finanzdienst gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-465">**VAT rates mapping** – The mapping of tax percentage values that are set up for the sales tax codes to values of the **TaxG** (tax group) attribute in requests that are sent to the fiscal service.</span></span>
- <span data-ttu-id="5af33-466">**Steuergruppe für Geschenkkarten und Einzahlungen** – Der Wert der **TaxG** Attribut in Anfragen, die an den Finanzdienst gesendet werden, basierend auf Vorgängen, die Geschenkkarten oder Einzahlungen beinhalten.</span><span class="sxs-lookup"><span data-stu-id="5af33-466">**Tax group for gift cards and deposits** – The value of the **TaxG** attribute in requests that are sent to the fiscal service, based on operations that involve gift cards or deposits.</span></span>
- <span data-ttu-id="5af33-467">**Ausschreibungstypzuordnung** – Die Zuordnung von Zahlungsmethoden zu Werten der **PayG** Attribute (Zahlungsgruppe) in Anforderungen, die an den Finanzdienst gesendet werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-467">**Tender type mapping** – The mapping of payment methods to values of the **PayG** (payment group) attribute in requests that are sent to the fiscal service.</span></span>
- <span data-ttu-id="5af33-468">**Steuergruppe für Mehrwertsteuer befreit** – Der Wert der **TaxG** Attribute in Anforderungen, die an den Finanzdienst gesendet werden, basierend auf Vorgängen, die von steuerlichen Verpflichtungen befreit sind.</span><span class="sxs-lookup"><span data-stu-id="5af33-468">**Tax group for VAT exempt** – The value of the **TaxG** attribute in requests that are sent to the fiscal service, based on operations that are exempt from tax obligations.</span></span>
- <span data-ttu-id="5af33-469">**Kundendaten einschließen** – Wenn dieser Parameter aktiviert ist, enthalten Anfragen an den Finanzdienst Kundeninformationen wie Namen und Adressen, wenn ein Kunde zu einer Transaktion hinzugefügt wird.</span><span class="sxs-lookup"><span data-stu-id="5af33-469">**Include customer data** – If this parameter is turned on, requests to the fiscal service will contain customer information such as names and addresses in cases where a customer is added to a transaction.</span></span>

### <a name="hardware-station-extension-design"></a><span data-ttu-id="5af33-470">Hardware station-Erweiterungsentwurf</span><span class="sxs-lookup"><span data-stu-id="5af33-470">Hardware station extension design</span></span>

<span data-ttu-id="5af33-471">Der Zweck der Erweiterung, die ein Steuerkonnektor ist, ist die Kommunikation mit dem Steuererfassungsdienst.</span><span class="sxs-lookup"><span data-stu-id="5af33-471">The purpose of the extension that is a fiscal connector is to communicate with the fiscal registration service.</span></span>

<span data-ttu-id="5af33-472">Die Hardware station-Erweiterung ist **HardwareStation.Extension.EFRSample**.</span><span class="sxs-lookup"><span data-stu-id="5af33-472">The Hardware station extension is **HardwareStation.Extension.EFRSample**.</span></span> <span data-ttu-id="5af33-473">Sie verwendet das HTTP-Protokoll, um Dokumente, die die CRT-Erweiterung generiert, zum Steuererfassungsdienst zu übermitteln.</span><span class="sxs-lookup"><span data-stu-id="5af33-473">It uses the HTTP protocol to submit documents that the CRT extension generates to the fiscal registration service.</span></span> <span data-ttu-id="5af33-474">Sie handhabt auch die Antworten, die vom Steuererfassungsdienst empfangen werden.</span><span class="sxs-lookup"><span data-stu-id="5af33-474">It also handles the responses that are received from the fiscal registration service.</span></span>

#### <a name="request-handler"></a><span data-ttu-id="5af33-475">Anforderungshandler</span><span class="sxs-lookup"><span data-stu-id="5af33-475">Request handler</span></span>

<span data-ttu-id="5af33-476">Der Anforderungshandler **EFRHandler** ist der Einstiegspunkt für die Handhabung von Anforderungen an den Steuererfassungsdienst.</span><span class="sxs-lookup"><span data-stu-id="5af33-476">The **EFRHandler** request handler is the entry point for handling requests to the fiscal registration service.</span></span> <span data-ttu-id="5af33-477">Dieser Handler wird von der Oberfläche **INamedRequestHandler** geerbt.</span><span class="sxs-lookup"><span data-stu-id="5af33-477">This handler is inherited from the **INamedRequestHandler** interface.</span></span> <span data-ttu-id="5af33-478">Die Methode **HandlerName** ist für die Rückgabe des Namens des Handlers zuständig.</span><span class="sxs-lookup"><span data-stu-id="5af33-478">The **HandlerName** method is responsible for returning the name of the handler.</span></span> <span data-ttu-id="5af33-479">Der Handlername sollte mit dem Name des Steuerkonnektors übereinstimmen, der in der Commerce Zentralverwaltung angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="5af33-479">The handler name should match the fiscal connector name that is specified in Commerce Headquarters.</span></span>

<span data-ttu-id="5af33-480">Der Konnektor unterstützt die folgenden Anforderungen:</span><span class="sxs-lookup"><span data-stu-id="5af33-480">The connector supports the following requests:</span></span>

- <span data-ttu-id="5af33-481">**SubmitDocumentFiscalDeviceRequest** – Diese Anforderung sendet Dokumente an den Steuererfassungsdienst und gibt eine Antwort von ihm zurück.</span><span class="sxs-lookup"><span data-stu-id="5af33-481">**SubmitDocumentFiscalDeviceRequest** – This request sends documents to the fiscal registration service and returns a response from it.</span></span>
- <span data-ttu-id="5af33-482">**IsReadyFiscalDeviceRequest** – Diese Anforderung wird für eine Integritätsprüfung des Steuererfassungsdiensts verwendet.</span><span class="sxs-lookup"><span data-stu-id="5af33-482">**IsReadyFiscalDeviceRequest** – This request is used for a health check of the fiscal registration service.</span></span>
- <span data-ttu-id="5af33-483">**InitializeFiscalDeviceRequest** – Diese Anforderung wird für Initialisierung des Steuererfassungsdiensts verwendet.</span><span class="sxs-lookup"><span data-stu-id="5af33-483">**InitializeFiscalDeviceRequest** – This request is used to initialize the fiscal registration service.</span></span>

#### <a name="configuration"></a><span data-ttu-id="5af33-484">Variante</span><span class="sxs-lookup"><span data-stu-id="5af33-484">Configuration</span></span>

<span data-ttu-id="5af33-485">Die Konfigurationsdatei befindet sich im Ordner **Konfiguration** des Erweiterungsprojekts.</span><span class="sxs-lookup"><span data-stu-id="5af33-485">The configuration file is located in the **Configuration** folder of the extension project.</span></span> <span data-ttu-id="5af33-486">Der Zweck dieser Datei ist es, Einstellungen zu aktivieren, damit der Steuerkonnektor von der Commerce Zentralverwaltung aus konfiguriert werden kann.</span><span class="sxs-lookup"><span data-stu-id="5af33-486">The purpose of the file is to enable settings for the fiscal connector to be configured from Commerce Headquarters.</span></span> <span data-ttu-id="5af33-487">Das Dateiformat wird mit den Anforderungen für die Steuerintegrationskonfiguration ausgerichtet.</span><span class="sxs-lookup"><span data-stu-id="5af33-487">The file format is aligned with the requirements for fiscal integration configuration.</span></span>

<span data-ttu-id="5af33-488">Die folgenden Einstellungen werden hinzugefügt:</span><span class="sxs-lookup"><span data-stu-id="5af33-488">The following settings are added:</span></span>

- <span data-ttu-id="5af33-489">**Endpunktadresse** – Die URL des Steuererfassungsdiensts.</span><span class="sxs-lookup"><span data-stu-id="5af33-489">**Endpoint address** – The URL of the fiscal registration service.</span></span>
- <span data-ttu-id="5af33-490">**Zeitlimit** – Die Zeitdauer in Millisekunden (ms), die der Treiber auf eine Antwort vom Steuererfassungsdienst wartet.</span><span class="sxs-lookup"><span data-stu-id="5af33-490">**Timeout** – The amount of time, in milliseconds (ms), that the driver will wait for a response from the fiscal registration service.</span></span>
- <span data-ttu-id="5af33-491">**Steuerregistrierungsbenachrichtigungen anzeigen** – Wenn dieser Parameter aktiviert ist, werden Benachrichtigungen vom Finanzdienst als Benutzermeldungen am POS angezeigt.</span><span class="sxs-lookup"><span data-stu-id="5af33-491">**Show fiscal registration notifications** – If this parameter is turned on, notifications from the fiscal service will be shown as user messages at the POS.</span></span>
