---
title: Übersicht über die Steuerintegration für Commerce-Kanäle
description: Dieses Thema bietet einen Überblick der Steuerintegrationsfunktionen, die in Dynamics 365 Commerce verfügbar sind.
author: josaw
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.region: Global
ms.search.industry: Retail
ms.author: epopov
ms.search.validFrom: 2019-1-16
ms.dyn365.ops.version: 10
ms.openlocfilehash: 155056eb3a2acd0d66e0ace8d5558929678cb8e3
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 03/31/2021
ms.locfileid: "5798780"
---
# <a name="overview-of-fiscal-integration-for-commerce-channels"></a><span data-ttu-id="68b2d-103">Übersicht über die Steuerintegration für Commerce-Kanäle</span><span class="sxs-lookup"><span data-stu-id="68b2d-103">Overview of fiscal integration for Commerce channels</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="68b2d-104">Einführung</span><span class="sxs-lookup"><span data-stu-id="68b2d-104">Introduction</span></span>

<span data-ttu-id="68b2d-105">Dieses Thema bietet einen Überblick der Steuerintegrationsfunktionen, die in Dynamics 365 Commerce verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="68b2d-105">This topic is an overview of the fiscal integration capabilities that are available in Dynamics 365 Commerce.</span></span> <span data-ttu-id="68b2d-106">Die Steuerintegration enthält die Integration in unterschiedliche steuerbezogene Geräte und Dienste, die Benutzern die Steuerregistrierung von Verkäufen entsprechend lokaler Steuergesetze zur Verhinderung von Steuerhinterziehung im Einzelhandel ermöglicht.</span><span class="sxs-lookup"><span data-stu-id="68b2d-106">Fiscal integration includes integration with various fiscal devices and services that enable fiscal registration of sales in accordance with local fiscal laws that are aimed at preventing tax fraud in the retail industry.</span></span> <span data-ttu-id="68b2d-107">Nachfolgend einige typische Szenarien, die erfasst werden können, indem die Steuerintegration verwendet wird:</span><span class="sxs-lookup"><span data-stu-id="68b2d-107">Here are some typical scenarios that can be covered by using fiscal integration:</span></span>

- <span data-ttu-id="68b2d-108">Erfassen Sie einen Verkauf auf einem steuerbezogenen Gerät, das mit einem Retail Point of Sale (POS) verbunden ist, z. B. einem Belegdrucker, und drucken Sie einen Steuerbeleg für den Kunden.</span><span class="sxs-lookup"><span data-stu-id="68b2d-108">Register a sale on a fiscal device that is connected to point of sale (POS), such as a fiscal printer, and print a fiscal receipt for the customer.</span></span>
- <span data-ttu-id="68b2d-109">Senden Sie Informationen, die Verkäufen und Rücksendungen zugeordnet sind, die in Retail POS abgeschlossen werden, sicher an einen externen Webdienst, der von der Steuerbehörde betrieben wird.</span><span class="sxs-lookup"><span data-stu-id="68b2d-109">Securely submit information that is related to sales and returns that are completed in Retail POS to an external web-service that is operated by the tax authority.</span></span>
- <span data-ttu-id="68b2d-110">Gewährleisten Sie die Unveränderbarkeit von Verkaufsbuchungsdaten durch digitale Signaturen.</span><span class="sxs-lookup"><span data-stu-id="68b2d-110">Help guarantee inalterability of sales transaction data through digital signatures.</span></span>

<span data-ttu-id="68b2d-111">Die Steuerintegrationsfunktionen sind ein Framework, das eine allgemeine Lösung für die weitere Entwicklung und Anpassung der Integration zwischen Retail POS und steuerbezogenen Geräten und Diensten bereitstellt.</span><span class="sxs-lookup"><span data-stu-id="68b2d-111">The fiscal integration functionality is a framework that provides a common solution for further development and customization of the integration between Retail POS and fiscal devices and services.</span></span> <span data-ttu-id="68b2d-112">Die Funktionalität umfasst auch Beispiele für die fiskalische Integration, die grundlegende Szenarien für bestimmte Länder oder Regionen unterstützen und die mit bestimmten fiskalischen Geräten oder Diensten arbeiten.</span><span class="sxs-lookup"><span data-stu-id="68b2d-112">The functionality also includes fiscal integration samples that support basic scenarios for specific countries or regions, and that work with specific fiscal devices or services.</span></span> <span data-ttu-id="68b2d-113">Ein Steuerintegrationsbeispiel besteht aus mehreren Erweiterungen von Commerce-Komponenten und ist im Software Development Kit (SDK) enthalten.</span><span class="sxs-lookup"><span data-stu-id="68b2d-113">A fiscal integration sample consists of several extensions of Commerce components and is included in the software development kit (SDK).</span></span> <span data-ttu-id="68b2d-114">Weitere Informationen zu Steuerintegrationsbeispielen finden Sie unter [Steuerintegrationsbeispiele im Retail SDK](#fiscal-integration-samples-in-the-retail-sdk).</span><span class="sxs-lookup"><span data-stu-id="68b2d-114">For more information about the fiscal integration samples, see [Fiscal integration samples in the Retail SDK](#fiscal-integration-samples-in-the-retail-sdk).</span></span> <span data-ttu-id="68b2d-115">Informationen zur Installation und Verwendung des Retail SDK finden Sie unter [Retail Software Development Kit (SDK) Architektur](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span><span class="sxs-lookup"><span data-stu-id="68b2d-115">For information about how to install and use the Retail SDK, see [Retail software development kit (SDK) architecture](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span></span>

<span data-ttu-id="68b2d-116">Um andere Szenarien zu unterstützen, die nicht von einem Steuerintegrationsbeispiel unterstützt werden, um Retail POS in andere steuerbezogene Geräte oder Dienste zu integrieren, oder um Anforderungen anderer Länder/Regionen zu erfüllen, müssen Sie entweder ein vorhandenes Steuerintegrationsbeispiel erweitern oder ein neues Beispiel mithilfe eines vorhandenen Beispiels erstellen.</span><span class="sxs-lookup"><span data-stu-id="68b2d-116">To support other scenarios that aren't supported by a fiscal integration sample, to integrate Retail POS with other fiscal devices or services, or to cover requirements of other countries or regions, you must either extend an existing fiscal integration sample or create a new sample by using an existing sample as an example.</span></span>

## <a name="fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices"></a><span data-ttu-id="68b2d-117">Steuerregistrierungsprozess und Steuerintegrationsbeispiele für steuerbezogene Geräte</span><span class="sxs-lookup"><span data-stu-id="68b2d-117">Fiscal registration process and fiscal integration samples for fiscal devices</span></span>

<span data-ttu-id="68b2d-118">Ein Steuerregistrierungsprozess in Retail POS kann aus einem oder mehreren Schritten bestehen.</span><span class="sxs-lookup"><span data-stu-id="68b2d-118">A fiscal registration process in Retail POS can consist of one or more steps.</span></span> <span data-ttu-id="68b2d-119">Jeder Schritt umfasst die Steuerregistrierung bestimmter Transaktionen oder -ereignisse in einem steuerbezogenes Gerät oder einem steuerbezogenen Dienst.</span><span class="sxs-lookup"><span data-stu-id="68b2d-119">Each step involves fiscal registration of specific transactions or events in one fiscal device or service.</span></span> <span data-ttu-id="68b2d-120">Die folgenden Lösungskomponenten nehmen an der Steuerregistrierung in einem steuerbezogenen Gerät teil, das mit einer Hardwarestation verbunden ist:</span><span class="sxs-lookup"><span data-stu-id="68b2d-120">The following solution components participate in the fiscal registration in a fiscal device that is connected to a Hardware station:</span></span>

- <span data-ttu-id="68b2d-121">**Commerce Runtime (CRT)-Erweiterung** – Diese Komponente serialisiert Transaktions-/Ereignisdaten in das Format, das auch für die Interaktion mit dem steuerbezogenen Gerät verwendet wird, analysiert Antworten vom steuerbezogenen Gerät und speichert die Antworten in der Kanaldatenbank.</span><span class="sxs-lookup"><span data-stu-id="68b2d-121">**Commerce runtime (CRT) extension** – This component serializes transaction/event data in the format that is also used for interaction with the fiscal device, parses responses from the fiscal device, and stores the responses in the channel database.</span></span> <span data-ttu-id="68b2d-122">Die Erweiterung definiert auch die spezifischen Transaktionen und Ereignisse, die erfasst werden müssen.</span><span class="sxs-lookup"><span data-stu-id="68b2d-122">The extension also defines the specific transactions and events that must be registered.</span></span> <span data-ttu-id="68b2d-123">Diese Komponente wird häufig als *Steuerdokumentanbieter* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="68b2d-123">This component is often referred to as a *fiscal document provider*.</span></span>
- <span data-ttu-id="68b2d-124">**Hardwarestationserweiterung** – Diese Komponente initialisiert die Kommunikation mit dem steuerbezogenen Gerät, sendet Anforderungen und direkte Befehle an das steuerbezogene Gerät auf Basis der Transaktions-/Ereignisdaten, die aus dem Steuerdokument extrahiert werden, und empfängt Antworten vom steuerbezogenen Gerät.</span><span class="sxs-lookup"><span data-stu-id="68b2d-124">**Hardware station extension** – This component initializes the communication with the fiscal device, sends requests and direct commands to the fiscal device based on the transaction/event data that is extracted from the fiscal document, and receives responses from the fiscal device.</span></span> <span data-ttu-id="68b2d-125">Diese Komponente wird häufig als *Steuerkonnektor* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="68b2d-125">This component is often referred to as a *fiscal connector*.</span></span>

<span data-ttu-id="68b2d-126">Ein Steuerintegrationsbeispiel für ein steuerbezogenes Gerät enthält jeweils die CRT und Hardwarestationserweiterungen für einen Steuerdokumentanbieter und Steuerkonnektor.</span><span class="sxs-lookup"><span data-stu-id="68b2d-126">A fiscal integration sample for a fiscal device contains the CRT and Hardware station extensions for a fiscal document provider and a fiscal connector, respectively.</span></span> <span data-ttu-id="68b2d-127">Es enthält auch die folgenden Komponentenkonfigurationen:</span><span class="sxs-lookup"><span data-stu-id="68b2d-127">It also contains the following component configurations:</span></span>

- <span data-ttu-id="68b2d-128">**Steuerdokumentanbieter-Konfiguration** – Diese Konfiguration definiert eine Ausgabemethode und ein Format für Steuerdokumente.</span><span class="sxs-lookup"><span data-stu-id="68b2d-128">**Fiscal document provider configuration** – This configuration defines an output method and a format for fiscal documents.</span></span> <span data-ttu-id="68b2d-129">Es enthält auch eine Datenzuordnung für Steuern und Zahlungsmethoden, um Daten aus Retail POS mit den Werten, die in der Firmware des steuerbezogenen Geräts vordefiniert werden, kompatibel zu machen.</span><span class="sxs-lookup"><span data-stu-id="68b2d-129">It also contains a data mapping for taxes and payment methods, to make data from Retail POS compatible with the values that are predefined in the fiscal device firmware.</span></span>
- <span data-ttu-id="68b2d-130">**Steuerkonnektorkonfiguration** – Diese Konfiguration definiert die physische Kommunikation mit dem betreffenden steuerbezogenen Gerät.</span><span class="sxs-lookup"><span data-stu-id="68b2d-130">**Fiscal connector configuration** – This configuration defines the physical communication with the specific fiscal device.</span></span>

<span data-ttu-id="68b2d-131">Ein Steuerregistrierungsprozess für ein bestimmtes POS-Register wird von einer entsprechenden Einstellung im POS-Funktionsprofil definiert.</span><span class="sxs-lookup"><span data-stu-id="68b2d-131">A fiscal registration process for a specific POS register is defined by a corresponding setting in the POS functionality profile.</span></span> <span data-ttu-id="68b2d-132">Weitere Informationen zum Konfigurieren eines Steuerregistrierungsprozesses, Hochladen von Steuerdokumentanbieter- und Steuerkonnektorkonfigurationen und Ändern ihrer Parameter finden Sie unter [Einrichten eines Steuerregistrierungsprozesses](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="68b2d-132">For more details about how to configure a fiscal registration process, upload fiscal document provider and fiscal connector configurations, and change their parameters, see [Set up a fiscal registration process](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span>

<span data-ttu-id="68b2d-133">Das folgende Beispiel zeigt einen typischen Steuerregistrierungs-Ausführungsfluss für ein steuerbezogenes Gerät.</span><span class="sxs-lookup"><span data-stu-id="68b2d-133">The following example shows a typical fiscal registration execution flow for a fiscal device.</span></span> <span data-ttu-id="68b2d-134">Der Fluss startet mit einem Ereignis im POS (beispielsweise dem Abschluss einer Verkaufsbuchung) und implementiert die folgende Schrittfolge:</span><span class="sxs-lookup"><span data-stu-id="68b2d-134">The flow starts with an event in the POS (for example, finalization of a sales transaction) and implements the following sequence of steps:</span></span>

1. <span data-ttu-id="68b2d-135">Der POS fordert ein Steuerdokument von CRT an.</span><span class="sxs-lookup"><span data-stu-id="68b2d-135">The POS requests a fiscal document from CRT.</span></span>
2. <span data-ttu-id="68b2d-136">CRT bestimmt, ob das aktuelle Ereignis eine Steuerregistrierung erfordert.</span><span class="sxs-lookup"><span data-stu-id="68b2d-136">CRT determines whether the current event requires fiscal registration.</span></span>
3. <span data-ttu-id="68b2d-137">Auf Grundlage der Steuerregistrierungsprozess-Einstellungen identifiziert CRT einen Steuerkonnektor und entsprechenden Steuerdokumentanbieter, der für die Steuerregistrierung verwendet werden soll.</span><span class="sxs-lookup"><span data-stu-id="68b2d-137">Based on the fiscal registration process settings, CRT identifies a fiscal connector and corresponding fiscal document provider to use for the fiscal registration.</span></span>
4. <span data-ttu-id="68b2d-138">CRT führt den Steuerdokumentanbieter aus, der ein Steuerdokument generiert (beispielsweise ein XML-Dokument), das die Transaktion oder das Ereignis darstellt.</span><span class="sxs-lookup"><span data-stu-id="68b2d-138">CRT runs the fiscal document provider that generates a fiscal document (for example, an XML document) that represents the transaction or event.</span></span>
5. <span data-ttu-id="68b2d-139">Der POS sendet das Steuerdokument, das CRT vorbereitet, an eine Hardwarestation.</span><span class="sxs-lookup"><span data-stu-id="68b2d-139">The POS sends the fiscal document that CRT prepares to a Hardware station.</span></span>
6. <span data-ttu-id="68b2d-140">Die Hardwarestation führt den Steuerkonnektor aus, der das Steuerdokument verarbeitet und es an das steuerbezogene Gerät oder den steuerbezogenen Dienst kommuniziert.</span><span class="sxs-lookup"><span data-stu-id="68b2d-140">The Hardware station runs the fiscal connector that processes the fiscal document and communicates it to the fiscal device or service.</span></span>
7. <span data-ttu-id="68b2d-141">Der POS analysiert die Antwort vom steuerbezogenen Gerät oder Dienst, um zu bestimmen, ob die Steuerregistrierung erfolgreich war.</span><span class="sxs-lookup"><span data-stu-id="68b2d-141">The POS analyzes the response from the fiscal device or service to determine whether the fiscal registration was successful.</span></span>
8. <span data-ttu-id="68b2d-142">CRT speichert die Antwort in der Kanaldatenbank.</span><span class="sxs-lookup"><span data-stu-id="68b2d-142">CRT saves the response to the channel database.</span></span>

<span data-ttu-id="68b2d-143">![Lösungsschema](media/emea-fiscal-integration-solution.png "Lösungsschema")</span><span class="sxs-lookup"><span data-stu-id="68b2d-143">![Solution schema](media/emea-fiscal-integration-solution.png "Solution schema")</span></span>

## <a name="error-handling"></a><span data-ttu-id="68b2d-144">Fehlerbehandlung</span><span class="sxs-lookup"><span data-stu-id="68b2d-144">Error handling</span></span>

<span data-ttu-id="68b2d-145">Das Steuerintegrationsframework bietet folgende Optionen, um Fehler bei der Steuerregistrierung zu behandeln:</span><span class="sxs-lookup"><span data-stu-id="68b2d-145">The fiscal integration framework provides the following options to handle failures during fiscal registration:</span></span>

- <span data-ttu-id="68b2d-146">**Wiederholen** – Operatoren können diese Option verwenden, wenn der Fehler schnell behoben werden kann, und die Steuerregistrierung erneut ausgeführt werden kann.</span><span class="sxs-lookup"><span data-stu-id="68b2d-146">**Retry** – Operators can use this option when the failure can be resolved quickly, and the fiscal registration can be rerun.</span></span> <span data-ttu-id="68b2d-147">Beispielsweise kann diese Option verwendet werden, falls das steuerbezogene Gerät nicht verbunden ist, im Belegdrucker kein Papier mehr vorhanden ist oder Papierstau im Belegdrucker herrscht.</span><span class="sxs-lookup"><span data-stu-id="68b2d-147">For example, this option can be used when the fiscal device isn't connected, the fiscal printer is out of paper, or there is a paper jam in the fiscal printer.</span></span>
- <span data-ttu-id="68b2d-148">**Abbrechen** – Mit dieser Option können Operatoren die Steuerregistrierung der aktuellen Transaktion oder des aktuellen Ereignisses verschieben, auch bei einem Fehler.</span><span class="sxs-lookup"><span data-stu-id="68b2d-148">**Cancel** – This option lets operators postpone the fiscal registration of the current transaction or event if it fails.</span></span> <span data-ttu-id="68b2d-149">Nachdem die Registrierung verschoben ist, kann der Operator am POS weiterarbeiten und jeden beliebigen Arbeitsgang abschließen, für den die Steuerregistrierung nicht erforderlich ist.</span><span class="sxs-lookup"><span data-stu-id="68b2d-149">After the registration is postponed, the operator can continue to work on the POS and can complete any operation that the fiscal registration isn't required for.</span></span> <span data-ttu-id="68b2d-150">Wenn ein Ereignis, das die Steuerregistrierung erfordert, am POS auftritt (beispielsweise wird eine neue Transaktion geöffnet), wird das Fehlerbehandlungsdialogfeld automatisch angezeigt, um den Operator zu benachrichtigen, dass die vorherige Transaktion nicht ordnungsgemäß erfasst wurde und um die Fehlerbehandlungsoptionen bereitzustellen.</span><span class="sxs-lookup"><span data-stu-id="68b2d-150">When any event that requires the fiscal registration occurs in the POS (for example, a new transaction is opened), the error handling dialog box automatically appears to notify the operator that the previous transaction wasn't correctly registered and to provide the error handling options.</span></span>
- <span data-ttu-id="68b2d-151">**Überspringen** – Operatoren können diese Option verwenden, wenn die Steuerregistrierung unter bestimmten Bedingungen ausgelassen werden kann und regelmäßige Vorgänge am POS fortgesetzt werden können.</span><span class="sxs-lookup"><span data-stu-id="68b2d-151">**Skip** – Operators can use this option when the fiscal registration can be omitted under specific conditions and regular operations can be continued on the POS.</span></span> <span data-ttu-id="68b2d-152">Beispielsweise kann diese Option verwendet werden, wenn eine Verkaufsbuchung, bei der ein Fehler bei der Steuerregistrierung aufgetreten ist, in einer Papiererfassung erfasst werden kann.</span><span class="sxs-lookup"><span data-stu-id="68b2d-152">For example, this option can be used when a sales transaction that the fiscal registration failed for can be registered in a special paper journal.</span></span>
- <span data-ttu-id="68b2d-153">**Als registriert markieren** – Operatoren können diese Option verwenden, wenn die Transaktion tatsächlich auf dem steuerbezogenen Gerät registriert wurde (z. B. wurde ein Steuerbeleg ausgedruckt), jedoch ein Fehler aufgetreten ist, als die Steuerantwort in der Kanaldatenbank gespeichert wurde.</span><span class="sxs-lookup"><span data-stu-id="68b2d-153">**Mark as registered** – Operators can use this option when the transaction was actually registered in the fiscal device (for example, a fiscal receipt was printed), but a failure occurred when the fiscal response was being saved to the channel database.</span></span>

> [!NOTE]
> <span data-ttu-id="68b2d-154">Die Optionen **Überspringen** und **Als registriert markieren** müssen im Steuerregistrierungsprozess aktiviert werden, bevor sie verwendet werden.</span><span class="sxs-lookup"><span data-stu-id="68b2d-154">The **Skip** and **Mark as registered** options must be activated in the fiscal registration process before they are used.</span></span> <span data-ttu-id="68b2d-155">Darüber hinaus müssen Operatoren entsprechende Berechtigungen gewährt werden.</span><span class="sxs-lookup"><span data-stu-id="68b2d-155">In addition, corresponding permissions must be granted to operators.</span></span>

<span data-ttu-id="68b2d-156">Mit den Optionen **Überspringen** und **Als registriert markieren** können Infocodes bestimmte Informationen zum Fehler erfassen, z. B. den Grund für den Fehler oder eine Begründung für das Überspringen der Steuerregistrierung oder das Markieren der Transaktion als registriert.</span><span class="sxs-lookup"><span data-stu-id="68b2d-156">The **Skip** and **Mark as registered** options enable info codes to capture some specific information about the failure, such as the reason for the failure or a justification for skipping the fiscal registration or marking the transaction as registered.</span></span> <span data-ttu-id="68b2d-157">Weitere Informationen zum Einrichten von Fehlerbehandlungsparametern finden Sie unter [Festlegen von Fehlerbehandlungseinstellungen](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="68b2d-157">For more details about how to set up error handling parameters, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

### <a name="optional-fiscal-registration"></a><span data-ttu-id="68b2d-158">Optionale Steuerregistrierung</span><span class="sxs-lookup"><span data-stu-id="68b2d-158">Optional fiscal registration</span></span>

<span data-ttu-id="68b2d-159">Steuerliche Erfassung ist möglicherweise erforderlich für einige Vorgänge aber für andere optional.</span><span class="sxs-lookup"><span data-stu-id="68b2d-159">Fiscal registration might be mandatory for some operations but optional for others.</span></span> <span data-ttu-id="68b2d-160">Beispielsweise kann die Steuererfassung von regulärenr Verkäufen und Rücklieferungen zwingend sein, aber die steuerliche Erfassung, die sich auf Debitoreneinzahlungen bezieht ist optional.</span><span class="sxs-lookup"><span data-stu-id="68b2d-160">For example, the fiscal registration of regular sales and returns might be mandatory, but the fiscal registration of operations that are related to customer deposits might be optional.</span></span> <span data-ttu-id="68b2d-161">In diesem Fall sollte die fehlende steuerliche Erfassung eines Verkaufs andere Aufträge sperren, wenn aber die steuerliche Erfassung einer Debitoreneinzahlung nicht abgeschlosse ist, sollten andere Aufträge nicht gesperrt werden.</span><span class="sxs-lookup"><span data-stu-id="68b2d-161">In this case, failure to complete the fiscal registration of a sale should block further sales, but failure to complete the fiscal registration of a customer deposit should not block further sales.</span></span> <span data-ttu-id="68b2d-162">Um die erforderlichen und optionalen Arbeitsgänge zu unterscheiden, sollten Sie sie durch verschiedene Dokumentanbieter abwickeln und separate Schritte für den steuerlichen Erfassungsprozesses für diese Anbieter einrichten.</span><span class="sxs-lookup"><span data-stu-id="68b2d-162">To distinguish mandatory and optional operations, we recommend that you handle them through different document providers, and that you set up separate steps in the fiscal registration process for those providers.</span></span> <span data-ttu-id="68b2d-163">Der Parameter muss **Bei Fehler fortsetzen** für einen Schritt aktiviert werden, der der optionalen steuerlichen Erfassung zugeordnet ist.</span><span class="sxs-lookup"><span data-stu-id="68b2d-163">The **Continue on error** parameter should be enabled for any step that is related to optional fiscal registration.</span></span> <span data-ttu-id="68b2d-164">Weitere Informationen zum Einrichten von Fehlerbehandlungsparametern finden Sie unter [Festlegen von Fehlerbehandlungseinstellungen](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="68b2d-164">For more details about how to set up error handling parameters, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

### <a name="manually-running-fiscal-registration"></a><span data-ttu-id="68b2d-165">Steuerliche Erfassung manuell ausführen</span><span class="sxs-lookup"><span data-stu-id="68b2d-165">Manually running fiscal registration</span></span>

<span data-ttu-id="68b2d-166">Wenn die Buchung einer Steuererfassung oder einess Ereignisses nach einem Fehler (beispielsweise wenn der Operator **Abbrechen** im Fehlerbehandlungsdialogfeld gewählt hat) verschoben wurde, können Sie die steuerliche Erfassung manuell überprüfen, indem Sie einen entsprechenden Arbeitsgang aufrufen.</span><span class="sxs-lookup"><span data-stu-id="68b2d-166">If the fiscal registration of a transaction or event has been postponed after a failure (for example, if the operator selected **Cancel** in the error handling dialog box), you can manually rerun the fiscal registration by invoking a corresponding operation.</span></span> <span data-ttu-id="68b2d-167">Weitere Details finden Sie unter [Manuelle Ausführung der verschobenen steuerlichen Erfassung aktivieren](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span><span class="sxs-lookup"><span data-stu-id="68b2d-167">For more details, see [Enable manual execution of postponed fiscal registration](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span></span>

### <a name="fiscal-registration-health-check"></a><span data-ttu-id="68b2d-168">Steuerliche Erfassungsintegritätsprüfung</span><span class="sxs-lookup"><span data-stu-id="68b2d-168">Fiscal registration health check</span></span>

<span data-ttu-id="68b2d-169">Die Integritätsprüfungsprozedur für die steuerliche Registrierungen überprüft die Verfügbarkeit des steuerlichen Geräts oder der Dienstleistung, wenn bestimmte Ereignisse auftreten.</span><span class="sxs-lookup"><span data-stu-id="68b2d-169">The health check procedure for fiscal registrations verifies the availability of the fiscal device or service when specific events occur.</span></span> <span data-ttu-id="68b2d-170">Wenn die steuerliche Erfassung gerade nicht abgeschlossen werden kann, wird der Mitarbeiter im Voraus benachrichtigt.</span><span class="sxs-lookup"><span data-stu-id="68b2d-170">If the fiscal registration can't currently be completed, the operator is notified in advance.</span></span>

<span data-ttu-id="68b2d-171">Der POS führt die Integritätsprüfung aus, wenn die folgenden Ereignisse auftreten:</span><span class="sxs-lookup"><span data-stu-id="68b2d-171">The POS runs the health check when the following events occur:</span></span>

- <span data-ttu-id="68b2d-172">Eine neue Transaktion wird geöffnet.</span><span class="sxs-lookup"><span data-stu-id="68b2d-172">A new transaction is opened.</span></span>
- <span data-ttu-id="68b2d-173">Eine ausgesetzte Transaktion wird zurückgerufen.</span><span class="sxs-lookup"><span data-stu-id="68b2d-173">A suspended transaction is recalled.</span></span>
- <span data-ttu-id="68b2d-174">Ein Verkaufs- oder eine Rücklieferungstransaktion ist abgeschlossen.</span><span class="sxs-lookup"><span data-stu-id="68b2d-174">A sales or return transaction is finalized.</span></span>

<span data-ttu-id="68b2d-175">Wenn die Integritätsprüfung fehlschlägt, wird im POS das Integritätsprüfungsdialogfeld angezeigt.</span><span class="sxs-lookup"><span data-stu-id="68b2d-175">If the health check fails, the POS shows the health check dialog box.</span></span> <span data-ttu-id="68b2d-176">Dieses Dialogfeld enthält die folgenden Schaltflächen:</span><span class="sxs-lookup"><span data-stu-id="68b2d-176">This dialog box provides the following buttons:</span></span>

- <span data-ttu-id="68b2d-177">**OK** – Mit dieser Schaltfläch kann der Mitarbeiter einen Integritätsprüfungsfehler ignorieren und den Arbeitsgang weiter verarbeiten.</span><span class="sxs-lookup"><span data-stu-id="68b2d-177">**OK** – This button lets the operator ignore a health check error and continue to process the operation.</span></span> <span data-ttu-id="68b2d-178">Mitarbeiter können diese Schaltfläche nur auswählen, wenn die Berechtigung **integritätsprüfungsfehler überspringen zulassen**  aktiviert ist.</span><span class="sxs-lookup"><span data-stu-id="68b2d-178">Operators can select this button only if the **Allow skip health check error** permission is enabled for them.</span></span>
- <span data-ttu-id="68b2d-179">**Abbrechen** – Wenn der Mitarbeiter diese Schaltfläche auswählt, bricht der POS die letzte Aktion ab (beispielsweise wird ein Artikel der neuen Transaktlion nicht hinzugefügt).</span><span class="sxs-lookup"><span data-stu-id="68b2d-179">**Cancel** – If the operator selects this button, the POS cancels the last action (for example, an item isn't added to a new transaction).</span></span>

> [!NOTE]
> <span data-ttu-id="68b2d-180">Die Integritätsprüfung wird nur ausgeführt, wenn der aktuelle Arbeitsgang eine Steuererfassung erfordert und wenn der Parameter **Bei Fehler fortsetzen** für den aktuellen Schritt des steuerlichen Anmeldeprozesses deaktiviert wird.</span><span class="sxs-lookup"><span data-stu-id="68b2d-180">The health check is run only if the current operation requires fiscal registration, and if  the **Continue on error** parameter is disabled for the current step of the fiscal registration process.</span></span> <span data-ttu-id="68b2d-181">Weitere Informationen finden Sie unter[Fehlerbehandlungseinstellungen](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="68b2d-181">For more details, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

## <a name="storing-fiscal-response-in-fiscal-transaction"></a><span data-ttu-id="68b2d-182">Speichern der Steuerantwort in der Steuertransaktion</span><span class="sxs-lookup"><span data-stu-id="68b2d-182">Storing fiscal response in fiscal transaction</span></span>

<span data-ttu-id="68b2d-183">Wenn die Steuerregistrierung einer Transaktion oder eines Ereignisses erfolgreich war, wird eine Steuertransaktion in der Kanaldatenbank erstellt und mit der ursprünglichen Transaktion oder dem ursprünglichen Ereignis verknüpft.</span><span class="sxs-lookup"><span data-stu-id="68b2d-183">When fiscal registration of a transaction or event is successful, a fiscal transaction is created in the channel database and linked to the original transaction or event.</span></span> <span data-ttu-id="68b2d-184">Wenn die Option **Überspringen** oder **Als registriert markieren** für eine fehlgeschlagene Steuerregistrierung ausgewählt ist, werden diese Informationen in einer Steuertransaktion entsprechend gespeichert.</span><span class="sxs-lookup"><span data-stu-id="68b2d-184">Similarly, if the **Skip** or **Mark as registered** option is selected for a failed fiscal registration, this information is stored in a fiscal transaction.</span></span> <span data-ttu-id="68b2d-185">Eine Steuertransaktion enthält die Steuerantwort vom steuerbezogenen Gerät oder Dienst.</span><span class="sxs-lookup"><span data-stu-id="68b2d-185">A fiscal transaction holds the fiscal response of the fiscal device or service.</span></span> <span data-ttu-id="68b2d-186">Wenn der Steuerregistrierungsprozess aus mehreren Schritten besteht, wird eine Steuertransaktion für die einzelnen Schritte des Prozesses erstellt, der zu einer erfolgreichen oder fehlgeschlagenen Registrierung geführt hat.</span><span class="sxs-lookup"><span data-stu-id="68b2d-186">If the fiscal registration process consists of several steps, a fiscal transaction is created for each step of the process that resulted in a successful or failed registration.</span></span>

<span data-ttu-id="68b2d-187">Steuerbezogene Buchungen werden zusammen mit den Transaktionen über den *P-Job* an die Zentralverwaltung übertragen.</span><span class="sxs-lookup"><span data-stu-id="68b2d-187">Fiscal transactions are transferred to Headquarters by the *P-job*, together with transactions.</span></span> <span data-ttu-id="68b2d-188">Im Inforegister **Steuerbezogene Buchungen** auf der Seite für **Geschäftsbuchungen** können Sie die steuerbezogenen Buchungen anzeigen, die mit den Transaktionen verknüpft sind.</span><span class="sxs-lookup"><span data-stu-id="68b2d-188">On the **Fiscal transactions** FastTab of the **Store transactions** page, you can view the fiscal transactions that are linked to transactions.</span></span>

<span data-ttu-id="68b2d-189">Eine Steuertransaktion speichert die folgenden Details:</span><span class="sxs-lookup"><span data-stu-id="68b2d-189">A fiscal transaction stores the following details:</span></span>

- <span data-ttu-id="68b2d-190">Steuerregistrierungsprozess-Details (Prozess, Konnektorgruppe, Konnektor usw.).</span><span class="sxs-lookup"><span data-stu-id="68b2d-190">Fiscal registration process details (process, connector group, connector, and so on).</span></span> <span data-ttu-id="68b2d-191">Sie speichert außerdem die Seriennummer des steuerbezogenen Geräts im Feld **Registernummer**, wenn diese Informationen in der Steuerantwort enthalten sind.</span><span class="sxs-lookup"><span data-stu-id="68b2d-191">It also stores the serial number of the fiscal device in the **Register number** field, if this information is included in the fiscal response.</span></span>
- <span data-ttu-id="68b2d-192">Der Status der Steuerregistrierung: **Abgeschlossen** für die erfolgreiche Registrierung, **Übersprungen**, wenn der Operator die Option **Überspringen** für eine fehlerhafte Registrierung ausgewählt hat, oder **Als registriert markiert**, wenn der Operator die Option **Als registriert markieren** ausgewählt hat.</span><span class="sxs-lookup"><span data-stu-id="68b2d-192">The status of the fiscal registration: **Completed** for successful registration, **Skipped** if the operator selected the **Skip** option for a failed registration, or **Marked as registered** if the operator selected the **Mark as registered** option.</span></span>
- <span data-ttu-id="68b2d-193">Infocodetransaktionen im Zusammenhang mit einer ausgewählten Steuertransaktion.</span><span class="sxs-lookup"><span data-stu-id="68b2d-193">Info code transactions that are related to a selected fiscal transaction.</span></span> <span data-ttu-id="68b2d-194">Um die Infocodetransaktionen anzuzeigen, wählen Sie im Inforegister **Steuertransaktionen** eine Steuertransaktionen aus, die den Status **Übersprungen** oder **Als registriert markiert** aufweist, und wählen Sie dann **Infocodetransaktionen** aus.</span><span class="sxs-lookup"><span data-stu-id="68b2d-194">To view the info code transactions, on the **Fiscal transactions** FastTab, select a fiscal transaction that has a status of **Skipped** or **Marked as registered**, and then select **Info code transactions**.</span></span>

## <a name="fiscal-texts-for-discounts"></a><span data-ttu-id="68b2d-195">Steuertexte für Rabatte</span><span class="sxs-lookup"><span data-stu-id="68b2d-195">Fiscal texts for discounts</span></span>

<span data-ttu-id="68b2d-196">Einige Länder/Regionen haben spezielle Anforderungen zu zusätzlichen Texten, die auf Steuerbelege gedruckt werden müssen, wenn verschiedene Arten von Rabatten angewendet werden.</span><span class="sxs-lookup"><span data-stu-id="68b2d-196">Some countries or regions have special requirements about additional texts that must be printed on fiscal receipts when different kinds of discounts are applied.</span></span> <span data-ttu-id="68b2d-197">Mit den Steuerintegrationsfunktionen können Sie einen bestimmten Text für einen Rabatt einrichten, der nach einer Rabattposition auf einen Steuerbeleg gedruckt wird.</span><span class="sxs-lookup"><span data-stu-id="68b2d-197">The fiscal integration functionality lets you set up a special text for a discount that is printed after a discount line on a fiscal receipt.</span></span> <span data-ttu-id="68b2d-198">Bei manuellen Rabatten können Sie einen Steuertext für den Infocode konfigurieren, der als **Produktrabatt**-Infocode im POS-Funktionsprofil angegeben ist.</span><span class="sxs-lookup"><span data-stu-id="68b2d-198">For manual discounts, you can configure a fiscal text for the info code that is specified as the **Product discount** info code in the POS functionality profile.</span></span> <span data-ttu-id="68b2d-199">Weitere Informationen zum Einrichten von Steuertexten für Rabatte finden Sie unter [Einrichten von Steuertexten für Rabatte](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span><span class="sxs-lookup"><span data-stu-id="68b2d-199">For more details about how to set up fiscal texts for discounts, see [Set up fiscal texts for discounts](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span></span>

## <a name="printing-fiscal-x-and-fiscal-z-reports"></a><span data-ttu-id="68b2d-200">Drucken von Steuer X- und Steuer Z-Berichten</span><span class="sxs-lookup"><span data-stu-id="68b2d-200">Printing fiscal X and fiscal Z reports</span></span>

<span data-ttu-id="68b2d-201">Die Steuerintegrationsfunktionen unterstützen die Generierung von Tagesendeauszügen, die für das integrierte steuerbezogene Gerät oder den integrierten steuerbezogenen Dienst spezifisch sind:</span><span class="sxs-lookup"><span data-stu-id="68b2d-201">Fiscal integration functionality supports generation of end-of-day statements that are specific to the integrated fiscal device or service:</span></span>

- <span data-ttu-id="68b2d-202">Neue Schaltflächen, die die entsprechenden Vorgänge ausführen, sollten zum POS-Bildschirmlayout hinzugefügt werden.</span><span class="sxs-lookup"><span data-stu-id="68b2d-202">New buttons that run corresponding operations should be added to the POS screen layout.</span></span> <span data-ttu-id="68b2d-203">Weitere Informationen finden Sie unter [Einrichten von Steuer X/Z-Berichten vom POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span><span class="sxs-lookup"><span data-stu-id="68b2d-203">For more details, see [Set up fiscal X/Z reports from the POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span></span>
- <span data-ttu-id="68b2d-204">Im Steuerintegrationsbeispiel sollten diese Vorgänge mit den gewünschten Vorgängen des steuerbezogenen Geräts abgeglichen werden.</span><span class="sxs-lookup"><span data-stu-id="68b2d-204">In the fiscal integration sample, these operations should be matched to the corresponding operations of the fiscal device.</span></span>

## <a name="fiscal-integration-samples-in-the-retail-sdk"></a><span data-ttu-id="68b2d-205">Steuerintegrationsbeispiele im Retail SDK</span><span class="sxs-lookup"><span data-stu-id="68b2d-205">Fiscal integration samples in the Retail SDK</span></span>

<span data-ttu-id="68b2d-206">Die folgenden Steuerintegrationsbeispiele sind derzeit im Retail SDK verfügbar:</span><span class="sxs-lookup"><span data-stu-id="68b2d-206">The following fiscal integration samples are currently available in the Retail SDK:</span></span>

- [<span data-ttu-id="68b2d-207">Beispiel für die Integration eines Belegdruckers für Italien</span><span class="sxs-lookup"><span data-stu-id="68b2d-207">Fiscal printer integration sample for Italy</span></span>](emea-ita-fpi-sample.md)
- [<span data-ttu-id="68b2d-208">Beispiel für Belegdruckerintegration für Polen</span><span class="sxs-lookup"><span data-stu-id="68b2d-208">Fiscal printer integration sample for Poland</span></span>](emea-pol-fpi-sample.md)
- [<span data-ttu-id="68b2d-209">Integrationsbeispiel für Steuererfassungsdienst für Österreich</span><span class="sxs-lookup"><span data-stu-id="68b2d-209">Fiscal registration service integration sample for Austria</span></span>](emea-aut-fi-sample.md)
- [<span data-ttu-id="68b2d-210">Integrationsbeispiel für Steuererfassungsdienst für Tschechische Republik</span><span class="sxs-lookup"><span data-stu-id="68b2d-210">Fiscal registration service integration sample for Czech Republic</span></span>](emea-cze-fi-sample.md)
- [<span data-ttu-id="68b2d-211">Beispiel zur Integration der Kontrolleinheit für Schweden</span><span class="sxs-lookup"><span data-stu-id="68b2d-211">Control unit integration sample for Sweden</span></span>](./emea-swe-fi-sample.md)
- [<span data-ttu-id="68b2d-212">Integrationsbeispiel für Steuererfassungsdienst für Deutschland</span><span class="sxs-lookup"><span data-stu-id="68b2d-212">Fiscal registration service integration sample for Germany</span></span>](./emea-deu-fi-sample.md)

<span data-ttu-id="68b2d-213">Die folgenden Steuerintegrationsfunktionen sind ebenfalls im Retail SDK verfügbar, nutzen derzeit jedoch nicht das Steuerintegrationsframework.</span><span class="sxs-lookup"><span data-stu-id="68b2d-213">The following fiscal integration functionality is also available in the Retail SDK but doesn't currently take advantage of the fiscal integration framework.</span></span> <span data-ttu-id="68b2d-214">Die Migration dieser Funktionen in das Steuerintegrationsframework ist für spätere Aktualisierungen geplant.</span><span class="sxs-lookup"><span data-stu-id="68b2d-214">Migration of this functionality to the fiscal integration framework is planned for later updates.</span></span>


- [<span data-ttu-id="68b2d-215">Digitale Signatur für Frankreich</span><span class="sxs-lookup"><span data-stu-id="68b2d-215">Digital signature for France</span></span>](emea-fra-cash-registers.md)
- [<span data-ttu-id="68b2d-216">Digitale Signatur für Norwegen</span><span class="sxs-lookup"><span data-stu-id="68b2d-216">Digital signature for Norway</span></span>](emea-nor-cash-registers.md)

<span data-ttu-id="68b2d-217">Die folgenden älteren Funktionen für die steuerliche Integration, die im Retail SDK verfügbar sind, verwenden nicht das Framework für die steuerliche Integration und werden in späteren Updates nicht mehr unterstützt:</span><span class="sxs-lookup"><span data-stu-id="68b2d-217">The following legacy fiscal integration functionality that is available in Retail SDK does not use the fiscal integration framework and will be deprecated in later updates:</span></span>

- [<span data-ttu-id="68b2d-218">Beispiel zur Integration der Kontrolleinheit für Schweden (veraltet)</span><span class="sxs-lookup"><span data-stu-id="68b2d-218">Control unit integration sample for Sweden (legacy)</span></span>](./retail-sdk-control-unit-sample.md)


[!INCLUDE[footer-include](../../includes/footer-banner.md)]