---
title: Einzelvorgang zur Eingangsbereinigung bei der Lagerortverwaltung
description: In diesem Thema wird der Bereinigungsjob für vorhandene Einträge beschrieben, mit dem die Systemleistung verbessert werden kann, indem verwandte, aber nicht benötigte Datensätze identifiziert und gelöscht werden.
author: perlynne
manager: tfehr
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: Release 10.0.12
ms.openlocfilehash: f6d1f8a4c85c2161d1b79246d437bb3b4d223d1d
ms.sourcegitcommit: a3cd2783ae120ac6681431c010b9b126a9ca7d94
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 05/29/2020
ms.locfileid: "3410950"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a><span data-ttu-id="30e03-103">Einzelvorgang zur Eingangsbereinigung bei der Lagerortverwaltung</span><span class="sxs-lookup"><span data-stu-id="30e03-103">Warehouse management on-hand entries cleanup job</span></span>

<span data-ttu-id="30e03-104">Die Leistung von Abfragen, die zur Berechnung des Lagerbestands verwendet werden, wird durch die Anzahl der Datensätze in den beteiligten Tabellen beeinflusst.</span><span class="sxs-lookup"><span data-stu-id="30e03-104">The performance of queries that are used to calculate on-hand inventory is affected by the number of records in the tables that are involved.</span></span> <span data-ttu-id="30e03-105">Eine Möglichkeit zur Verbesserung der Leistung besteht darin, die Anzahl der Datensätze zu verringern, die die Datenbank berücksichtigen muss.</span><span class="sxs-lookup"><span data-stu-id="30e03-105">One way to help improve the performance is to reduce the number of records that the database must consider.</span></span>

<span data-ttu-id="30e03-106">In diesem Thema wird der Bereinigungsjob für vorhandene Einträge beschrieben, mit dem nicht benötigte Datensätze in den Tabellen InventSum und WHSInventReserve gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="30e03-106">This topic describes the on-hand entries cleanup job, which deletes unneeded records in the InventSum and WHSInventReserve tables.</span></span> <span data-ttu-id="30e03-107">In diesen Tabellen werden Informationen zu Artikeln gespeichert, die für die Lagerverwaltungsverarbeitung aktiviert sind.</span><span class="sxs-lookup"><span data-stu-id="30e03-107">These tables store on-hand information for items that are enabled for warehouse management processing.</span></span> <span data-ttu-id="30e03-108">(Diese Elemente werden als WHS-Elemente bezeichnet.) Das Löschen dieser Datensätze kann die Leistung der vorhandenen Berechnungen erheblich verbessern.</span><span class="sxs-lookup"><span data-stu-id="30e03-108">(These items are referred to as WHS items.) Deletion of these records can significantly improve the performance of on-hand calculations.</span></span>

## <a name="what-the-cleanup-job-does"></a><span data-ttu-id="30e03-109">Was macht der Bereinigungsjob</span><span class="sxs-lookup"><span data-stu-id="30e03-109">What the cleanup job does</span></span>

<span data-ttu-id="30e03-110">Der Bereinigungsjob für vorhandene Einträge löscht alle Datensätze in den Tabellen WHSInventReserve und InventSum, in denen sich alle Feldwerte befinden *0* (Null).</span><span class="sxs-lookup"><span data-stu-id="30e03-110">The on-hand entries cleanup job deletes any records in the WHSInventReserve and InventSum tables where all the field values are *0* (zero).</span></span> <span data-ttu-id="30e03-111">Diese Datensätze können gelöscht werden, da sie nicht zu den verfügbaren Informationen beitragen.</span><span class="sxs-lookup"><span data-stu-id="30e03-111">These records can be deleted because they don't contribute to the on-hand information.</span></span> <span data-ttu-id="30e03-112">Der Job löscht nur Datensätze, die unter der Ebene **Standort** liegen.</span><span class="sxs-lookup"><span data-stu-id="30e03-112">The job deletes only records that are below the **Location** level.</span></span>

<span data-ttu-id="30e03-113">Wenn eine negative Inventur zulässig ist, kann der Bereinigungsjob möglicherweise nicht alle relevanten Einträge löschen.</span><span class="sxs-lookup"><span data-stu-id="30e03-113">If negative physical inventory is allowed, the cleanup job might not be able to delete all the relevant entries.</span></span> <span data-ttu-id="30e03-114">Der Grund für diese Einschränkung ist, dass der Job ein spezielles Szenario zulassen muss, in dem eine Kennzeichnung mehrere Seriennummern hat und eine dieser Seriennummern negativ geworden ist.</span><span class="sxs-lookup"><span data-stu-id="30e03-114">The reason for this limitation is that the job must allow for a special scenario where a license plate has multiple serial numbers, and one of those serial numbers has become negative.</span></span> <span data-ttu-id="30e03-115">Beispielsweise verfügt das System Null verfügbar auf Kennzeichenebene, wenn ein Kennzeichen +1 Stück der Seriennummer 1 und –1 Stück der Seriennummer 2 enthält.</span><span class="sxs-lookup"><span data-stu-id="30e03-115">For example, the system will have zero on hand at the license plate level when a license plate has +1 pcs of serial number 1 and –1 pcs of serial number 2.</span></span> <span data-ttu-id="30e03-116">In diesem speziellen Szenario führt der Job eine Löschung mit der Breite zuerst durch, wobei versucht wird, zuerst von den niedrigeren Ebenen zu löschen.</span><span class="sxs-lookup"><span data-stu-id="30e03-116">For this special scenario, the job does a breadth-first deletion, where it tries to delete from lower levels first.</span></span>

## <a name="schedule-and-configure-the-cleanup-job"></a><span data-ttu-id="30e03-117">Planen und konfigurieren Sie den Bereinigungsjob</span><span class="sxs-lookup"><span data-stu-id="30e03-117">Schedule and configure the cleanup job</span></span>

<span data-ttu-id="30e03-118">Der Bereinigungsjob für vorhandene Einträge ist unter **Bestandsverwaltung \> Periodische Aufgaben \> Bereinigen \> Bereinigung der Lagereinträge** verfügbar.</span><span class="sxs-lookup"><span data-stu-id="30e03-118">The on-hand entries cleanup job is available at **Inventory management \> Periodic tasks \> Clean up \> Warehouse management on-hand entries cleanup**.</span></span> <span data-ttu-id="30e03-119">Verwenden Sie die Standardjobeinstellungen, um den Umfang und den Zeitplan für die Ausführung des Jobs zu steuern.</span><span class="sxs-lookup"><span data-stu-id="30e03-119">Use the standard job settings to control the scope and schedule for running the job.</span></span> <span data-ttu-id="30e03-120">Darüber hinaus stehen folgenden Einstellungen zur Verfügung:</span><span class="sxs-lookup"><span data-stu-id="30e03-120">In addition, the following settings are provided:</span></span>

- <span data-ttu-id="30e03-121">**Löschen, wenn für diese vielen Tage nicht aktualisiert** – Geben Sie die Mindestanzahl von Tagen ein, die der Job warten soll, bevor ein vorhandener Eintrag gelöscht wird, der auf Null gesunken ist.</span><span class="sxs-lookup"><span data-stu-id="30e03-121">**Delete if not updated for this many days** – Enter the minimum number of days that the job should wait before it deletes an on-hand entry that has dropped to zero quantity.</span></span> <span data-ttu-id="30e03-122">Verwenden Sie diese Einstellung, um das Risiko zu verringern, dass noch verwendete Einträge gelöscht werden.</span><span class="sxs-lookup"><span data-stu-id="30e03-122">Use this setting to help reduce the risk of deleting on-hand entries that are still being used.</span></span> <span data-ttu-id="30e03-123">Wenn Sie möchten, dass die Bereinigung so schnell wie möglich erfolgt, geben Sie entweder *0* (Null) ein oder lassen Sie das Feld leer.</span><span class="sxs-lookup"><span data-stu-id="30e03-123">If you want cleanup to occur as soon as possible, either enter *0* (zero) or leave the field blank.</span></span>
- <span data-ttu-id="30e03-124">**Maximale Ausführungszeit (Stunden)** – Geben Sie die maximale Ausführungszeit des Bereinigungsjobs in Stunden ein.</span><span class="sxs-lookup"><span data-stu-id="30e03-124">**Maximum execution time (hours)** – Enter the maximum execution time of the cleanup job, in hours.</span></span> <span data-ttu-id="30e03-125">Wenn der Auftrag nicht vor Ablauf dieser Zeit abgeschlossen wird, speichert er die bisher abgeschlossene Arbeit und schließt sich dann selbst.</span><span class="sxs-lookup"><span data-stu-id="30e03-125">If the job isn't completed before this time passes, it will save the work that it has completed so far and then close itself.</span></span> <span data-ttu-id="30e03-126">Diese Funktion ist besonders relevant für Implementierungen mit hohem Lagerbestand.</span><span class="sxs-lookup"><span data-stu-id="30e03-126">This capability is especially relevant for implementations that have high inventory use.</span></span> <span data-ttu-id="30e03-127">In diesen Fällen sollten Sie den Job so planen, dass er zu Zeiten ausgeführt wird, in denen die Systemlast so gering wie möglich ist.</span><span class="sxs-lookup"><span data-stu-id="30e03-127">In these cases, you should schedule the job to run at times when the system load is as light as possible.</span></span> <span data-ttu-id="30e03-128">Wenn Sie möchten, dass der Stapeljob so lange ausgeführt wird, bis er abgeschlossen ist, geben Sie entweder *0* (Null) ein oder lassen Sie das Feld leer.</span><span class="sxs-lookup"><span data-stu-id="30e03-128">If you want the batch job to continue to run until it's completed, either enter *0* (zero) or leave the field blank.</span></span> <span data-ttu-id="30e03-129">Diese Einstellung ist nur verfügbar, wenn die zugehörige Funktion [in Ihrem System eingeschaltet](#max-execution-time) wurde.</span><span class="sxs-lookup"><span data-stu-id="30e03-129">This setting is available only if the related feature has been [turned on in your system](#max-execution-time).</span></span>

<span data-ttu-id="30e03-130">Obwohl Sie den Job während der regulären Geschäftszeiten ausführen können, empfehlen wir, ihn außerhalb der Arbeitszeiten auszuführen.</span><span class="sxs-lookup"><span data-stu-id="30e03-130">Although you can run the job during regular business hours, we recommend that you run it outside working hours.</span></span> <span data-ttu-id="30e03-131">Auf diese Weise können Sie Konflikte vermeiden, die auftreten können, wenn ein Benutzer mit einem Datensatz arbeitet, der ebenfalls bereinigt wird.</span><span class="sxs-lookup"><span data-stu-id="30e03-131">In this way, you help prevent conflicts that can occur if a user is working with a record that is also being cleaned up.</span></span>

<span data-ttu-id="30e03-132">Wenn der Einzelvorgang versucht, einen Datensatz für ein Element zu löschen, während dieser Datensatz von einem anderen Benutzer verwendet wird, tritt entweder für den Bereinigungsvorgang oder für den Benutzer ein Deadlock-Fehler auf.</span><span class="sxs-lookup"><span data-stu-id="30e03-132">If the job tries to delete a record for an item while that record is being used by another user, a deadlock error occurs for either the cleanup job or the user.</span></span>

<span data-ttu-id="30e03-133">Wenn der Einzelauftrag ausgeführt wird, hat er eine Festschreibungsgröße von 100.</span><span class="sxs-lookup"><span data-stu-id="30e03-133">When the job runs, it has a commit size of 100.</span></span> <span data-ttu-id="30e03-134">Mit anderen Worten, es wird versucht, einmal pro 100 Löschungen eine Bestätigung durchzuführen.</span><span class="sxs-lookup"><span data-stu-id="30e03-134">In other words, it will try to commit one time for every 100 deletions.</span></span> <span data-ttu-id="30e03-135">Da einige Löschvorgänge jedoch satzbasiert sind, kann es Szenarien geben, in denen mehr als 100 Datensätze in derselben Transaktion gelöscht werden können.</span><span class="sxs-lookup"><span data-stu-id="30e03-135">However, because some deletions are set-based, there might be scenarios where more than 100 records can be deleted in the same transaction.</span></span> <span data-ttu-id="30e03-136">Daher können manchmal immer noch Sperreneskalationen auftreten.</span><span class="sxs-lookup"><span data-stu-id="30e03-136">Therefore, lock escalations can still sometimes occur.</span></span>

## <a name="possible-user-impact"></a><span data-ttu-id="30e03-137">Mögliche Auswirkungen auf den Benutzer</span><span class="sxs-lookup"><span data-stu-id="30e03-137">Possible user impact</span></span>

<span data-ttu-id="30e03-138">Benutzer sind möglicherweise betroffen, wenn der Bereinigungsjob für vorhandene Einträge alle Datensätze für eine bestimmte Ebene (z. B. die Kennzeichenebene) löscht.</span><span class="sxs-lookup"><span data-stu-id="30e03-138">Users might be affected if the on-hand entries cleanup job deletes all the records for a given level (such as the license plate level).</span></span> <span data-ttu-id="30e03-139">In diesem Fall funktioniert die Funktionalität zum Anzeigen, dass das Inventar zuvor auf einer Kennzeichnung verfügbar war, möglicherweise nicht wie erwartet arbeitet, da die entsprechenden verfügbaren Einträge nicht mehr verfügbar sind.</span><span class="sxs-lookup"><span data-stu-id="30e03-139">In this case, the functionality for seeing that inventory was previously available on hand at a license plate might not work as expected, because the relevant on-hand entries are no longer available.</span></span> <span data-ttu-id="30e03-140">(Diese Funktion überprüft die Bedingung **Menge \<\> 0** in dem die **Dimensionsanzeige** Einstellungen, wenn Benutzer vorhandene Informationen anzeigen.) Die Leistungsverbesserung, die der Bereinigungsvorgang bietet, sollte diesen kleinen Funktionsverlust jedoch ausgleichen.</span><span class="sxs-lookup"><span data-stu-id="30e03-140">(That functionality checks the condition **Quantity \<\> 0** in the **Dimension display** settings when users view on-hand information.) However, the performance improvement that the cleanup job provides should make up for this small loss in functionality.</span></span>

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a><span data-ttu-id="30e03-141">Stellen Sie die Einstellung maximale Ausführungszeit zur Verfügung</span><span class="sxs-lookup"><span data-stu-id="30e03-141">Make the Maximum execution time setting available</span></span>

<span data-ttu-id="30e03-142">Standardmäßig ist die Einstellung **Maximale Ausführungszeit** nicht verfügbar.</span><span class="sxs-lookup"><span data-stu-id="30e03-142">By default, the **Maximum execution time** setting isn't available.</span></span> <span data-ttu-id="30e03-143">Wenn Sie es verwenden möchten, müssen Sie die [Funktionsverwaltung](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) verwenden, um die zugehörige Funktion in Ihrem System zu aktivieren.</span><span class="sxs-lookup"><span data-stu-id="30e03-143">If you want to use it, you must use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the related feature in your system.</span></span> <span data-ttu-id="30e03-144">Im Arbeitsbereich **Funktionsverwaltung** ist die Funktion wie folgt aufgeführt:</span><span class="sxs-lookup"><span data-stu-id="30e03-144">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="30e03-145">**Module:** *Lagerortverwaltung*</span><span class="sxs-lookup"><span data-stu-id="30e03-145">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="30e03-146">**Funktionsname:** *Maximale Ausführungszeit für den Bereinigungsvorgang für Lagereinträge*</span><span class="sxs-lookup"><span data-stu-id="30e03-146">**Feature name:** *Maximum execution time for the warehouse management on-hand entries cleanup job*</span></span>
