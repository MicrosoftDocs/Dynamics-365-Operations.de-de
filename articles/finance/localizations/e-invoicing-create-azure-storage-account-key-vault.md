---
title: Erstellen eines Azure-Speicherkontos und eines Schlüsseltresors
description: In diesem Thema wird erläutert, wie Sie ein Azure-Speicherkonto und einen Schlüsseltresor erstellen.
author: gionoder
manager: AnnBe
ms.date: 09/22/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 97423
ms.assetid: ''
ms.search.region: Global
ms.author: janeaug
ms.search.validFrom: 2020-07-08
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 5a883011bbff6d82504497d739c07f1ada9e5f69
ms.sourcegitcommit: f860ac2b18f6bbbfc4a46b497baec2477105b116
ms.translationtype: HT
ms.contentlocale: de-DE
ms.lasthandoff: 10/19/2020
ms.locfileid: "4443752"
---
# <a name="create-an-azure-storage-account-and-a-key-vault"></a><span data-ttu-id="daa56-103">Erstellen eines Azure-Speicherkontos und eines Schlüsseltresors</span><span class="sxs-lookup"><span data-stu-id="daa56-103">Create an Azure storage account and a key vault</span></span>

[!include [banner](../includes/banner.md)]



<span data-ttu-id="daa56-104">Der Add-On-Service für die elektronische Rechnungsstellung übernimmt die Zuständigkeit für die Speicherung aller Ihrer Geschäftsdaten in den Microsoft Azure-Ressourcen, die Ihrem Unternehmen gehören.</span><span class="sxs-lookup"><span data-stu-id="daa56-104">The Electronic invoicing add-on service takes responsibility for storing all your business data in the Microsoft Azure resources that are owned by your company.</span></span> <span data-ttu-id="daa56-105">Um sicherzustellen, dass der Service ordnungsgemäß funktioniert und auf alle Geschäftsdaten, die für das Add-On für die elektronische Rechnungsstellung benötigt und von ihm generiert werden, nur vom Add-On zugegriffen wird, müssen Sie zwei Azure-Hauptressourcen erstellen:</span><span class="sxs-lookup"><span data-stu-id="daa56-105">To ensure that the service works correctly, and that all the business data that is needed for and generated by the Electronic invoicing add-on is accessed only by the add-on, you must create two main Azure resources:</span></span>

- <span data-ttu-id="daa56-106">Ein Azure-Speicherkonto (Blob-Speicher) zum Speichern elektronischer Rechnungen</span><span class="sxs-lookup"><span data-stu-id="daa56-106">An Azure storage account (Blob storage) to store electronic invoices</span></span>
- <span data-ttu-id="daa56-107">Ein Azure-Schlüsseldepot zum Speichern von Zertifikaten und des URI (Uniform Resource Identifier) des Speicherkontos</span><span class="sxs-lookup"><span data-stu-id="daa56-107">An Azure key vault to store certificates and the Uniform Resource Identifier (URI) of the storage account</span></span>

> [!NOTE]
> <span data-ttu-id="daa56-108">Eine dedizierte Schlüsseltresorressource und ein Blob-Speicher für den Kunden müssen speziell für die Verwendung mit dem Add-On für die elektronische Rechnungsstellung zugewiesen werden.</span><span class="sxs-lookup"><span data-stu-id="daa56-108">A dedicated key vault resource and customer Blob storage must be allocated specifically for use with the Electronic invoicing add-on.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="daa56-109">Voraussetzungen</span><span class="sxs-lookup"><span data-stu-id="daa56-109">Prerequisites</span></span>

<span data-ttu-id="daa56-110">Bevor Sie die Schritte in diesem Thema abschließen können, müssen Sie sicherstellen, dass die folgenden Aufgaben abgeschlossen werden:</span><span class="sxs-lookup"><span data-stu-id="daa56-110">Before you can complete the steps in this topic, you must make sure that the following tasks have been completed:</span></span>

- <span data-ttu-id="daa56-111">Erstellen Sie eine Schlüsseltresor-Ressource in Azure.</span><span class="sxs-lookup"><span data-stu-id="daa56-111">Create a key vault resource in Azure.</span></span> <span data-ttu-id="daa56-112">Weitere Informationen finden Sie unter [Über Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview).</span><span class="sxs-lookup"><span data-stu-id="daa56-112">For more information, see [About Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview).</span></span>
- <span data-ttu-id="daa56-113">Erstellen Sie ein Azure-Speicherkonto (Blob-Speicher).</span><span class="sxs-lookup"><span data-stu-id="daa56-113">Create an Azure storage account (Blob storage).</span></span> <span data-ttu-id="daa56-114">Weitere Informationen finden Sie unter [Verwalten des Azure-Speicherkontos](https://docs.microsoft.com/azure/storage/blobs/).</span><span class="sxs-lookup"><span data-stu-id="daa56-114">For more information, see [Maintaining Azure Storage Account](https://docs.microsoft.com/azure/storage/blobs/).</span></span>

## <a name="overview"></a><span data-ttu-id="daa56-115">Übersicht</span><span class="sxs-lookup"><span data-stu-id="daa56-115">Overview</span></span>

<span data-ttu-id="daa56-116">In diesem Thema führen Sie zwei Hauptschritte aus:</span><span class="sxs-lookup"><span data-stu-id="daa56-116">In this topic, you will complete two main steps:</span></span>

- <span data-ttu-id="daa56-117">Richten Sie das Azure-Speicherkonto ein, um den URI des Speicherkontos abzurufen.</span><span class="sxs-lookup"><span data-stu-id="daa56-117">Set up the Azure storage account to get the storage account URI.</span></span>
- <span data-ttu-id="daa56-118">Richten Sie den Schlüsseltresor zum Speichern des Speicherkonto-URI ein.</span><span class="sxs-lookup"><span data-stu-id="daa56-118">Set up the key vault to store the storage account URI.</span></span>

## <a name="set-up-the-azure-storage-account-to-get-the-storage-account-uri"></a><span data-ttu-id="daa56-119">Einrichten des Azure-Speicherkontos, um den URI des Speicherkontos abzurufen</span><span class="sxs-lookup"><span data-stu-id="daa56-119">Set up the Azure storage account to get the storage account URI</span></span>

1. <span data-ttu-id="daa56-120">Öffnen Sie das Speicherkonto, das Sie mit dem Add-On für die elektronische Rechnungsstellung verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="daa56-120">Open the storage account that you plan to use with the Electronic invoicing add-on.</span></span>
2. <span data-ttu-id="daa56-121">Navigieren Sie zu **Blob-Dienst** \> **Container** und erstellen Sie einen neuen Container.</span><span class="sxs-lookup"><span data-stu-id="daa56-121">Go to **Blob service** \> **Containers**, and create a new container.</span></span>
3. <span data-ttu-id="daa56-122">Geben Sie einen Namen für den Container ein und legen Sie das Feld **Öffentliche Zugriffsebene** auf **Privat (kein anonymer Zugriff)** fest.</span><span class="sxs-lookup"><span data-stu-id="daa56-122">Enter a name for the container, and set the **Public access level** field to **Private (no anonymous access)**.</span></span>
4. <span data-ttu-id="daa56-123">Öffnen Sie den Container und navigieren Sie zu **Einstellungen \> Zugriffsrichtlinie**.</span><span class="sxs-lookup"><span data-stu-id="daa56-123">Open the container, and go to **Settings \> Access policy**.</span></span>
5. <span data-ttu-id="daa56-124">Wählen Sie **Richtlinie hinzufügen** aus, um eine gespeicherte Zugriffsrichtlinie hinzuzufügen.</span><span class="sxs-lookup"><span data-stu-id="daa56-124">Select **Add policy** to add a stored access policy.</span></span>
6. <span data-ttu-id="daa56-125">Legen Sie die Felder **Bezeichner** und **Berechtigungen** nach Bedarf fest.</span><span class="sxs-lookup"><span data-stu-id="daa56-125">Set the **Identifier** and **Permissions** fields as appropriate.</span></span> <span data-ttu-id="daa56-126">Im Feld **Berechtigungen** sollten Sie alle Berechtigungen auswählen.</span><span class="sxs-lookup"><span data-stu-id="daa56-126">In the **Permissions** field, you should select all permissions.</span></span>

    ![Erteilen der Blob-Speicherberechtigung](media/e-Invoicing-services-create-azure-resources-grant-blob-permissions.png)

7. <span data-ttu-id="daa56-128">Geben Sie das Start- und das Ablaufdatum ein.</span><span class="sxs-lookup"><span data-stu-id="daa56-128">Enter the start and expiry dates.</span></span> <span data-ttu-id="daa56-129">Das Ablaufdatum sollte in der Zukunft liegen.</span><span class="sxs-lookup"><span data-stu-id="daa56-129">The expiry date should be in future.</span></span>
8. <span data-ttu-id="daa56-130">Wählen Sie **OK** aus, um die Richtlinie zu speichern. Anschließend speichern Sie Ihre Änderungen im Container.</span><span class="sxs-lookup"><span data-stu-id="daa56-130">Select **OK** to save the policy, and then save your changes to the container.</span></span>
9. <span data-ttu-id="daa56-131">Kehren Sie zum Speicherkonto zurück und öffnen Sie **Storage-Explorer (Vorschau)**.</span><span class="sxs-lookup"><span data-stu-id="daa56-131">Return to the storage account, and open **Storage Explorer (preview)**.</span></span>
10. <span data-ttu-id="daa56-132">Klicken Sie mit der rechten Maustaste auf den Container und wählen Sie **Shared Access Signature abrufen** aus.</span><span class="sxs-lookup"><span data-stu-id="daa56-132">Right-click the container, and then select **Get Shared Access Signature**.</span></span>
11. <span data-ttu-id="daa56-133">Kopieren und speichern Sie im Dialogfeld **Shared Access Signatur** den Wert im Feld **URI**.</span><span class="sxs-lookup"><span data-stu-id="daa56-133">In the **Shared Access Signature** dialog box, copy and store the value in the **URI** field.</span></span> <span data-ttu-id="daa56-134">Dieser Wert wird in der nächsten Prozedur verwendet und als *URI für die Shared Access Signature* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="daa56-134">This value will be used in the next procedure and will be referred to as the *shared access signature URI*.</span></span>

    ![Auswählen und Kopieren des URI-Werts](media/e-Invoicing-services-create-azure-resources-select-and-copy-uri.png)

## <a name="set-up-the-key-vault-to-store-the-storage-account-uri"></a><span data-ttu-id="daa56-136">Einrichten des Schlüsseltresor zum Speichern des Speicherkonto-URI</span><span class="sxs-lookup"><span data-stu-id="daa56-136">Set up the key vault to store the storage account URI</span></span>

1. <span data-ttu-id="daa56-137">Öffnen Sie den Schlüsseltresor, den Sie mit dem Add-On für die elektronische Rechnungsstellung verwenden möchten.</span><span class="sxs-lookup"><span data-stu-id="daa56-137">Open the key vault that you intend to use with the Electronic invoicing add-on.</span></span>
2. <span data-ttu-id="daa56-138">Navigieren Sie zu **Einstellungen** \> **Geheimnisse** und wählen Sie dann **Generieren/Importieren** aus, um ein neues Geheimnis zu erstellen.</span><span class="sxs-lookup"><span data-stu-id="daa56-138">Go to **Settings** \> **Secrets**, and then select **Generate/Import** to create a new secret.</span></span>
3. <span data-ttu-id="daa56-139">Wählen Sie auf der Seite **Geheimnis erstellen** im Feld **Uploadoptionen** die Option **Manuell** aus.</span><span class="sxs-lookup"><span data-stu-id="daa56-139">On the **Create a secret** page, in the **Upload options** field, select **Manual**.</span></span>
4. <span data-ttu-id="daa56-140">Geben Sie den Namen für das Geheimnis ein.</span><span class="sxs-lookup"><span data-stu-id="daa56-140">Enter the name of the secret.</span></span> <span data-ttu-id="daa56-141">Dieser Name wird während der Einrichtung des Service im Regulatory Configuration Service (RCS) verwendet und als *geheimer Name des Schlüsseltresors* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="daa56-141">This name will be used during setup of the service in Regulatory Configuration Service (RCS) and will be referred to as the *key vault secret name*.</span></span>
5. <span data-ttu-id="daa56-142">Wählen Sie im Feld **Wert** die Option **URI für die Shared Access Signature** aus und wählen Sie dann **Erstellen** aus.</span><span class="sxs-lookup"><span data-stu-id="daa56-142">In the **Value** field, select **Shared Access Signature URI**, and then select **Create**.</span></span>
6. <span data-ttu-id="daa56-143">Richten Sie die Zugriffsrichtlinie ein, um dem Add-On für die elektronische Rechnungsstellung die richtige Zugriffsebene für den sicheren Zugriff auf das von Ihnen erstellte Geheimnis zu gewähren.</span><span class="sxs-lookup"><span data-stu-id="daa56-143">Set up the access policy to grant the Electronic invoicing add-on the correct level of secure access to the secret you created.</span></span> <span data-ttu-id="daa56-144">Navigieren Sie zu **Einstellungen \> Zugriffsrichtlinie** und wählen Sie **Zugriffsrichtlinie hinzufügen** aus.</span><span class="sxs-lookup"><span data-stu-id="daa56-144">Go to **Settings \> Access policy**, and select **Add Access Policy**.</span></span>
7. <span data-ttu-id="daa56-145">Legen Sie die geheimen Berechtigungen für die Vorgänge **Abrufen** und **Auflisten** fest.</span><span class="sxs-lookup"><span data-stu-id="daa56-145">Set the secret permissions for the **Get** and **List** operations.</span></span>

    ![Gewähren des Servicezugriffs](media/e-Invoicing-services-create-azure-resources-grant-service-access.png)

8. <span data-ttu-id="daa56-147">Legen Sie die Zertifikatsberechtigungen für die Vorgänge **Abrufen** und **Auflisten** fest.</span><span class="sxs-lookup"><span data-stu-id="daa56-147">Set the certificate permissions for **Get** and **List** operations.</span></span>

    ![Gewähren der Zertifikatsberechtigung](media/e-Invoicing-services-create-azure-resources-grant-certificate-permission.png)

9. <span data-ttu-id="daa56-149">Wählen Sie im Dialogfeld **Prinzipal** den Prinzipal aus, indem Sie das **Add-On für die elektronische Rechnungsstellung** hinzufügen.</span><span class="sxs-lookup"><span data-stu-id="daa56-149">In the **Principal** dialog box, select the principal by adding **Electronic invoicing add-on**.</span></span>
10. <span data-ttu-id="daa56-150">Wählen Sie **Hinzufügen** aus und wählen Sie dann **Änderungen am Schlüsseltresor speichern** aus.</span><span class="sxs-lookup"><span data-stu-id="daa56-150">Select **Add**, and then select **Save Key Vault changes**.</span></span>
11. <span data-ttu-id="daa56-151">Kopieren Sie auf der Seite **Übersicht** den Wert von **DNS-Name** für den Schlüsseltresor.</span><span class="sxs-lookup"><span data-stu-id="daa56-151">On the **Overview** page, copy the **DNS name** value for the key vault.</span></span> <span data-ttu-id="daa56-152">Dieser Wert wird während der Einrichtung des Service in RCS verwendet und als *Schlüsseltresor-URI* bezeichnet.</span><span class="sxs-lookup"><span data-stu-id="daa56-152">This value will be used during setup of the service in RCS and will be referred as the *key vault URI*.</span></span>
